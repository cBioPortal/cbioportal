(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1017:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return y});var r=n(0),o=n(21),a=n(4),i=n(1068),l=n(2),u=n(8),c=n(7);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":m(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},y="GRCh37",g=function(t){function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=p(this,f(n).apply(this,arguments))).genePanelInTooltip="",e}var l,u,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,r["Component"]),l=n,(u=[{key:"componentDidMount",value:function(){this.drawTracks()}},{key:"setGenePanelInTooltip",value:function(e){this.genePanelInTooltip=e}},{key:"drawTracks",value:function(){var t=this,n=a.keyBy(this.props.samples.filter(function(e){return e.copyNumberSegmentPresent}),function(e){return e.sampleId}),r=a.keyBy(this.props.samples.filter(function(e){return e.sequenced}),function(e){return e.sampleId}),l=!!(this.props.mutationGenePanelIconData&&a.keys(this.props.mutationGenePanelIconData).length>0||this.props.copyNumberGenePanelIconData&&a.keys(this.props.copyNumberGenePanelIconData).length>0),u=i.a(Object.keys(n).length+Object.keys(r).length,this.props.width,l),c=0,s=i.b(document.getElementsByClassName("genomicOverviewTracksContainer")[0],u),p=y;this.props.mutations&&this.props.mutations.length>0&&(p=this.props.mutations[0].ncbiBuild);var f=i.c(p);i.d(s,u,f,p),a.each(this.props.sampleManager.samples,function(r){var l={};if(t.props.mutationGenePanelIconData&&(l=t.props.mutationGenePanelIconData[r.id]),n[r.id]){var p=[],d=a.filter(t.props.cnaSegments,function(e){return e.sampleId===r.id});if(a.each(d,function(e){var t=[];t.push(e.sampleId),t.push(e.chromosome),t.push(e.end),t.push(e.start),t.push(e.numberOfProbes),t.push(e.segmentMean),p.push(t)}),i.e(s,u,f,c,p,1,3,2,5,r.id,l,t.setGenePanelInTooltip),c+=1,t.props.sampleManager.samples.length>1){var m=e('[id="cnaTrack'.concat(r.id,'"]')),h={x:parseInt(m.attr("x"))-10,y:parseInt(m.attr("y"))-5},y=e('<svg height="12" width="12" />').attr(h);m.replaceWith(y);var g=t.props.sampleManager.getComponentForSample(r.id,1,"",null,t.props.onSelectGenePanel);o.render(g,y[0])}}}),a.each(this.props.sampleManager.samples,function(n){var l={};if(t.props.mutationGenePanelIconData&&(l=t.props.mutationGenePanelIconData[n.id]),r[n.id]){var p=a.filter(t.props.mutations,function(e){return e.sampleId===n.id});if(i.f(s,u,f,c,p,n.id,l,t.setGenePanelInTooltip),c+=1,t.props.sampleManager.samples.length>1){var d="mutTrack".concat(n.id),m=e('[id="'.concat(d,'"]')),h={x:parseInt(m.attr("x"))-10,y:parseInt(m.attr("y"))-5},y=e('<svg id="'.concat(d,'" height="12" width="12" />'));y.attr(h),m.replaceWith(y);var g=t.props.sampleManager.getComponentForSample(n.id,1,"",null,t.props.onSelectGenePanel);o.render(g,y[0])}}})}},{key:"render",value:function(){var e=this;return r.createElement(r.Fragment,null,r.createElement("div",{className:"genomicOverviewTracksContainer"}),r.createElement("div",{className:"tooltip-content",style:{display:"none"}},r.createElement("span",null,this.genePanelInTooltip?r.createElement(r.Fragment,null,"Gene panel:"," ",r.createElement("a",{onClick:function(){return e.props.onSelectGenePanel(e.genePanelInTooltip)}},this.genePanelInTooltip)):"Gene panel information not found. Sample is presumed to be whole exome/genome sequenced.")))}}])&&s(l.prototype,u),c&&s(l,c),n}();h([l.observable],g.prototype,"genePanelInTooltip",void 0),h([u.default,l.action],g.prototype,"setGenePanelInTooltip",null),g=h([c.observer],g),t.b=g}).call(this,n(11))},1025:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__31Bse",framedImage:"styles-module__framedImage__1BiD7",genesList:"styles-module__genesList__2enmP",searchInput:"styles-module__searchInput__385Z_",panelName:"styles-module__panelName__czMY2",copyDownloadControls:"styles-module__copyDownloadControls__2Edes",patientViewModal:"styles-module__patientViewModal__17gba"}},1068:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return p}),n.d(t,"c",function(){return m}),n.d(t,"d",function(){return h}),n.d(t,"e",function(){return b}),n.d(t,"f",function(){return v});var r=n(1069),o=n.n(r),a=n(11),i=n.n(a),l=n(4),u=(n(877),n(1018),n(1017)),c=n(1070);function s(e,t,n){var r={};return r.nRows=e,r.canvasWidth=t,r.wideLeftText=25,r.wideRightText=50,r.wideGenePanelIcon=20,r.heigthGenePanelIcon=18,r.GenomeWidth=r.canvasWidth-r.wideLeftText-r.wideRightText-(n?r.wideGenePanelIcon:0),r.pixelsPerBinMut=3,r.rowHeight=20,r.rowMargin=5,r.ticHeight=10,r.cnTh=[.2,1.5],r.cnLengthTh=5e4,r.getCnColor=function(e){if(e>=r.cnTh[1])return"#f00";if(e<=-r.cnTh[1])return"#00f";var t=Math.round(255*(r.cnTh[1]-Math.abs(e))/(r.cnTh[1]-r.cnTh[0]));return e<0?"rgb("+t+","+t+",255)":"rgb(255,"+t+","+t+")"},r.canvasHeight=function(){return 2*r.rowMargin+r.ticHeight+r.nRows*(r.rowHeight+r.rowMargin)},r.yRow=function(e){return 2*r.rowMargin+r.ticHeight+e*(r.rowHeight+r.rowMargin)},r.xRightText=function(){return r.wideLeftText+r.GenomeWidth+5},r.xGenePanelIcon=function(){return r.xRightText()+40},r.xGenePanelIconText=function(){return r.xGenePanelIcon()+r.wideGenePanelIcon/2},r}function p(e,t){return o()(e,t.canvasWidth,t.canvasHeight())}var f=new Map([["hg19","GRCh37"],["37","GRCh37"],["hg38","GRCh38"],["38","GRCh38"],["mm10","GRCm38"]]),d=c.reduce(function(e,t){return e[t.genomeBuild]=t.chromosomeSize||[],e},{});function m(e){var t={genomeRef:{},total:0},n=f.get(e);n&&""!==n||(n=u.a);var r=d[n];return r&&(t.genomeRef=r,t.total=l.sum(r)),t.perc=function(e,t){for(var n=[0],r=1;r<e.length;r++)n.push(n[r-1]+e[r]/t);return n}(t.genomeRef,t.total),t.loc2perc=function(e,n){return t.perc[e-1]+n/t.total},t.loc2xpixil=function(e,n,r){return t.loc2perc(e,n)*r.GenomeWidth+r.wideLeftText},t.perc2loc=function(e,n){var r;if(n){for(o=n;o<t.genomeRef.length&&!(e<=t.perc[o]);o++);r=o}else{for(var o,a=1,i=t.genomeRef.length-1;a<=i;)o=Math.floor((a+i)/2),t.perc[o]>=e?i=o-1:a=o+1;r=a}return[r,Math.round(t.total*(e-t.perc[r-1]))]},t.xpixil2loc=function(e,n,r){var o=(n-e.wideLeftText)/e.GenomeWidth;return t.perc2loc(o,r)},t.middle=function(e,n){var r=t.genomeRef[e]/2;return t.loc2xpixil(e,r,n)},t.chmName=function(e){return 23===e?"X":24===e?"Y":e},t}function h(e,t,n,r){var o=t.rowMargin+t.ticHeight;y(t.wideLeftText,o,t.wideLeftText+t.GenomeWidth,o,e,"#000",1);for(var a=1;a<n.genomeRef.length;a++)if(0===n.genomeRef[a]&&"GRCm38"===r);else{var i=n.loc2xpixil(a,0,t);y(i,o,i,t.rowMargin,e,"#000",1);var l=n.middle(a,t);e.text(l,o-t.rowMargin,n.chmName(a))}y(t.wideLeftText+t.GenomeWidth,o,t.wideLeftText+t.GenomeWidth,t.rowMargin,e,"#000",1)}function y(e,t,n,r,o,a,i){var l="M"+e+" "+t+" L"+n+" "+r,u=o.path(l);return u.attr("stroke",a),u.attr("stroke-width",i),u.attr("opacity",.5),u.translate(.5,.5),u}function g(e,t){return"chr"+t.chmName(e[0])+":"+function(e){var t=e.toString(),n=/(\d+)(\d{3})/;for(;n.test(t);)t=t.replace(n,"$1,$2");return t}(e[1])}function b(e,t,n,r,o,a,u,c,s,p,f,d){var m=t.yRow(r),h=0,y=0;if(l.each(o,function(r){var o=w(r[a]);if(!(null==o||o[0]>=n.genomeRef.length)){var i=r[u],l=r[c],p=r[s];if(h+=l-i,!(Math.abs(p)<t.cnTh[0]||l-i<t.cnLengthTh)){y+=l-i;var f=n.loc2xpixil(o,i,t),d=n.loc2xpixil(o,l,t),b=e.rect(f,m,d-f,t.rowHeight),v=t.getCnColor(p);b.attr("fill",v),b.attr("stroke",v),b.attr("stroke-width",1),b.attr("opacity",.5),b.translate(.5,.5);var E="Mean copy number log2 value: "+p+"<br/>from "+g([o,i],n)+"<br/>to "+g([o,l],n);S(b.node,E,"","")}}}),null!=p){var b="CNA";(T=e.text(12,m+t.rowHeight/2,b).attr({"text-anchor":"center",fill:"black"})).node.setAttribute("id","cnaTrack"+p)}else e.text(0,m+t.rowHeight/2,"CNA").attr({"text-anchor":"start"});b=0===h?"N/A":(100*y/h).toFixed(1)+"%";var v=0===h?"Copy number segment data not available":"Percentage of copy number altered chromosome regions (mean copy number log value >0.2 or <-0.2) out of measured regions.";E(T=e.text(t.xRightText(),m+t.rowHeight/2,b).attr({"text-anchor":"start","font-weight":"bold"}),e),S(T.node,v,null,{my:"top right",at:"bottom left",viewport:i()(window)});if(f&&f.label){var T,A=e.rect(t.xGenePanelIcon(),m+1,t.wideGenePanelIcon,t.heigthGenePanelIcon,4);A.attr("fill",f.color||"#FFFFFF"),A.attr("fill-opacity",.2),A.attr("stroke-width",0),(T=e.text(t.xGenePanelIconText(),m+t.heigthGenePanelIcon/2+1,f.label).attr({"text-anchor":"center",fill:"black"})).node.setAttribute("data-test","cna-track-genepanel-icon-"+r);var I=f.genePanelId?"Gene panel: "+f.genePanelId:"Gene panel information not found. Sample is presumed to be whole exome/genome sequenced.";S(T.node,I,null,{my:"top right",at:"bottom left"},f.genePanelId,i()(".tooltip-content").find("span"),d)}}function v(e,t,n,r,o,a,u,c){for(var s=l.filter(o,function(e){return e.sampleId===a}),p=[],f=0;f<s.length;f++){var d=s[f];if(void 0!==d.chr){var m=w(d.chr);if(null!=m&&m<=n.genomeRef.length){var h=Math.round(n.loc2xpixil(m,(d.startPosition+d.endPosition)/2,t)),y=h-h%t.pixelsPerBinMut;null==p[y]&&(p[y]=[]),p[y].push(d.gene.hugoGeneSymbol+": "+d.proteinChange),0}}}var g=t.yRow(r)+t.rowHeight;if(i.a.each(p,function(n,r){var o=n;if(r){var a=r.length>5?t.rowHeight:t.rowHeight*r.length/5,i=e.rect(o,g-a,t.pixelsPerBinMut,a);i.attr("fill","#0f0"),i.attr("stroke","#0f0"),i.attr("stroke-width",1),i.attr("opacity",.5),i.translate(.5,.5),S(i.node,r.join("</br>"),100,"")}}),null!==a){(b=e.text(12,g-t.rowHeight/2,"MUT").attr({"text-anchor":"center",fill:"black"})).node.setAttribute("id","mutTrack"+a)}else e.text(0,g-t.rowHeight/2,"MUT").attr({"text-anchor":"start"});E(b=e.text(t.xRightText(),g-t.rowHeight/2,o.length).attr({"text-anchor":"start","font-weight":"bold"}),e);if(S(b.node,"Number of mutation events.",null,{my:"top right",at:"bottom left"}),u&&u.label){var b,v=e.rect(t.xGenePanelIcon(),g-t.heigthGenePanelIcon-1,t.wideGenePanelIcon,t.heigthGenePanelIcon,4);v.attr("fill",u.color||"#FFFFFF"),v.attr("fill-opacity",.2),v.attr("stroke-width",0),(b=e.text(t.xGenePanelIconText(),g-t.heigthGenePanelIcon/2-1,u.label).attr({"text-anchor":"center",fill:"black"})).node.setAttribute("data-test","mut-track-genepanel-icon-"+r),S(b.node,"",null,{my:"top right",at:"bottom left"},u.genePanelId,i()(".tooltip-content").find("span"),c)}}function S(e,t,n,r,o,a,l){var u={content:{text:function(){return a||t}},show:{event:"mouseover"},hide:{fixed:!0,delay:100,event:"mouseout"},style:{classes:"qtip-light qtip-rounded"},position:{my:"bottom right",at:"top left",viewport:i()("body")},events:{show:function(){l&&o&&l(o)},hide:function(){l&&l("")}}};i()(e).qtip(u)}function E(e,t){var n=e.getBBox();return t.path("M"+n.x+" "+(n.y+n.height)+"L"+(n.x+n.width)+" "+(n.y+n.height))}function w(e){return 0===e.toLowerCase().indexOf("chr")&&(e=e.substring(3)),"X"!==e&&"x"!==e||(e=23),"Y"!==e&&"y"!==e||(e=24),isNaN(e)||e<1||e>24?null:parseInt(e)}},1069:function(e,t,n){e.exports=n(16)(1034)},1070:function(e){e.exports=[{genomeBuild:"GRCh37",chromosomeSize:[0,249250621,243199373,198022430,191154276,180915260,171115067,159138663,146364022,141213431,135534747,135006516,133851895,115169878,107349540,102531392,90354753,81195210,78077248,59128983,63025520,48129895,51304566,155270560,59373566]},{genomeBuild:"GRCh38",chromosomeSize:[0,248956422,242193529,198295559,190214555,181538259,170805979,159345973,145138636,138394717,133797422,135086622,133275309,114364328,107043718,101991189,90338345,83257441,80373285,58617616,64444167,46709983,50818468,156040895,57227415]},{genomeBuild:"GRCm38",chromosomeSize:[0,195471971,182113224,160039680,156508116,151834684,149736546,145441459,129401213,124595110,130694993,122082543,120129022,120421639,124902244,104043685,98207768,94987271,90702639,61431566,0,0,0,171031299,91744698]}]},1071:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var r,o=n(652),a={process_data:r=function(e,t,n){if(_.find(e,function(e){return void 0!==e[n]}))return o.zip(e,t).map(function(e){return void 0===e[0][n]===e[1][n]?0:e[0][n]/(e[0][n]+e[1][n])})},extract_and_process:function(e,t){var n=e.mutations.data["alt-count"],o=e.mutations.data["ref-count"];return r(n,o,t)},kernelDensityEstimator:function(e,t){return function(n){return t.map(function(t){return[t,o.mean(n,function(n){return e(t-n)})]})}},gaussianKernel:function(e){return function(t){return 1/(e*Math.sqrt(2*Math.PI))*Math.exp(-1*Math.pow(t-0,2)/(2*Math.pow(e,2)))}},calculate_bandwidth:function(e){var t=o.mean(e),n=o.mean(e.map(function(e){return Math.pow(e-t,2)}));return 1.06*Math.pow(n,.5)*Math.pow(e.length,-.2)}},i=function(t,n,r,i,l,u,c){var s=t.div,p={};if(i||(i={}),0===Object.keys(i).length){var f=0;for(var d in n)n.hasOwnProperty(d)&&(i[d]=f,f+=1)}for(var d in l=e.extend(!0,{},l),n)if(n.hasOwnProperty(d)){for(var m=o.rgb(l[d]||"rgb(0,0,0)");m.toString()in p&&(0!==m.r||0!==m.g||0!==m.b);)m=m.darker(.4);var h=m.toString();p[h]=!0,l[d]={stroke:h,fill:h}}var y=0===(r=r||{label_font_size:"11.5px",xticks:3,yticks:8,nolegend:!1}).xticks?13:30;r.margin=r.margin||{};var g=e.extend({top:20,right:30,bottom:30+y/2,left:50},r.margin),b=r.width||200,v=r.height||(500+y)/2-g.top-g.bottom,S=o.scale.linear().domain([-.1,1]).range([0,b]),E=o.svg.axis().scale(S).orient("bottom").ticks(r.xticks),w=a,T={},A={},I={};for(var d in n)n.hasOwnProperty(d)&&(T[d]=Math.max(w.calculate_bandwidth(n[d]),.01),A[d]=w.kernelDensityEstimator(w.gaussianKernel(T[d]),S.ticks(100)),I[d]=A[d](n[d]));var O=o.layout.histogram().frequency(!1).bins(S.ticks(30)),P={};for(var d in n)n.hasOwnProperty(d)&&(P[d]=O(n[d]));var _=[];for(var d in I)I.hasOwnProperty(d)&&(_=_.concat(I[d]));var k=_.map(function(e){return e[1]}),C=[o.min(k),o.max(k)],M=o.scale.linear().domain(C).range([v,0]),D=o.svg.line().x(function(e){return S(e[0])}).y(function(e){return M(e[1])}),x=o.select(s).append("svg").attr("width",b+g.left+(0===r.yticks?0:g.right)+(r.nolegend?0:100)).attr("height",v+g.top+g.bottom).attr("data-test","vaf-plot").append("g").attr("transform","translate("+(0===r.yticks?g.left/2:g.left)+","+g.top+")"),j=x.append("g").attr("transform","translate(0,"+v+")").call(E),R=function(e){return e.attr("fill","none").attr("stroke","#000").attr("shape-rendering","crispEdges")};R(j.selectAll("path")),R(j.selectAll("line")),j.append("text").attr("x",b/2).attr("y",y).attr("font-size",r.label_font_size).style("text-anchor","middle").style("font-style","italic").text("variant allele frequency");var N=[];for(var d in P)P.hasOwnProperty(d)&&(N=N.concat(P[d]));var G,L=N.map(function(e){return e.length}),V=[0,o.max(L)],F=o.svg.axis().scale(M.copy().domain(V)).orient("left").ticks(r.yticks),B=x.append("g").call(F),U=y;U+=0===r.yticks?0:((G=(""+V[1]).split("").length)>=4&&(G+=1.5),7*G/3),B.append("text").attr("transform","rotate(-90)").attr("x",-v/2).attr("y",-U).attr("font-size",r.label_font_size).style("text-anchor","middle").style("font-style","italic").text("mutation count"),R(B.selectAll("path")).attr("display",0===r.yticks?"":"none"),R(B.selectAll("line"));var W=N.map(function(e){return e.y}),z=[o.min(W),o.max(W)],H=M.copy();for(var d in H.domain(z),P)P.hasOwnProperty(d)&&x.selectAll(".bar").data(P[d]).enter().insert("rect").attr("x",function(e){return S(e.x)+1}).attr("y",function(e){return H(e.y)}).attr("class",i[d]+"_viz_hist viz_hist").attr("width",S(P[d][0].dx+P[d][0].x)-S(P[d][0].x)-1).attr("height",function(e){return v-H(e.y)}).attr("fill",l[d].fill).attr("opacity",Object.keys(n).length>1?"0.1":"0.3");for(var d in I)I.hasOwnProperty(d)&&x.append("path").datum(I[d]).attr("d",D).attr("class","curve "+i[d]+"_viz_curve viz_curve").attr("fill","none").attr("stroke",l[d].stroke).attr("stroke-width","1.5px").attr("opacity","0.9").attr("data-legend",function(){return d}).attr("data-legend-pos",function(){return i[d]});if(!r.nolegend&&Object.keys(n).length>1){var K=x.append("g").attr("class","legend").attr("transform","translate("+(b+25)+",0)").style("font-size","13px");o.legend(t,K,13,u,i,c)}return s};o.legend=function(t,n,r,a,i,l){return n.each(function(){var n=o.select(this),u={},c=o.select(n.property("nearestViewportElement")),s=n.attr("data-style-padding")||5,p=n.selectAll(".legend-box").data([!0]),f=n.selectAll(".legend-items").data([!0]);f.enter().append("g").classed("legend-items",!0),c.selectAll("[data-legend]").each(function(){var e=o.select(this);u[e.attr("data-legend")]={pos:e.attr("data-legend-pos")||this.getBBox().y,color:null!=e.attr("data-legend-color")?e.attr("data-legend-color"):"none"!=e.style("fill")?e.style("fill"):e.style("stroke")}}),u=o.entries(u).sort(function(e,t){return e.value.pos-t.value.pos});f.selectAll("text").data(u,function(e){return e.key}).call(function(e){e.enter().append("text")}).call(function(e){e.exit().remove()}).attr("y",function(e,t){return t-.2+.4*t+"em"}).attr("x","2em").text(function(e){var t=e.key;return t.length>10?t.substring(0,4)+"..."+t.slice(-3):t}),f.selectAll("circle").data(u,function(e){return e.key}).call(function(e){e.enter().append("circle")}).call(function(e){e.exit().remove()}).attr("cy",function(e,t){return t-.5+.4*t+"em"}).attr("cx","1.25em").attr("r","0.5em").style("fill",function(e){return e.value.color});for(var d=0,m=Object.keys(u);d<m.length;d++)f.append("text").attr("x","1.65em").attr("y",(d-.5+.4*d)*r).attr("fill","white").attr("font-size","10").attr("dy","0.34em").attr("text-anchor","middle").text(a[u[m[d]].key]).attr("class","sample-icon-text");for(d=0,m=Object.keys(u);d<m.length;d++){var h=u[d].key;if(Object.keys(l).includes(h)){var y=l[h].label,g=l[h].color;f.append("rect").attr("x","-0.75em").attr("y",d-1.06+.4*d+"em").attr("width",function(e){return"1.25em"}).attr("height",function(e){return"1.1em"}).attr("rx",4).attr("ry",4).attr("fill",function(e){return g}).attr("class","genepanel-icon"),f.append("text").attr("x","-0.15em").attr("y",(d-.5+.4*d)*r).attr("fill","white").attr("font-size","10").attr("dy","0.34em").attr("text-anchor","middle").text(y).attr("class","genepanel-icon-text")}}f.selectAll("rect:not(.genepanel-icon)").data(u,function(e){return e.key}).call(function(e){e.enter().append("rect")}).call(function(e){e.exit().remove()}).attr("id",function(e){return e.key+"legend_hover_rect"}).attr("y",function(e,t){return t-1+.4*t-.2+"em"}).attr("x","-1em").attr("width",function(e){return"117px"}).attr("height","1.4em").style("fill",function(e){return e.value.color}).attr("opacity","0").on("mouseover",Object.keys(u).length>1?function(n){e(this).attr("opacity","0.2"),function(t,n,r,o,a){e(t).find(".viz_hist").hide(),e(t).find(".viz_curve").hide(),o&&(e(t).find("."+r[n]+"_viz_hist").show(),e(t).find("."+r[n]+"_viz_hist").attr("opacity","0.5")),a&&e(t).find("."+r[n]+"_viz_curve").show()}(t.div,n.key,i,t.state.show_histogram,t.state.show_curve)}:function(e){}).on("mouseout",function(t){e(this).attr("opacity","0")});for(d=0;d<u.length;d++){var b=u[d].key;b.length>10&&(e("#"+b+"legend_hover_rect").attr("title",b),e("#"+b+"legend_hover_rect").qtip({content:{attr:"title"},style:{classes:"qtip-light qtip-rounded"},position:{my:"center left",at:"center right",viewport:e(window)}}))}f.on("mouseout",Object.keys(u).length>1?function(){var n,r,o;n=t.div,r=t.state.show_histogram,o=t.state.show_curve,r&&(e(n).find(".viz_hist").show(),e(n).find(".viz_hist").attr("opacity","0.1")),o&&e(n).find(".viz_curve").show()}:function(){});var v=f[0][0].getBBox();p.attr("x",v.x-s).attr("y",v.y-s).attr("height",v.height+2*s).attr("width",v.width+2*s)}),n}}).call(this,n(11))},1129:function(e,t,n){e.exports={portalWidth:"patientTable-module__portalWidth__10-JD",framedImage:"patientTable-module__framedImage__95IdD",patientTable:"patientTable-module__patientTable__2vI5g"}},1130:function(e,t,n){},1131:function(e,t,n){e.exports={sampleColorPrimary:"black",sampleColorRecurrence:"orange",sampleColorMetastasis:"red",sampleColorCfdna:"blue",sampleColorXenograft:"pink"}},1132:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAABCCAYAAADwg0AcAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAABgJJREFUeJztnGtsFFUUx1sqQhAD2Igi+E4xRlHRSDTVmKgYNX4iMeonY3xFpRRKAQsq1SKUVqEKviUEWoxAqmAqpWWlFBBLpbZUAYu47+223d3u+707x3Pubqft7uyjwdDp9t7k30d2zsw9v3vuuWfv7E5WllR7Q5WDWoiqR5lQAgoyWFbUMdQLqEmSTCQg3YOqQ4Vk4MBoqAX1WCpIs1FtMujsaEuLmp8IEk23Whl0Ui5qR02VArUoK/Nz0UhVKgVKkcowd7kKWlVe+F3tG9MiH2auUMLExSlBqaVAWZIZfdZkhjaNFwQBxnwjHzp0XvjhDxvMXatLBkqQApVw2l1ZqIRT6ggkAX9kgqjprQHI/8gA2W8miSoJUAkPpnCNjIQw2jnjf9MAMGWfD65dpeWgkoGKRFUQZr3NQaUEZbBxUBwUB8VByU8cFAfFQXFQchYHxUFxUByUnMVBcVAc1NgERUYEphtPkPeejm2TJgP1/Ld9oDQFxf3oUBjA5gmDtj8Ip/V+UPzthWV7LXBFoRomDNlynYL/F+y2sGMHWjAsgMUVBqU5CB06P9Sf8cBStL0O+5Qdc90Xd5ggtpHvLr8A53sDUNPqhAXlBpi4WJ0S1OwSLfOVfHZ4QzCvTJ8aFHXqlMbPTqLvD4jg0gWVqLWj4w9UdMNlbyUGJdX8IQGaurxw0zu6YaClQMU2lSXIBim3WJMU1H0bDMxXak5fGEEZRgbKEN0mTRcUOb16vxUK9ligrN4KR857od89COLEv74ILBzlWFAYTPDaLjMUomMVh+xw/IIXeh0hFqEEq+GsB255dxDWUFBWvAY5+yCe++VqExz4y8NsiEUQfz9aZUwJiny9ZKC67aFhzkxdqoGKRhsEQpFOObxh2HDQxjbzY0HRtBt63unLNVB2wApGPKcQHQQ6nqZwLCiTMyTaTSpQw1Nbe8HsGhwgOlbWoEjkmMoced0fFEBxzgu3lepTgiLdjOeiaUdR4UPbPW0uuCo6jaRAZUev93QMqNe/M8sfFC0G359yidPrrDEAd39oSAtUbrEWvj7uBDtGYhAPa1H5YOZKbRwoiyvE+n3jGh08uaUHdrW6GFi6nicgwMJPeuQPilR12B6xh0iCnb8+PVDTizSwsdHOooOc/tMQgGtWxYOi17ptISaTM8zgECg6fvMvdpizOv5usOxA0d/7TrvZ65SYqWSYty49UBQ92084WW6j6Xf0Hy9cvSIxKANKg2UJRe1BLC1e2mmCOSU6XGnjSwRZgcrBUuCOD/RslKl5sMapPuliS30qUFRGPPSxEdq0fgaY6qNNCjtMK4rPUU6fwFbMV2vM8Ow3fWwgLi+Qrp9kAYqWc1r+r8dQp0ScX2nEgtMjOkSF5KKvehmkWFAEg65NEXAr2j6yyQg/drgZBIqYLiwiF2zsFqMj0aqXrkYVFDlVddgB5Q02VhlbXMOLyd24alHEkZ1UHVVaZ4XKQzaobXezBB6KmrsxmrYecYjRJDtQ9DZkpJU5XZ/qJnLOgoUg5Q7KGZTQqSzISVKZEywqIQg4QaacQxV9eYOd5avsBJX5xYK6F0GRryMCNQtXlWasqDsNftiLEUDlfzJQT3zaA/sxWRNc0m9KH3uPVt3ihPX1NpY75q7Vx9lNXqKG5xAyVe8DtlS5/9Tphm2/OmEd2r5SbYbb35fON8983ivaKc55LgrUnQiGfCWfaWApr6YENQMr4pW1FnGKkMbL7gH5vFlhYzk2JSgpjRdQkuKgOCgOioPioOQrDoqD4qA4KDmLg+KgOCgOSs7ioDgoDipzQG1psrHNfmq0BZsJokY3Ses63eJt+nRBhRMdPGWJCto0kajKpEafh8qvHPlXZXuTRVXJPgvsbLGLITuWG/lQc9IOlY1WuGFN0i9fh6VA/ZxqXk9bpoQvmu3w5THHmBb5MKNIKX6oLYm6pEA9njV+n8eSSMVSoLJR22TQObnoKGpyPKgIrFxUsww6Odo6g8qThjQIKw+1A+WTQYcvtSj10DOz7k8OaTiwu6LAiC49iMqZobKjLmRFnnT0MGqCFI7/AKBNHdZf2IG3AAAAAElFTkSuQmCC"},1133:function(e,t,n){e.exports={portalWidth:"sampleTable-module__portalWidth__2sn4E",framedImage:"sampleTable-module__framedImage__2E0br",sampleTable:"sampleTable-module__sampleTable__37lEE"}},1134:function(e,t,n){},1136:function(e,t,n){e.exports=n(16)(1033)},1138:function(e,t,n){},1140:function(e,t,n){},1141:function(e,t,n){e.exports={portalWidth:"trialMatch-module__portalWidth__3OMBJ",framedImage:"trialMatch-module__framedImage__llM-4",armDiv:"trialMatch-module__armDiv__8Ikbp",criteriaHr:"trialMatch-module__criteriaHr__33xV1",alterationUl:"trialMatch-module__alterationUl__15PAE",genomicSpan:"trialMatch-module__genomicSpan__1MdPT",tooltip:"trialMatch-module__tooltip__3TLty",statusBackground:"trialMatch-module__statusBackground__1izwh",icon:"trialMatch-module__icon__1kFBu",marginLeft:"trialMatch-module__marginLeft__3bEGE",marginRight:"trialMatch-module__marginRight__2Ei8B",matchInfoContainer:"trialMatch-module__matchInfoContainer__2Mbjv",sampleIdsContainer:"trialMatch-module__sampleIdsContainer__nJeC2",genomicInfoContainer:"trialMatch-module__genomicInfoContainer__2rTwv",criteriaContainer:"trialMatch-module__criteriaContainer__10CIJ",firstLeft:"trialMatch-module__firstLeft__3xi9Y",firstRight:"trialMatch-module__firstRight__x9eHB",secondLeft:"trialMatch-module__secondLeft__3fgcR",secondRight:"trialMatch-module__secondRight__Yz5Ho",powered:"trialMatch-module__powered__1pOTQ",statusContainer:"trialMatch-module__statusContainer__1xnON",feedback:"trialMatch-module__feedback__1u4I4",feedbackButton:"trialMatch-module__feedbackButton__2-8zQ"}},1142:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAydJREFUeNrs2F9MUlEYAPBPBFH+iTYs/EfLRJ2rMZuvic2H8sHZew/40LPaSy9t9eBLtdR6qDlXsdbmY7q52VYZulk60GhrOZ8ElykIchVFLlzu7TvGdVkRF7jEC9/27dxxOR+/HeCcew5APvKRj3xkNQqyWbzJ1GrCphfTFE8K04k5gWlddtqpnAERN4RNX+uFFmhvuwjG+jpgYyzYF5dgcuo1bGx6CK4fkdb/+pUgTIv5qaOzi1uwOziGYTiaprlQKMQFg0GOoijO7/dzj0dGOXwfScu/6hWKjcPmfWOD0TT24hkYamsgFov9kSzLQqOxHip0Ovgwv9CtO1U149v87vpbTYnIAzhUVak3WUefgFKhSIjjrzva26Djkpn0u52ooETE0XuuVqstjwbvC8Lx2dV5mXQ3Y//TWQPyODJyxrN1gnEka2uq+TLZAWaC47O5qTE7QDFwJF3uNVJO3D8JwakqDZaBB8MZ4TxeL+yHQhCfxMUBEpy0RGE5d+0GTAWKYY0KpYUjaZudOxw9nLCdogB5nOn6LSjSlMN+OAJDH93HkEJxqy43TL15R8r2izJR/4pTVtTg0sXgBzFARxlwrFNgLC8GlUwiGDdwbxBwhSFr8t2MgYlwLBkxbCOIXPwWOEQqpQWp4HoyXuqS4X5HVspZ0CrkGeMEARF3B3F9yXBHyAgD86se0BRyoNeUZIRLCowvP6/O99wEddWZpDiW+dly+BT3xRMErVwCJ5VFaeNISJPc71XpDVBqaBCMix29zsDYkhsizXpo0Mpg5Kk1ZZwQoOlEU0taOP7eS9siMM634PP5U8YJAeLvrjptHL3tBe/MOLBROi2coIk6crCXM5wg4N6GO2c4IcCJwMrnlHBM+EA0nBCgld7xU5v2aeG42UOcTQxc0nkQNzJh3NB4dl0r3TJVKcjLKhLiokEKtuYmIUr5yFPJFdI368A40olI9+7q1+7IbgBkZTooKJQe4ZjwPuwsO2DbMQ2xUHAcu1wVsiEX/WQBVxVzfPdlluJoypQaiNFhiFBb/NPwQ4QN5/zoI778HTvKQJgtf4qUj3zkKH4IMADm03zZs4fvPwAAAABJRU5ErkJggg=="},1143:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__2aeY-",framedImage:"styles-module__framedImage__NILoq",Tooltip:"styles-module__Tooltip__1Qxp7"}},1144:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3hRmD",framedImage:"styles-module__framedImage__WKn6v",zoomControls:"styles-module__zoomControls__uXkD3",zoomButton:"styles-module__zoomButton__17cGd"}},562:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(4),i=n.n(a),l=n(17),u=n(1017),c=(n(587),n(11)),s=n.n(c),p=n(1071);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=m(t).call(this,e),(n=!o||"object"!==f(o)&&"function"!=typeof o?h(r):o).refHandlers={histogramCheckbox:function(e){n.histogramCheckbox=e},curveCheckbox:function(e){n.curveCheckbox=e},div:function(e){n.div=e}};var a=0===n.props.xticks?13:30,i={label_font_size:n.props.label_font_size,xticks:n.props.xticks,yticks:n.props.yticks,nolegend:n.props.nolegend,margin:{top:n.props.margin_top,left:n.props.margin_left,right:n.props.margin_right,bottom:n.props.margin_bottom},width:n.props.width,height:n.props.height};return void 0===i.margin.bottom&&(i.margin.bottom=30+a/2),void 0===i.height&&void 0!==i.margin.top&&(i.height=(500+a)/2-i.margin.top-i.margin.bottom),n.state={show_histogram:!!n.props.init_show_histogram,show_curve:!!n.props.init_show_curve,options:i},n.toggleShowHistogram=n.toggleShowHistogram.bind(h(n)),n.toggleShowCurve=n.toggleShowCurve.bind(h(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){Object(p.a)(this,this.props.data,this.state.options,this.props.order,this.props.colors,this.props.labels,this.props.genepanel_icon_data)}},{key:"componentDidUpdate",value:function(){s()(this.div).find("svg").remove(),Object(p.a)(this,this.props.data,this.state.options,this.props.order,this.props.colors,this.props.labels,this.props.genepanel_icon_data)}},{key:"shouldComponentUpdate",value:function(e,t){return this.histogramCheckbox&&(t.show_histogram?s()(this.div).find(".viz_hist").show():s()(this.div).find(".viz_hist").hide()),this.curveCheckbox&&(t.show_curve?s()(this.div).find(".viz_curve").show():s()(this.div).find(".viz_curve").hide()),t.show_histogram!==this.state.show_histogram||t.show_curve!==this.state.show_curve||!i.a.isEqual(this.props.data,e.data)}},{key:"toggleShowHistogram",value:function(){var e=!this.state.show_histogram;this.setState({show_histogram:e})}},{key:"toggleShowCurve",value:function(){var e=!this.state.show_curve;this.setState({show_curve:e})}},{key:"render",value:function(){var e=[r.createElement("label",{key:"histogram-toggle",style:{marginRight:10}},r.createElement("input",{ref:this.refHandlers.histogramCheckbox,type:"checkbox",checked:this.state.show_histogram,onChange:this.toggleShowHistogram,style:{marginRight:3}}),"histogram"),r.createElement("label",{key:"curve-toggle"},r.createElement("input",{ref:this.refHandlers.curveCheckbox,type:"checkbox",checked:this.state.show_curve,onChange:this.toggleShowCurve,style:{marginRight:3}}),"density estimation")];return r.createElement("div",{style:{display:"inline"},ref:this.refHandlers.div},this.props.show_controls?e:[],this.props.show_controls?r.createElement("br",null):[])}}])&&d(n.prototype,o),a&&d(n,a),t}();g.defaultProps={data:{},order:{},colors:{},labels:{},width:200,height:void 0,margin_left:50,margin_top:20,margin_right:30,margin_bottom:void 0,xticks:3,yticks:8,label_font_size:"11.5px",nolegend:!1,init_show_histogram:!0,init_show_curve:!0,show_controls:!1};var b=n(3);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,w(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e={data:this.props.data,colors:this.props.colors,order:this.props.order,show_controls:!1,nolegend:!0,width:64,height:64,label_font_size:"6.5px",xticks:0,yticks:0,margin_bottom:15},t={data:this.props.data,colors:this.props.colors,labels:this.props.labels,order:this.props.order,show_controls:!0,nolegend:!1,init_show_histogram:!0,init_show_curve:!0,genepanel_icon_data:this.props.genePanelIconData};return r.createElement(b.c,{placement:this.props.overlayPlacement,trigger:["hover","focus"],overlay:r.createElement(g,t),arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!1,mouseLeaveDelay:b.O?2:.05},r.createElement("div",{className:this.props.cssClass||""},r.createElement(g,e)))}}])&&S(n.prototype,o),a&&S(n,a),t}();A.defaultProps={order:{},colors:{},labels:{},overlayPlacement:"left"};var I=n(2),O=n(572),P="blue",_="P",k={label:"W",color:"#007fff",genePanelId:void 0};function C(e,t){var n=i.a.values(e),r=i.a.values(O.a);if(!e||0===i.a.difference(n,r).length)return{};var o=i()(e).omitBy(function(e){return e in t}).mapValues(function(){return k}).value();return i()(e).pickBy(function(e){return e in t}).forIn(function(e,n){return o[n]=t[e]}),o}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var N=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":R(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},G=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),D(this,x(t).call(this,e))}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=a.reduce(this.props.sampleManager.samples,function(e,t,n){return e[t.id]=n+1,e},{});return r.createElement("div",{style:{display:"flex"}},r.createElement(u.b,{mutations:a.flatten(this.props.mergedMutations),key:Math.random(),sampleManager:this.props.sampleManager,width:this.getTracksWidth(),cnaSegments:this.props.cnaSegments,samples:this.props.samples,mutationGenePanelIconData:this.sampleIdToMutationGenePanelIconData,copyNumberGenePanelIconData:this.sampleIdToCopyNumberGenePanelIconData,onSelectGenePanel:this.props.onSelectGenePanel}),r.createElement(l.If,{condition:this.shouldShowVAFPlot()},r.createElement(A,{data:this.frequencies,order:this.props.sampleManager.sampleIndex,colors:this.props.sampleColors,labels:e,overlayPlacement:"right",cssClass:"vafPlot",genePanelIconData:this.sampleIdToMutationGenePanelIconData})))}},{key:"shouldShowVAFPlot",value:function(){return this.props.mergedMutations.length>0&&this.isFrequencyExist()}},{key:"isFrequencyExist",value:function(){for(var e=0,t=Object.keys(this.frequencies);e<t.length;e++){var n=t[e];if(this.frequencies.hasOwnProperty(n)){var r=!0,o=!1,a=void 0;try{for(var i,l=this.frequencies[n][Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value;return!isNaN(u)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}}return!1}},{key:"getTracksWidth",value:function(){return this.props.containerWidth-(this.shouldShowVAFPlot()?140:40)}},{key:"computeMutationFrequencyBySample",value:function(e){var t,n,r={},o=!0,a=!1,i=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,s=!0,p=!1,f=void 0;try{for(var d,m=c[Symbol.iterator]();!(s=(d=m.next()).done);s=!0){var h=d.value;h.tumorAltCount>=0&&h.tumorRefCount>=0&&(t=h.sampleId,n=h.tumorAltCount/(h.tumorRefCount+h.tumorAltCount),r[t]=r[t]||[],r[t].push(n))}}catch(e){p=!0,f=e}finally{try{s||null==m.return||m.return()}finally{if(p)throw f}}}}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}for(var y=0,g=Object.keys(this.props.sampleOrder);y<g.length;y++){var b=g[y];r[b]=r[b]||[];for(var v=e.length-r[b].length,S=0;S<v;S++)r[b].push(NaN)}return r}},{key:"frequencies",get:function(){return this.computeMutationFrequencyBySample(this.props.mergedMutations)}},{key:"genePanelIds",get:function(){return a.uniq(a.concat(a.values(this.props.sampleIdToMutationGenePanelId),a.values(this.props.sampleIdToCopyNumberGenePanelId)))}},{key:"genePanelIdToIconData",get:function(){return e=this.genePanelIds,t=i.a.uniq(i.a.filter(e,function(e){return void 0!==e})).sort(),n={},i()(t).filter(function(e){return i.a.values(O.a).includes(e)}).each(function(e){var t=Object.assign({},k);t.genePanelId=e,n[e]=t}),i()(t).reject(function(e){return i.a.values(O.a).includes(e)}).each(function(e,t){n[e]={genePanelId:e,label:_+(t+1),color:P}}),n;var e,t,n}},{key:"sampleIdToMutationGenePanelIconData",get:function(){return C(this.props.sampleIdToMutationGenePanelId,this.genePanelIdToIconData)}},{key:"sampleIdToCopyNumberGenePanelIconData",get:function(){return C(this.props.sampleIdToCopyNumberGenePanelId,this.genePanelIdToIconData)}}])&&M(n.prototype,o),c&&M(n,c),t}();N([I.computed],G.prototype,"frequencies",null),N([I.computed],G.prototype,"genePanelIds",null),N([I.computed],G.prototype,"genePanelIdToIconData",null),N([I.computed],G.prototype,"sampleIdToMutationGenePanelIconData",null),N([I.computed],G.prototype,"sampleIdToCopyNumberGenePanelIconData",null);var L=n(736),V=n(575),F=n(1129),B=n.n(F),U=n(603);function W(e,t){var n=Number(e.priority)||0,r=(Number(t.priority)||0)-n;return 0===r?(void 0===e.displayName?"":e.displayName).localeCompare(t.displayName):r}var z=n(8);function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var X=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":J(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},$=function(e){function t(){return K(this,t),Y(this,Q(t).apply(this,arguments))}return q(t,V["b"]),t}(),ee=function(e){function t(){var e;return K(this,t),(e=Y(this,Q(t).apply(this,arguments))).renderGenePanelLinks=function(t){var n=[],o=t.split(",");return o.forEach(function(t,a){if((t=t.trim()).includes("N/A"))n.push(t);else{var i=t.split(" ");n.push(r.createElement("a",{onClick:function(){return e.handleClick(i[0])}},t))}a<o.length-1&&n.push(", ")}),r.createElement("span",null,n)},e}var n,o,a;return q(t,r["Component"]),n=t,(o=[{key:"getDisplayValue",value:function(e){var t;switch(e.attribute){case"Overall Survival (Months)":t=parseInt(e.value,10).toFixed(0);break;default:t=e.value}return t}},{key:"handleClick",value:function(e){this.props.onSelectGenePanel&&this.props.onSelectGenePanel(e)}},{key:"render",value:function(){var e=this,t=this.props.data&&this.props.data.sort(function(e,t){return W(e.clinicalAttribute,t.clinicalAttribute)}).map(function(e){return{attribute:e.clinicalAttribute.displayName||"",value:e.value}});return r.createElement($,{data:t,columns:[{name:"Attribute",render:function(e){return r.createElement("span",null,e.attribute)},download:function(e){return e.attribute},filter:function(e,t,n){return e.attribute.toString().toUpperCase().indexOf(n)>-1},sortBy:function(e){return e.attribute}},{name:"Value",render:function(t){return Object(b.N)(t.value)?r.createElement("a",{href:t.value,target:"_blank"},t.value):"Gene Panel"===t.attribute?e.renderGenePanelLinks(t.value):r.createElement("span",null,e.getDisplayValue(t))},download:function(t){return e.getDisplayValue(t)},filter:function(e,t,n){return e.value.toString().toUpperCase().indexOf(n)>-1}}],showPagination:!1,showColumnVisibility:!1,className:B.a.patientTable,initialItemsPerPage:U.b,showFilter:!1!==this.props.showFilter,showCopyDownload:!1!==this.props.showCopyDownload})}}])&&H(n.prototype,o),a&&H(n,a),t}();X([z.default],ee.prototype,"handleClick",null);n(1130);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ie=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),re(this,oe(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(l.If,{condition:!0===this.props.tooltipEnabled},r.createElement(l.Then,null,this.contentWithTooltip()),r.createElement(l.Else,null,this.mainContent()))}},{key:"tooltipContent",value:function(){var e=this.props,t=e.sample,n=e.extraTooltipText;return r.createElement("div",{style:{maxHeight:400,maxWidth:600,overflow:"auto"}},r.createElement("h5",{style:{marginBottom:1}},r.createElement("span",{className:"sample-inline-tooltip-children"},this.props.children),t.id),n&&r.createElement("h5",null,n),!this.props.hideClinicalTable&&r.createElement(ee,{showFilter:!1,showCopyDownload:!1,showTitleBar:!1,data:t.clinicalData,onSelectGenePanel:this.props.onSelectGenePanel}))}},{key:"mainContent",value:function(){var e=this.props.additionalContent,t=r.createElement("svg",{height:"12",width:"12"},this.props.children);return e&&(t=r.createElement("span",null,t,e)),t}},{key:"contentWithTooltip",value:function(){return r.createElement(b.c,{placement:"bottomLeft",trigger:["hover","focus"],overlay:this.tooltipContent(),arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!1,onPopupAlign:b.Q,disabled:this.props.disableTooltip},this.mainContent())}}])&&ne(n.prototype,o),a&&ne(n,a),t}();ie.defaultProps={tooltipEnabled:!0,hideClinicalInfoTable:!1,disableTooltip:!1};n(879);function le(e,t){if(!e)return null;for(var n=0;n<t.length;n+=1){var r=e[t[n]];if(null!=r)return r}return null}function ue(e){return function(e){var t,n=c.extend({},e),r=function(e,t){var n,r,o,a=null;for(o=0;o<t.length&&(null==(n=e[t[o]])||((r=n.toLowerCase()).indexOf("metasta")>=0?a="Metastasis":r.indexOf("recurr")>=0?a="Recurrence":r.indexOf("progr")>=0?a="Progressed":r.indexOf("xeno")>=0||r.indexOf("pdx")>=0?a="Xenograft":r.indexOf("cfdna")>=0?a="cfDNA":r.indexOf("prim")>=0&&(a="Primary"),null==a));o+=1);return a}(e,["SAMPLE_CLASS","SAMPLE_TYPE","TUMOR_TISSUE_SITE","TUMOR_TYPE"]);return null!==r&&(n.DERIVED_NORMALIZED_CASE_TYPE=r,null!==(t="Metastasis"===n.DERIVED_NORMALIZED_CASE_TYPE?le(e,["METASTATIC_SITE","TUMOR_SITE"]):"Primary"===n.DERIVED_NORMALIZED_CASE_TYPE?le(e,["PRIMARY_SITE","TUMOR_SITE"]):le(e,["TUMOR_SITE"]))&&(n.DERIVED_SAMPLE_LOCATION=t)),n}(function(e){for(var t=c.extend({},e),n=["not applicable","not available","pending","discrepancy","completed","","null","unknown","na","n/a","[unkown]","[not submitted]","[not evaluated]","[not applicable]","[not available]","[undefined]"],r=Object.keys(e),o=0;o<r.length;o+=1){var a=void 0,i=r[o];if(a=e[i],n.indexOf(a.toLowerCase())>-1)delete t[i];else switch(i){case"OS_MONTHS":case"DFS_MONTHS":case"AGE":c.isNumeric(a)&&(a=Math.floor(a)),t[i]=a;break;case"OS_STATUS":case"DFS_STATUS":a.match(/^(1|0):/)&&(a=a.replace(/^(1|0):/,""),t[i]=a)}}return t}(e))}function ce(e,t){return Object.keys(e).map(function(n){var o=e[n];return r.createElement("span",{is:!0,class:"clinical-attribute","attr-id":n,"attr-value":o,study:t},o)})}var se=n(1131),pe=n.n(se),fe=n(672),de=n.n(fe);function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t,n){return t&&ye(e.prototype,t),n&&ye(e,n),e}function be(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?Se(e):t}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Te=function(e){function t(e){var n;return he(this,t),(n=be(this,ve(t).call(this,e))).render=n.render.bind(Se(n)),n}return Ee(t,r["Component"]),ge(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.color,o=e.x,a=e.y;return r.createElement("g",null,r.createElement("circle",{cx:o,cy:a,fill:n,r:this.props.r}),r.createElement("text",{x:o,y:a+5,dy:this.props.textDy,fill:"white",fontSize:10,textAnchor:"middle"},t))}}]),t}();Te.defaultProps={r:10};var Ae=function(e){function t(e){var n;return he(this,t),(n=be(this,ve(t).call(this,e))).render=n.render.bind(Se(n)),n}return Ee(t,r["Component"]),ge(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.color,o=e.fillOpacity;return r.createElement("svg",{width:"12",height:"12",className:"case-label-header","data-test":"sample-icon"},r.createElement("g",{transform:"translate(6,6)"},r.createElement("circle",{r:"6",fill:n,fillOpacity:o})),r.createElement("g",{transform:"translate(6,5.5)"},r.createElement("text",{y:"4",textAnchor:"middle",fontSize:"10",fill:"white",style:{cursor:"default"}},t)))}}]),t}();function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Oe=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.samples=t,this.sampleIndex={},this.sampleLabels={},this.clinicalDataLegacyCleanAndDerived={},this.sampleColors={},this.commonClinicalDataLegacyCleanAndDerived={},t.forEach(function(e,t){r.clinicalDataLegacyCleanAndDerived[e.id]=ue(a.fromPairs(e.clinicalData.map(function(e){return[e.clinicalAttributeId,e.value]})));var n="black";"Primary"===r.clinicalDataLegacyCleanAndDerived[e.id].DERIVED_NORMALIZED_CASE_TYPE?n=pe.a.sampleColorPrimary:"Recurrence"===r.clinicalDataLegacyCleanAndDerived[e.id].DERIVED_NORMALIZED_CASE_TYPE||"Progressed"===r.clinicalDataLegacyCleanAndDerived[e.id].DERIVED_NORMALIZED_CASE_TYPE?n=pe.a.sampleColorRecurrence:"Metastasis"===r.clinicalDataLegacyCleanAndDerived[e.id].DERIVED_NORMALIZED_CASE_TYPE?n=pe.a.sampleColorMetastasis:"cfDNA"===r.clinicalDataLegacyCleanAndDerived[e.id].DERIVED_NORMALIZED_CASE_TYPE?n=pe.a.sampleColorCfdna:"Xenograft"===r.clinicalDataLegacyCleanAndDerived[e.id].DERIVED_NORMALIZED_CASE_TYPE&&(n=pe.a.sampleColorXenograft),r.sampleColors[e.id]=n}),["CANCER_TYPE","CANCER_TYPE_DETAILED"].forEach(function(n){e.isSameClinicalAttributeInAllSamples(t,n)&&(r.commonClinicalDataLegacyCleanAndDerived[n]=r.clinicalDataLegacyCleanAndDerived[t[0].id][n],t.forEach(function(e){delete r.clinicalDataLegacyCleanAndDerived[e.id][n]}))}),this.samples=function(e,t,n){var r=[];r=r.concat(e.map(function(e){return e.id})).sort(de.a);var o={};n&&(o=n.filter(function(e){return"SPECIMEN"===e.eventType||"SAMPLE_ACQUISITION"}).reduce(function(e,t){var n=a.find(t.attributes,function(e){return("SAMPLE_ID"===e.key||"SpecimenReferenceNumber"===e.key||"SPECIMEN_REFERENCE_NUMBER"===e.key)&&-1!==r.indexOf(e.value)});return n&&(e[n.value]=t.startNumberOfDaysSinceDiagnosis),e},{}));for(var i=["primary","metastasis","cfdna"],l=[],u=0;u<e.length;u++){var c=e[u].id,s=o[c],p=t[c].DERIVED_NORMALIZED_CASE_TYPE,f=p?i.indexOf(p.toLowerCase()):-1;-1===f&&(f=i.length);var d=r.indexOf(c);l=l.concat({id:c,sampleTypeIndex:f,naturalSortIndex:d,eventOrdering:s})}l=a.orderBy(l,["eventOrdering","sampleTypeIndex","naturalSortIndex"],["asc","asc","asc"]);var m=a.fromPairs(l.map(function(e,t){return[e.id,t]}));return a.sortBy(e,function(e){return m[e.id]})}(t,this.clinicalDataLegacyCleanAndDerived,n),this.samples.forEach(function(e,t){r.sampleIndex[e.id]=t,r.sampleLabels[e.id]=String(t+1)}),this.sampleOrder=a.sortBy(Object.keys(this.sampleIndex),function(e){return r.sampleIndex[e]})}var t,n,o;return t=e,o=[{key:"isSameClinicalAttributeInAllSamples",value:function(e,t){var n=a.uniq(e.map(function(e){var n=e.clinicalData.find(function(e){return e.clinicalAttributeId===t});return n?n.value:n}));return 1===n.length&&n[0]}},{key:"getClinicalAttributeInSample",value:function(e,t){return a.find(e.clinicalData,function(e){return e.clinicalAttributeId===t})}}],(n=[{key:"getComponentForSample",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,u=a.find(this.samples,function(t){return t.id===e});return u&&r.createElement(ie,{sample:u,extraTooltipText:n,additionalContent:o,onSelectGenePanel:i,disableTooltip:l},r.createElement(Ae,{label:(this.sampleIndex[u.id]+1).toString(),fillOpacity:t,color:this.sampleColors[u.id]}))}},{key:"getColorForSample",value:function(e){return this.sampleColors[e]}},{key:"getSampleIdsInOrder",value:function(){return this.samples.map(function(e){return e.id})}},{key:"getComponentsForSamples",value:function(){var e=this;this.samples.map(function(t){return e.getComponentForSample(t.id)})}},{key:"getSampleLabel",value:function(e){return e in this.sampleLabels?this.sampleLabels[e]:""}}])&&Ie(t.prototype,n),o&&Ie(t,o),e}();function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ke(e,t){return!t||"object"!==Pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var De=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ke(this,Ce(t).apply(this,arguments))}var o,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(t,r["Component"]),o=t,(i=[{key:"render",value:function(){return r.createElement("div",null,this.props.patient&&this.getOverlayTriggerPatient(this.props.patient,this.props.studyId,this.props.sampleManager),this.getDarwinUrl(this.props.darwinUrl))}},{key:"getDarwinUrl",value:function(e){if(null!=e&&""!==e){var t=n(1132);return r.createElement("a",{target:"_blank",href:e},r.createElement("img",{style:{paddingLeft:"5px",height:"21px",width:"29px"},src:t}))}return null}},{key:"getPopoverPatient",value:function(e){return e&&r.createElement("div",{key:e.id,style:{maxHeight:400,maxWidth:600,overflow:"auto"}},r.createElement("h5",null,e.id),r.createElement(ee,{showFilter:!1,showCopyDownload:!1,showTitleBar:!1,data:e.clinicalData}))}},{key:"getOverlayTriggerPatient",value:function(e,t,n){var o,i=this,l=Object(a.fromPairs)(e.clinicalData.map(function(e){return[e.clinicalAttributeId,e.value]}));return n&&Object.keys(n.commonClinicalDataLegacyCleanAndDerived).forEach(function(e){l[e]=n.commonClinicalDataLegacyCleanAndDerived[e]}),e&&r.createElement(b.c,{placement:"bottomLeft",trigger:["hover","focus"],overlay:this.getPopoverPatient(e),arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!0,onPopupAlign:b.Q},r.createElement("span",{className:"clinical-spans",id:"patient-attributes"},r.createElement("a",{href:"javascript:void(0)",onClick:function(){return i.props.handlePatientClick(e.id)}},e.id),(o=t,ce(ue(l),o))))}}])&&_e(o.prototype,i),l&&_e(o,l),t}(),xe=(n(704),5),je="There are not enough mutations to call mutational signatures for this case.",Re=15,Ne="This case has a low number of mutations, signatures are highly uncertain.";function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ve(e,t){return!t||"object"!==Ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ue=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ve(this,Fe(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(b.c,{placement:"bottomLeft",trigger:["hover","focus"],overlay:this.tooltipContent(this.props.data,this.props.metadata,this.props.uniqueSampleKey),destroyTooltipOnHide:!1,onPopupAlign:b.Q},r.createElement("span",{style:{paddingLeft:2}},r.createElement("a",null,"(Significant Mutational Signatures)")))}},{key:"tooltipContent",value:function(e,t,n){var o=function(e,t,n){var r=i()(e).filter(["uniqueSampleKey",n]).value(),o={numberOfMutationsForSample:0,confidenceStatement:"",significantSignatures:{}},a=!0,l=!1,u=void 0;try{for(var c,s=r[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var p=c.value;if(o.numberOfMutationsForSample=p.numberOfMutationsForSample,p.confidence>.85){o.significantSignatures[p.mutationalSignatureId]=p.value,o.numberOfMutationsForSample<=xe?o.confidenceStatement+=je:o.numberOfMutationsForSample<=Re&&(o.confidenceStatement+=Ne);var f=!0,d=!1,m=void 0;try{for(var h,y=t[Symbol.iterator]();!(f=(h=y.next()).done);f=!0){var g=h.value;p.mutationalSignatureId===g.mutationalSignatureId&&(o.confidenceStatement+=" "+g.confidenceStatement)}}catch(e){d=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(d)throw m}}}}}catch(e){l=!0,u=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw u}}return i.a.isEmpty(o.significantSignatures)&&(o.confidenceStatement+="No signatures confidently detected."),o.confidenceStatement=o.confidenceStatement.trim(),o}(e,t,n),a=!0;return i.a.isEmpty(o.significantSignatures)&&(a=!1),r.createElement("div",{style:{maxWidth:250}},r.createElement("span",{className:"small"},o.confidenceStatement),r.createElement("hr",{style:{marginTop:10,marginBottom:10}}),a&&r.createElement("table",null,r.createElement("th",null,"Significant Mutational Signatures"),r.createElement("th",null,"Exposure"),Object.keys(o.significantSignatures).map(function(e){return r.createElement("tr",null,r.createElement("td",{style:{paddingTop:3}},e),r.createElement("td",{style:{paddingTop:3}},(t=o.significantSignatures[e].toString(),n=Math.round(100*parseFloat(t)),r.createElement("div",{className:"progress",style:{position:"relative",width:100,marginBottom:0}},r.createElement("div",{"data-test":"progress-bar",className:"progress-bar ".concat("progress-bar-info"),role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,style:Object.assign({backgroundColor:"darkgray"},{width:"".concat(n,"%")})}),r.createElement("div",{style:{position:"absolute",textShadow:"-1px 0 white, 0 1px white, 1px 0 white, 0 -1px white",width:100,marginTop:2,textAlign:"center"}},n,"%")))));var t,n})))}}])&&Le(n.prototype,o),a&&Le(n,a),t}(),We=n(178),ze=n(103),He=n(66),Ke=n(571);function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){return!t||"object"!==Ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Je=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return Qe(this,(n=qe(t)).call.apply(n,[this,function(e){return e.sampleId+","+e.entrezGeneId},function(e){return e.sampleId+","+e.entrezGeneId},e].concat(o)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}(t,Ke["a"]),t}();function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var nt=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}u((r=r.apply(e,t||[])).next())})};function rt(e,t){return nt(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r,o,i,l,u,c,s,p;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(n.prev=0,r={},o=!0,i=!1,l=void 0,n.prev=5,u=e[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)s=c.value,r[s.sampleId]=r[s.sampleId]||[],r[s.sampleId].push(s.entrezGeneId);n.next=13;break;case 9:n.prev=9,n.t0=n.catch(5),i=!0,l=n.t0;case 13:n.prev=13,n.prev=14,o||null==u.return||u.return();case 16:if(n.prev=16,!i){n.next=19;break}throw l;case 19:return n.finish(16);case 20:return n.finish(13);case 21:return n.next=23,Promise.all(Object.keys(r).map(function(e){return null===t?Promise.reject("No molecular profile id given."):ze.a.fetchMrnaPercentileUsingPOST({molecularProfileId:t,sampleId:e,entrezGeneIds:r[e]})}));case 23:return p=n.sent,n.abrupt("return",a.flatten(p));case 27:throw n.prev=27,n.t1=n.catch(0),n.t1;case 30:case"end":return n.stop()}},n,null,[[0,27],[5,9,13,21],[14,,16,20]])}))}var ot=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$e(this,et(t).call(this,rt,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}(t,Je),t}(),at=n(14),it=n.n(at),lt=n(638),ut=n(15),ct=n(679),st=n(634),pt=n(635),ft=n(33),dt=n(102);function mt(e){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e,t){return!t||"object"!==mt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gt(e,t){return(gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bt(e){return e.keyword?e.entrezGeneId+"~"+e.keyword:e.entrezGeneId+""}function vt(e,t){return t?e.length>0?ze.a.fetchVariantCountsUsingPOST({molecularProfileId:t,variantCountIdentifiers:e}):Promise.resolve([]):Promise.reject("No mutation molecular profile id given")}var St=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ht(this,yt(t).call(this,bt,bt,vt,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gt(e,t)}(t,Ke["a"]),t}();function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(e,t){return!t||"object"!==Et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tt(e){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function At(e,t){return(At=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function It(e){return e.entrezGeneId+"~"+e.alteration}function Ot(e,t){return t?e.length?We.a.fetchCopyNumberCountsUsingPOST({molecularProfileId:t,copyNumberCountIdentifiers:e}):Promise.resolve([]):Promise.reject("No discrete CNA molecular profile id given")}var Pt=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wt(this,Tt(t).call(this,It,It,Ot,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&At(e,t)}(t,Ke["a"]),t}(),_t=n(713),kt=n(637),Ct=n(6);function Mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dt(e,t,n){var r={};if(2===e[0].alteration)for(var o in n[t])o===dt.d.AMPLIFICATION&&(r=Mt({},t,n[t][o]));else if(-2===e[0].alteration)for(var a in n[t])a===dt.d.DELETION&&(r=Mt({},t,n[t][a]));return r}function xt(e,t,n){var r=Object(O.d)(t,n);return Object(dt.I)(e,r)}function jt(e){if(e.result&&e.result.length>0){var t=new Set([]);e.result.forEach(function(e){t.add(e.gene.entrezGeneId)});var n=Array.from(t);return Object(dt.O)(n)}return Promise.resolve({})}var Rt=n(680),Nt=n(636),Gt=n(237),Lt=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}u((r=r.apply(e,t||[])).next())})};function Vt(e){return Lt(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(ut.a)("api-legacy/proxy/matchminer/api"),t.abrupt("return",at.post(n+"/trials").set("Content-Type","application/json").send(e).then(function(e){return JSON.parse(e.text).map(function(e){return{id:e.nct_id+"+"+e.protocol_no,nctId:e.nct_id,protocolNo:e.protocol_no,principalInvestigator:e.principal_investigator,phase:e.phase,shortTitle:e.short_title,status:e.status,treatmentList:e.treatment_list}})}));case 2:case"end":return t.stop()}},t)}))}function Ft(e,t){t=function(e){var t=["Control Arm","Placebo Arm"],n=[];return a.forEach(e,function(e){e.armType&&t.includes(e.armType)||n.push(e)}),n}(t);var n=a.groupBy(t,function(e){return e.id}),r=a.map(n,function(t,n){var r,o,i=a.find(e,function(e){return e.id===n}),l={id:i.id,nctId:i.nctId,principalInvestigator:i.principalInvestigator,protocolNo:i.protocolNo,phase:i.phase,shortTitle:i.shortTitle,status:i.status,matches:[],priority:0};return l.matches=function(e,t){var n=a.groupBy(e,function(e){return e.armDescription});return a.map(n,function(e,n){var r={armDescription:n,drugs:[],matches:[],sampleIds:a.uniq(e.map(function(e){return e.sampleId})).sort()};return a.isUndefined(t.treatmentList.step[0].arm)||(r.drugs=function(e,t){var n=[];if(""!==e){var r=a.find(t,function(t){return t.arm_description===e});a.isUndefined(r.drugs)||(n=r.drugs.map(function(e){return e.map(function(e){return e.name})}))}return n}(n,t.treatmentList.step[0].arm)),r.matches=function(e){var t=a.groupBy(e,function(e){return e.trialAgeNumerical}),n=a.map(t,function(e,n){var r=a.uniq(a.map(e,function(e){return e.trialOncotreePrimaryDiagnosis})),o=[],i=[];a.map(r,function(e){a.isUndefined(e)||(e.includes("!")?i.push(e.replace("!","")):o.push(e))});var l,u,c,s={trialAgeNumerical:[n],trialOncotreePrimaryDiagnosis:{positive:o,negative:i}},p=a.filter(t[n],function(e){if(!a.isUndefined(e.genomicAlteration)&&""!==e.genomicAlteration)return!e.genomicAlteration.includes("!")}),f=a.filter(t[n],function(e){if(!a.isUndefined(e.genomicAlteration)&&""!==e.genomicAlteration)return e.genomicAlteration.includes("!")});return p.length>0&&(s.matches=(l=p,u=a.groupBy(l,function(e){return e.matchType}),c={MUTATION:[],CNA:[],MSI:[],WILDTYPE:[]},a.forEach(u,function(e,t){if("MUTATION"===t){var n=a.groupBy(e,function(e){return e.trueHugoSymbol});a.forEach(n,function(e){var t={genomicAlteration:a.uniq(e.map(function(e){return e.genomicAlteration})),patientGenomic:{trueHugoSymbol:e[0].trueHugoSymbol,trueProteinChange:a.uniq(e.map(function(e){return e.trueProteinChange})).sort()}};c.MUTATION.push(t)})}else{var r={genomicAlteration:a.uniq(e.map(function(e){return e.genomicAlteration}))};c[t].push(r)}}),c)),f.length>0&&(s.notMatches=function(e){var t=a.groupBy(e,function(e){return e.matchType}),n={MUTATION:[],CNA:[],MSI:[],WILDTYPE:[]};return a.forEach(t,function(e,t){var r={genomicAlteration:a.uniq(e.map(function(e){return e.genomicAlteration}))};n[t].push(r)}),n}(f)),s});if(n.length>1)return r=n,o=[],i=a.groupBy(r,function(e){return e.trialOncotreePrimaryDiagnosis}),a.forEach(i,function(e){a.forEach(e,function(t,n){0!==n&&(e[0].trialAgeNumerical=e[0].trialAgeNumerical.concat(t.trialAgeNumerical))}),o.push(e[0])}),o;var r,o,i;return n}(e),r})}(t,i),l.priority=(r=l.matches,o=0,a.forEach(r,function(e){a.forEach(e.matches,function(e){o+=function(e){var t=0,n=0;return a.isUndefined(e.matches)||(t=Bt(e.matches)),a.isUndefined(e.notMatches)||(n=Bt(e.notMatches)),n>0?0===t?2:1:0}(e)})}),o),l});return a.sortBy(r,function(e){return e.priority})}function Bt(e){return a.sum([e.MUTATION.length,e.CNA.length,e.MSI.length,e.WILDTYPE.length])}var Ut=n(56),Wt=n(7);function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ht(e,t){return!t||"object"!==Qt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kt(e){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yt(e,t){return(Yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qt(e){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var qt,Zt=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Qt(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};!function(e){e.ANY_SAMPLE="anySample",e.ALL_SAMPLES="allSamples"}(qt||(qt={}));var Jt=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ht(this,Kt(t).call(this,e))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yt(e,t)}(t,o.a.Component),n=t,(r=[{key:"handleOptionChange",value:function(e){if(this.props.onOptionChanged){var t=e.target;this.props.onOptionChanged(t.value)}}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,"Different gene panels were used for the samples."),o.a.createElement("div",null,"Filter mutations for:"),o.a.createElement(Ut.Radio,{value:qt.ANY_SAMPLE,checked:this.props.currentSelection===qt.ANY_SAMPLE,onChange:function(t){return e.handleOptionChange(t)}},"Genes profiled in any sample"),o.a.createElement(Ut.Radio,{value:qt.ALL_SAMPLES,checked:this.props.currentSelection===qt.ALL_SAMPLES,onChange:function(t){return e.handleOptionChange(t)}},"Genes profiled in all samples"))}}])&&zt(n.prototype,r),a&&zt(n,a),t}(),Xt=Jt=Zt([Wt.observer],Jt),$t=n(573);function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nn(e,t){return!t||"object"!==en(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rn(e){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function on(e,t){return(on=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var an=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),nn(this,rn(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&on(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){return o.a.createElement(ie,{sample:this.props.sample,extraTooltipText:"This gene was not profiled for this sample (absent from gene panel). It is unknown whether it is mutated.",onSelectGenePanel:this.props.onSelectGenePanel,disableTooltip:this.props.disableTooltip},o.a.createElement("svg",{width:"12",height:"12","data-test":"not-profiled-icon"},o.a.createElement("g",{transform:"translate(0,5)"},o.a.createElement("rect",{width:"12",height:"2.5",rx:"1.25",ry:"1.25",fill:"#cccccc",fillOpacity:1}))))}}])&&tn(n.prototype,r),a&&tn(n,a),t}();function ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var un=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(t,n,o,a,l,u){if(!n)return r.createElement("span",null);var c=n.samples,s=i.a.map(c,function(e){return e.id}),p=t[0].entrezGeneId,f=e.getPresentSamples(t),d=e.getProfiledSamplesForGene(p,s,o,a),m="This gene was not profiled for this sample (absent from gene panel)",h=c.map(function(e){var t=e.id in f,o=e.id in d&&d[e.id],a="";return t?(f[e.id]||(a="Mutation has supporting reads, but wasn't called. "),o||(a="".concat(a).concat(m))):o||(a="".concat(m,". It is unknown whether it is mutated.")),r.createElement("li",{className:o&&!t?"invisible":""},t?n.getComponentForSample(e.id,f[e.id]?1:.1,a,null,l,u):r.createElement(ie,{sample:e,extraTooltipText:a,onSelectGenePanel:l,disableTooltip:u},r.createElement(an,{sample:e,onSelectGenePanel:l,disableTooltip:u})))});return r.createElement("div",{style:{position:"relative"},"data-test":"samples-cell"},r.createElement("ul",{style:{marginBottom:0},className:"list-inline list-unstyled"},h))}},{key:"getSortValue",value:function(t,n){if(n){var r=e.getPresentSamples(t),o=[];o.push(Object.keys(r).filter(function(e){return r[e]}).length);var a=!0,i=!1,l=void 0;try{for(var u,c=n.getSampleIdsInOrder()[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var s=u.value;o.push(+!!r[s])}}catch(e){i=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(i)throw l}}return o}return[]}},{key:"getPresentSamples",value:function(e){return e.reduce(function(e,t,n){return t.molecularProfileId&&Object($t.o)(t.molecularProfileId)?t.tumorAltCount&&t.tumorAltCount>0&&(e[t.sampleId]=!1):e[t.sampleId]=!0,e},{})}},{key:"getProfiledSamplesForGene",value:function(e,t,n,r){return t.reduce(function(t,o,a){var i=n[o],l=Object(O.eb)(i),u=!l&&!!i&&i in r&&r[i].includes(e);return t[o]=l||u,t},{})}},{key:"getSample",value:function(e){var t=[];return e&&e.forEach(function(e){t.push(e.sampleId)}),1==t.length?t[0]:t}}],(n=null)&&ln(t.prototype,n),o&&ln(t,o),e}(),cn=n(585);function sn(e){if(e&&"serverConfig"in e){var t=e.serverConfig,n="skin_patientview_filter_genes_profiled_all_samples";if(t&&n in t&&t[n])return qt.ALL_SAMPLES}return qt.ANY_SAMPLE}function pn(e,t,n,r){return i.a.some(t,function(t){var o=un.getProfiledSamplesForGene(t,e,n,r);return i.a.values(o).includes(!1)})}var fn=n(593),dn=n(22);function mn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yn(e){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var gn=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":yn(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},bn=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}u((r=r.apply(e,t||[])).next())})};function vn(e){return bn(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==/TCGA/.test(e)){t.next=4;break}return t.abrupt("return",!1);case 4:return t.next=6,it.a.get(Object(ut.k)(e));case 6:return n=t.sent,t.abrupt("return",n.body&&n.body.total_count&&n.body.total_count>0);case 8:case"end":return t.stop()}},t)}))}function Sn(e,t,n,r){return a.filter(e,function(e){var o=e[0].gene.entrezGeneId,i=un.getProfiledSamplesForGene(o,t,n,r);return a(i).values().filter(function(e){return e}).value().length===t.length})}var En=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.appStore=t,this.activeTabId="",this._patientId="",this.urlValidationError=null,this.ajaxErrors=[],this.studyId="",this._sampleId="",this.openResourceTabMap=I.observable.map(),this.mutationTableGeneFilterOption=sn(Object(b.B)().frontendConfig),this.copyNumberTableGeneFilterOption=sn(Object(b.B)().frontendConfig),this.mutationMolecularProfile=Object(b.S)({await:function(){return[n.molecularProfilesInStudy]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(O.J)(this.molecularProfilesInStudy,this.studyId));case 1:case"end":return e.stop()}},e,this)}))}}),this.mutationMolecularProfileId=Object(b.S)({await:function(){return[n.molecularProfilesInStudy]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=Object(O.J)(this.molecularProfilesInStudy,this.studyId))){e.next=5;break}return e.abrupt("return",t.molecularProfileId);case 5:return e.abrupt("return",void 0);case 6:case"end":return e.stop()}},e,this)}))}}),this.uncalledMutationMolecularProfileId=Object(b.S)({await:function(){return[n.molecularProfilesInStudy]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(O.L)(this.molecularProfilesInStudy,this.studyId));case 1:case"end":return e.stop()}},e,this)}))}}),this._patientIdsInCohort=[],this.myCancerGenomeData=Object(dt.Q)(),this.mutationalSignatureData=Object(b.S)({invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(O.v)());case 1:case"end":return e.stop()}},e)}))}}),this.mutationalSignatureMetaData=Object(b.S)({invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(O.w)());case 1:case"end":return e.stop()}},e)}))}}),this.hasMutationalSignatureData=Object(b.S)({invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}},e)}))},default:!1}),this.derivedPatientId=Object(b.S)({await:function(){return[n.samples]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,r=void 0,e.prev=3,o=this.samples.result[Symbol.iterator]();case 5:if(t=(a=o.next()).done){e.next=11;break}return i=a.value,e.abrupt("return",i.patientId);case 8:t=!0,e.next=5;break;case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),n=!0,r=e.t0;case 17:e.prev=17,e.prev=18,t||null==o.return||o.return();case 20:if(e.prev=20,!n){e.next=23;break}throw r;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return e.abrupt("return","");case 26:case"end":return e.stop()}},e,this,[[3,13,17,25],[18,,20,24]])}))},default:""}),this.clinicalDataPatient=Object(b.S)({await:function(){return"patient"===n.pageMode?[]:[n.derivedPatientId]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(O.g)(this.studyId,this.patientId));case 1:case"end":return e.stop()}},e,this)}))},default:[]}),this.samples=Object(b.S)({invoke:function(){return Object(O.C)(n.studyId,n._patientId,n.sampleId)},onError:function(e){n.appStore.siteErrors.push({errorObj:e,dismissed:!1,title:"Samples / Patients not valid"})}},[]),this.allSamplesForPatient=Object(b.S)({await:function(){return[n.derivedPatientId]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.a.getAllSamplesOfPatientInStudyUsingGET({studyId:this.studyId,patientId:this.derivedPatientId.result,projection:"DETAILED"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))},default:[]}),this.samplesWithoutCancerTypeClinicalData=Object(b.S)({await:function(){return[n.samples,n.clinicalDataForSamples]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(O.K)(this.samples,this.clinicalDataForSamples));case 1:case"end":return e.stop()}},e,this)}))}},[]),this.studiesForSamplesWithoutCancerTypeClinicalData=Object(b.S)({await:function(){return[n.samplesWithoutCancerTypeClinicalData]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(O.D)(this.samplesWithoutCancerTypeClinicalData));case 1:case"end":return e.stop()}},e,this)}))}},[]),this.studies=Object(b.S)({invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.a.getStudyUsingGET({studyId:this.studyId});case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}},e,this)}))}},[]),this.studyIdToStudy=Object(b.S)({await:function(){return[n.studies]},invoke:function(){return Promise.resolve(a.keyBy(n.studies.result,function(e){return e.studyId}))}},{}),this.cnaSegments=Object(b.S)({await:function(){return[n.samples]},invoke:function(){return Object(O.k)(n.studyId,n.sampleIds)}},[]),this.resourceDefinitions=Object(b.S)({invoke:function(){return We.a.getAllResourceDefinitionsInStudyUsingGET({studyId:n.studyId})},onResult:function(e){if(e){var t=!0,r=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var l=a.value;l.openByDefault&&n.setResourceTabOpen(l.resourceId,!0)}}catch(e){r=!0,o=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw o}}}}}),this.studyResourceData=Object(b.S)({await:function(){return[n.resourceDefinitions]},invoke:function(){var e=[],t=n.resourceDefinitions.result.filter(function(e){return"STUDY"===e.resourceType}),r=[],o=!0,a=!1,i=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;r.push(We.a.getAllStudyResourceDataInStudyUsingGET({studyId:n.studyId,resourceId:c.resourceId,projection:"DETAILED"}).then(function(t){return e.push.apply(e,mn(t))}))}}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}return Promise.all(r).then(function(){return e})}}),this.sampleResourceData=Object(b.S)({await:function(){return[n.resourceDefinitions,n.samples]},invoke:function(){var e=n.resourceDefinitions.result.filter(function(e){return"SAMPLE"===e.resourceType});if(!e.length)return Promise.resolve({});var t=n.samples.result,r={},o=[],a=!0,i=!1,l=void 0;try{for(var u,c=function(){var t=u.value,a=!0,i=!1,l=void 0;try{for(var c,s=e[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var p=c.value;o.push(We.a.getAllResourceDataOfSampleInStudyUsingGET({sampleId:t.sampleId,studyId:n.studyId,resourceId:p.resourceId,projection:"DETAILED"}).then(function(e){var n;r[t.sampleId]=r[t.sampleId]||[],(n=r[t.sampleId]).push.apply(n,mn(e))}))}}catch(e){i=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw l}}},s=t[Symbol.iterator]();!(a=(u=s.next()).done);a=!0)c()}catch(e){i=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw l}}return Promise.all(o).then(function(){return r})}}),this.patientResourceData=Object(b.S)({await:function(){return[n.resourceDefinitions]},invoke:function(){var e=[],t=n.resourceDefinitions.result.filter(function(e){return"PATIENT"===e.resourceType}),r=[],o=!0,a=!1,i=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;r.push(We.a.getAllResourceDataOfPatientInStudyUsingGET({studyId:n.studyId,patientId:n.patientId,resourceId:c.resourceId,projection:"DETAILED"}).then(function(t){return e.push.apply(e,mn(t))}))}}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}return Promise.all(r).then(function(){return e})}}),this.resourceIdToResourceData=Object(b.S)({await:function(){return[n.sampleResourceData,n.patientResourceData,n.studyResourceData]},invoke:function(){var e=a.flatMap(n.sampleResourceData.result,function(e){return e}).concat(n.patientResourceData.result).concat(n.studyResourceData.result);return Promise.resolve(a.groupBy(e,function(e){return e.resourceId}))}}),this.pathologyReport=Object(b.S)({await:function(){return[n.derivedPatientId]},invoke:function(){if(n.studyId.toLowerCase().indexOf("tcga")>-1){var e="https://raw.githubusercontent.com/inodb/datahub/a0d36d77b242e32cda3175127de73805b028f595/tcga/pathology_reports/symlink_by_patient",t="https://github.com/inodb/datahub/raw/a0d36d77b242e32cda3175127de73805b028f595/tcga/pathology_reports",r=[];return function n(o,a){return it.a.get("".concat(e,"/").concat(o,".").concat(a)).then(function(e){var i=e.text.split("/")[1];return r.push({name:"".concat(i),url:"".concat(t,"/").concat(i)}),n(o,a+1)},function(){return r})}(n.patientId,0)}return Promise.resolve([])},onError:function(e){}},[]),this.cosmicData=Object(b.S)({await:function(){return[n.mutationData,n.uncalledMutationData]},invoke:function(){return Object(O.m)(n.mutationData,n.uncalledMutationData)}}),this.mutSigData=Object(b.S)({invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(O.t)(this.studyId));case 1:case"end":return e.stop()}},e,this)}))}}),this.indexedVariantAnnotations=Object(b.S)({await:function(){return[n.mutationData,n.uncalledMutationData]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.G)(Object(O.d)(this.mutationData,this.uncalledMutationData),["annotation_summary","hotspots"],Ct.b.serverConfig.isoformOverrideSource,this.genomeNexusClient);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))},onError:function(e){}},void 0),this.indexedMyVariantInfoAnnotations=Object(b.S)({await:function(){return[n.mutationData,n.uncalledMutationData]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.G)(Object(O.d)(this.mutationData,this.uncalledMutationData),["my_variant_info"],Ct.b.serverConfig.isoformOverrideSource,this.genomeNexusClient);case 2:return t=e.sent,e.abrupt("return",Object(dn.j)(t));case 4:case"end":return e.stop()}},e,this)}))},onError:function(){}}),this.hotspotData=Object(b.S)({await:function(){return[n.mutationData,n.uncalledMutationData]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(Rt.a)(this.mutationData,this.uncalledMutationData,this.genomeNexusInternalClient));case 1:case"end":return e.stop()}},e,this)}))},onError:function(){}}),this.clinicalDataForSamples=Object(b.S)({await:function(){return[n.samples]},invoke:function(){var e={identifiers:n.sampleIds.map(function(e){return{entityId:e,studyId:n.studyId}})};return Object(O.f)(e)}},[]),this.clinicalDataGroupedBySample=Object(b.S)({await:function(){return[n.clinicalDataForSamples]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(O.X)(this.sampleIds,this.clinicalDataForSamples.result));case 1:case"end":return e.stop()}},e,this)}))}},[]),this.getWholeSlideViewerIds=Object(b.S)({await:function(){return[n.clinicalDataGroupedBySample]},invoke:function(){var e=n.clinicalDataGroupedBySample.result;if(e){var t=a.chain(e).map(function(e){return e.clinicalData}).flatten().filter(function(e){return"MSK_SLIDE_ID"===e.clinicalAttributeId}).map(function(e){return e.value}).value();return Promise.resolve(t)}return Promise.resolve([])}}),this.studyMetaData=Object(b.S)({invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",We.a.getStudyUsingGET({studyId:this.studyId}));case 1:case"end":return e.stop()}},e,this)}))}}),this.patientViewData=Object(b.S)({await:function(){return[n.clinicalDataPatient,n.clinicalDataForSamples]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(t=this.patientId,this.studyId,n=this.sampleIds,r=this.clinicalDataPatient.result,o=this.clinicalDataForSamples.result,{patient:{id:t,clinicalData:r},samples:Object(O.X)(n,o)}));case 1:case"end":return e.stop()}var t,n,r,o},e,this)}))}},{}),this.sequencedSampleIdsInStudy=Object(b.S)({invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=b.Y,e.next=3,We.a.getAllSampleIdsInSampleListUsingGET({sampleListId:"".concat(this.studyId,"_sequenced")});case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}},e,this)}))},onError:function(e){}},{}),this.molecularProfilesInStudy=Object(b.S)(function(){return We.a.getAllMolecularProfilesInStudyUsingGET({studyId:n.studyId})},[]),this.molecularProfileIdToMolecularProfile=Object(b.S)({await:function(){return[n.molecularProfilesInStudy]},invoke:function(){return Promise.resolve(n.molecularProfilesInStudy.result.reduce(function(e,t){return e[t.molecularProfileId]=t,e},{}))}},{}),this.referenceGenes=Object(b.S)({await:function(){return[n.studies,n.discreteCNAData]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(O.B)(this.studies.result[0].referenceGenome,this.discreteCNAData.result.map(function(e){return e.gene.hugoGeneSymbol.toUpperCase()})));case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){throw e}}),this.mrnaRankMolecularProfileId=Object(b.S)({await:function(){return[n.molecularProfilesInStudy]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(O.I)(this.molecularProfilesInStudy));case 1:case"end":return e.stop()}},e,this)}))}},null),this.discreteCNAData=Object(b.S)({await:function(){return[n.molecularProfileIdDiscrete,n.samples]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={sampleIds:this.sampleIds},e.abrupt("return",Object(O.n)(t,this.molecularProfileIdDiscrete));case 2:case"end":return e.stop()}},e,this)}))},onResult:function(e){n.discreteCNACache.addData(e)}},[]),this.gisticData=Object(b.S)({invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(O.s)(this.studyId));case 1:case"end":return e.stop()}},e,this)}))}},{}),this.clinicalEvents=Object(b.S)({await:function(){return[n.patientViewData]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.a.getAllClinicalEventsOfPatientInStudyUsingGET({studyId:this.studyId,patientId:this.patientId,projection:"DETAILED"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))}},[]),this.molecularProfileIdDiscrete=Object(b.S)({await:function(){return[n.molecularProfilesInStudy]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(O.H)(this.molecularProfilesInStudy));case 1:case"end":return e.stop()}},e,this)}))}}),this.studyToMolecularProfileDiscrete=Object(b.S)({await:function(){return[n.molecularProfileIdDiscrete]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},!this.molecularProfileIdDiscrete.result){e.next=5;break}return e.next=4,We.a.getMolecularProfileUsingGET({molecularProfileId:this.molecularProfileIdDiscrete.result});case 4:t[this.studyId]=e.sent;case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}},e,this)}))}},{}),this.darwinUrl=Object(b.S)({await:function(){return[n.derivedPatientId]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==Ct.b.serverConfig.enable_darwin){e.next=7;break}return e.next=3,it.a.get(Object(ut.i)(this.sampleIds,this.patientId));case 3:return t=e.sent,e.abrupt("return",t.text);case 7:return e.abrupt("return","");case 8:case"end":return e.stop()}},e,this)}))},onError:function(){}}),this.hasTissueImageIFrameUrl=Object(b.S)({await:function(){return[n.derivedPatientId]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vn(this.patientId));case 1:case"end":return e.stop()}},e,this)}))},onError:function(){}},!1),this.uncalledMutationData=Object(b.S)({await:function(){return[n.samples,n.uncalledMutationMolecularProfileId]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={sampleIds:this.samples.result.map(function(e){return e.sampleId})},e.abrupt("return",Object(O.u)(t,this.uncalledMutationMolecularProfileId.result));case 2:case"end":return e.stop()}},e,this)}))}},[]),this.coverageInformation=Object(b.S)({await:function(){return[n.mutatedGenes,n.samples,n.molecularProfilesInStudy]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],this.samples.result.forEach(function(e){var n=i.molecularProfilesInStudy.result;if(n){var r=e.sampleId,o=!0,a=!1,l=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value;t.push({molecularProfileId:s.molecularProfileId,sampleId:r})}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}}}),!t.length||!this.mutatedGenes.result.length){e.next=8;break}return e.next=5,We.a.fetchGenePanelDataInMultipleMolecularProfilesUsingPOST({sampleMolecularIdentifiers:t});case 5:n=e.sent,e.next=9;break;case 8:n=[];case 9:if(r=a.uniq(n.map(function(e){return e.genePanelId}).filter(function(e){return!!e})),o=[],!r.length){e.next=15;break}return e.next=14,We.a.fetchGenePanelsUsingPOST({genePanelIds:r,projection:"DETAILED"});case 14:o=e.sent;case 15:return e.abrupt("return",Object(cn.g)(n,o,this.samples.result,[{uniquePatientKey:this.samples.result[0].uniquePatientKey}],this.mutatedGenes.result));case 16:case"end":return e.stop()}},e,this)}))}},{samples:{},patients:{}}),this.mutationData=Object(b.S)({await:function(){return[n.samples,n.mutationMolecularProfileId]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={sampleIds:this.sampleIds},e.abrupt("return",Object(O.u)(t,this.mutationMolecularProfileId.result));case 2:case"end":return e.stop()}},e,this)}))}},[]),this.mutatedGenes=Object(b.S)({await:function(){return[n.mutationData]},invoke:function(){return Promise.resolve(a.uniqBy(n.mutationData.result,function(e){return e.entrezGeneId}).map(function(e){return{hugoGeneSymbol:e.gene.hugoGeneSymbol,entrezGeneId:e.entrezGeneId}}))}}),this.oncoKbCancerGenes=Object(b.S)({invoke:function(){return Ct.b.serverConfig.show_oncokb?Object(O.x)():Promise.resolve([])}},[]),this.oncoKbInfo=Object(b.S)({invoke:function(){return Ct.b.serverConfig.show_oncokb?Object(O.z)():Promise.resolve(dt.s)}},dt.s),this.oncoKbAnnotatedGenes=Object(b.S)({await:function(){return[n.oncoKbCancerGenes]},invoke:function(){return Ct.b.serverConfig.show_oncokb?Promise.resolve(a.reduce(n.oncoKbCancerGenes.result,function(e,t){return t.oncokbAnnotated&&(e[t.entrezGeneId]=!0),e},{})):Promise.resolve({})}},{}),this.oncoKbData=Object(b.S)({await:function(){return[n.oncoKbAnnotatedGenes,n.mutationData,n.uncalledMutationData,n.clinicalDataForSamples,n.studiesForSamplesWithoutCancerTypeClinicalData,n.studies]},invoke:function(){return Ct.b.serverConfig.show_oncokb?Object(O.y)(n.uniqueSampleKeyToTumorType,n.oncoKbAnnotatedGenes.result||{},n.mutationData,void 0,n.uncalledMutationData):Promise.resolve({indicatorMap:null,uniqueSampleKeyToTumorType:null})},onError:function(e){}},O.b),this.civicGenes=Object(b.S)({await:function(){return[n.mutationData,n.uncalledMutationData,n.clinicalDataForSamples]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ct.b.serverConfig.show_civic?(t=this.mutationData,n=this.uncalledMutationData,r=void 0,r=Object(O.d)(t,n),Object(dt.H)(r,function(e){return e.gene.entrezGeneId})):{});case 1:case"end":return e.stop()}var t,n,r},e,this)}))},onError:function(e){}},void 0),this.civicVariants=Object(b.S)({await:function(){return[n.civicGenes,n.mutationData,n.uncalledMutationData]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ct.b.serverConfig.show_civic||!this.civicGenes.result){e.next=4;break}return e.abrupt("return",xt(this.civicGenes.result,this.mutationData,this.uncalledMutationData));case 4:return e.abrupt("return",{});case 5:case"end":return e.stop()}},e,this)}))},onError:function(e){}},void 0),this.cnaOncoKbData=Object(b.S)({await:function(){return[n.oncoKbAnnotatedGenes,n.discreteCNAData,n.clinicalDataForSamples,n.studies]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ct.b.serverConfig.show_oncokb){e.next=4;break}return e.abrupt("return",Object(O.h)(this.uniqueSampleKeyToTumorType,this.oncoKbAnnotatedGenes.result||{},this.discreteCNAData));case 4:return e.abrupt("return",O.b);case 5:case"end":return e.stop()}},e,this)}))},onError:function(e){}},O.b),this.cnaCivicGenes=Object(b.S)({await:function(){return[n.discreteCNAData,n.clinicalDataForSamples]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ct.b.serverConfig.show_civic?jt(this.discreteCNAData):{});case 1:case"end":return e.stop()}},e,this)}))},onError:function(e){}},void 0),this.cnaCivicVariants=Object(b.S)({await:function(){return[n.civicGenes,n.mutationData]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("complete"!=this.cnaCivicGenes.status){e.next=2;break}return e.abrupt("return",xt(this.cnaCivicGenes.result));case 2:case"end":return e.stop()}},e,this)}))},onError:function(e){}},void 0),this.copyNumberCountData=Object(b.S)({await:function(){return[n.discreteCNAData]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(O.j)(this.discreteCNAData,this.molecularProfileIdDiscrete));case 1:case"end":return e.stop()}},e,this)}))}},[]),this.indexedHotspotData=Object(b.S)({await:function(){return[n.hotspotData]},invoke:function(){return Promise.resolve(Object(dt.W)(n.hotspotData))}}),this.sampleToMutationGenePanelData=Object(b.S)({await:function(){return[n.mutationMolecularProfileId,n.samples]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.mutationMolecularProfileId.result){e.next=2;break}return e.abrupt("return",Object(O.p)(this.mutationMolecularProfileId.result,this.sampleIds));case 2:return e.abrupt("return",{});case 3:case"end":return e.stop()}},e,this)}))}},{}),this.sampleToMutationGenePanelId=Object(b.S)({await:function(){return[n.sampleToMutationGenePanelData]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.mapValues(this.sampleToMutationGenePanelData.result,function(e){return e.genePanelId}));case 1:case"end":return e.stop()}},e,this)}))}},{}),this.sampleToDiscreteGenePanelData=Object(b.S)({await:function(){return[n.molecularProfileIdDiscrete,n.samples]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.molecularProfileIdDiscrete.result){e.next=2;break}return e.abrupt("return",Object(O.p)(this.molecularProfileIdDiscrete.result,this.sampleIds));case 2:return e.abrupt("return",{});case 3:case"end":return e.stop()}},e,this)}))}},{}),this.sampleToDiscreteGenePanelId=Object(b.S)({await:function(){return[n.sampleToDiscreteGenePanelData]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.mapValues(this.sampleToDiscreteGenePanelData.result,function(e){return e.genePanelId}));case 1:case"end":return e.stop()}},e,this)}))}},{}),this.genePanelIdToPanel=Object(b.S)({await:function(){return[n.sampleToMutationGenePanelData,n.sampleToDiscreteGenePanelData]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.concat(a.values(this.sampleToMutationGenePanelData.result),a.values(this.sampleToDiscreteGenePanelData.result)),n=a(t).map(function(e){return e.genePanelId}).filter(function(e){return!Object(O.eb)(e)}).value(),e.abrupt("return",Object(O.o)(n));case 3:case"end":return e.stop()}},e,this)}))}},{}),this.genePanelIdToEntrezGeneIds=Object(b.S)({await:function(){return[n.genePanelIdToPanel]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a(this.genePanelIdToPanel.result).mapValues(function(e){return a.map(e.genes,function(e){return e.entrezGeneId})}).value());case 1:case"end":return e.stop()}},e,this)}))}},{}),this.mutationTableShowGeneFilterMenu=Object(b.S)({await:function(){return[n.samples,n.sampleToMutationGenePanelId,n.genePanelIdToEntrezGeneIds]},invoke:function(){var e=a.uniq(a.map(n.mergedMutationDataIncludingUncalled,function(e){return e[0].entrezGeneId})),t=n.samples.result.map(function(e){return e.sampleId});return Promise.resolve(t.length>1&&pn(t,e,n.sampleToMutationGenePanelId.result,n.genePanelIdToEntrezGeneIds.result))}}),this.cnaTableShowGeneFilterMenu=Object(b.S)({await:function(){return[n.samples,n.sampleToMutationGenePanelId,n.genePanelIdToEntrezGeneIds]},invoke:function(){var e=a.uniq(a.map(n.mergedDiscreteCNAData,function(e){return e[0].entrezGeneId})),t=n.samples.result.map(function(e){return e.sampleId});return Promise.resolve(t.length>1&&pn(t,e,n.sampleToMutationGenePanelId.result,n.genePanelIdToEntrezGeneIds.result))}}),this.trialMatches=Object(b.S)({invoke:function(){return function(e){return Lt(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(ut.a)("api-legacy/proxy/matchminer/api"),t.abrupt("return",at.post(n+"/post_trial_match").set("Content-Type","application/json").send(e).then(function(e){return JSON.parse(e.text).map(function(e){return{id:e.nct_id+"+"+e.protocol_no,nctId:e.nct_id,protocolNo:e.protocol_no,gender:e.gender?e.gender:"",matchType:e.match_type?e.match_type:"",armDescription:e.arm_description?e.arm_description:"",armType:e.arm_type?e.arm_type:"",sampleId:e.sample_id,mrn:e.mrn,vitalStatus:e.vital_status?e.vital_status:"",genomicAlteration:e.genomic_alteration?e.genomic_alteration:"",trueHugoSymbol:e.true_hugo_symbol?e.true_hugo_symbol:"",trueProteinChange:e.true_protein_change?e.true_protein_change:"",oncotreePrimaryDiagnosisName:e.oncotreePrimaryDiagnosisName?e.oncotreePrimaryDiagnosisName:"",trialAgeNumerical:e.trial_age_numerical?e.trial_age_numerical:"",trialOncotreePrimaryDiagnosis:e.trial_oncotree_primary_diagnosis?e.trial_oncotree_primary_diagnosis:""}})}));case 2:case"end":return t.stop()}},t)}))}({mrn:n.patientId})}},[]),this.trialIds=Object(b.S)({await:function(){return[n.trialMatches]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Set,n=new Set,a.forEach(this.trialMatches.result,function(e){a.isEmpty(e.protocolNo)?t.add(e.nctId):n.add(e.protocolNo)}),e.abrupt("return",{nct_id:mn(t),protocol_no:mn(n)});case 4:case"end":return e.stop()}},e,this)}))}},{nct_id:[],protocol_no:[]}),this.trials=Object(b.S)({await:function(){return[n.trialIds]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trialIds.result.protocol_no.length>0||this.trialIds.result.nct_id.length>0)){e.next=2;break}return e.abrupt("return",Vt(this.trialIds.result));case 2:return e.abrupt("return",[]);case 3:case"end":return e.stop()}},e,this)}))}},[]),this.detailedTrialMatches=Object(b.S)({await:function(){return[n.trials,n.trialMatches]},invoke:function(){return bn(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.trials.result||!this.trialMatches.result){e.next=2;break}return e.abrupt("return",Ft(this.trials.result,this.trialMatches.result));case 2:return e.abrupt("return",[]);case 3:case"end":return e.stop()}},e,this)}))}},[]),Object(He.labelMobxPromises)(this),this.internalClient=ze.a}var t,n,r;return t=e,(n=[{key:"isResourceTabOpen",value:function(e){return!!this.openResourceTabMap.get(e)}},{key:"setResourceTabOpen",value:function(e,t){this.openResourceTabMap.set(e,t)}},{key:"setSampleId",value:function(e){e&&(this._patientId=""),this._sampleId=e}},{key:"setPatientId",value:function(e){e&&(this._sampleId=""),this._patientId=e}},{key:"setActiveTabId",value:function(e){this.activeTabId=e}},{key:"clearErrors",value:function(){this.ajaxErrors=[]}},{key:"generateGenomeNexusHgvsgUrl",value:function(e){return Object(ut.q)(e,this.referenceGenomeBuild)}},{key:"patientId",get:function(){return this._patientId?this._patientId:this.derivedPatientId.result}},{key:"sampleId",get:function(){return this._sampleId}},{key:"pageTitle",get:function(){return"patient"===this.pageMode?"Patient: ".concat(this.patientId):"Sample: ".concat(this.sampleId)}},{key:"metaDescription",get:function(){var e="patient"===this.pageMode?this.patientId:this.sampleId;return"".concat(e," from ").concat(this.studyMetaData.result.name)}},{key:"pageMode",get:function(){return this._sampleId?"sample":"patient"}},{key:"caseId",get:function(){return"sample"===this.pageMode?this.sampleId:this.patientId}},{key:"patientIdsInCohort",set:function(e){var t=this;Object(I.runInAction)(function(){return t._patientIdsInCohort=e})},get:function(){var e=Object(Gt.a)();return e||this._patientIdsInCohort}},{key:"studyToCancerType",get:function(){return Object(O.ab)(this.studies.result)}},{key:"mergedDiscreteCNAData",get:function(){return Object(O.bb)(this.discreteCNAData)}},{key:"usingPublicOncoKbInstance",get:function(){return this.oncoKbInfo.result?this.oncoKbInfo.result.publicInstance:dt.w}},{key:"sampleIds",get:function(){return this.samples.result?this.samples.result.map(function(e){return e.sampleId}):[]}},{key:"mergedMutationData",get:function(){return Object(O.cb)(this.mutationData)}},{key:"mergedMutationDataIncludingUncalled",get:function(){return Object(O.db)(this.mutationData,this.uncalledMutationData)}},{key:"mergedMutationDataFilteredByGene",get:function(){return this.mutationTableGeneFilterOption===qt.ALL_SAMPLES?Sn(this.mergedMutationData,this.sampleIds,this.sampleToMutationGenePanelId.result,this.genePanelIdToEntrezGeneIds.result):this.mergedMutationData}},{key:"mergedMutationDataIncludingUncalledFilteredByGene",get:function(){return this.mutationTableGeneFilterOption===qt.ALL_SAMPLES?Sn(this.mergedMutationDataIncludingUncalled,this.sampleIds,this.sampleToMutationGenePanelId.result,this.genePanelIdToEntrezGeneIds.result):this.mergedMutationDataIncludingUncalled}},{key:"mergedDiscreteCNADataFilteredByGene",get:function(){var e=this;return this.copyNumberTableGeneFilterOption===qt.ALL_SAMPLES?a.filter(this.mergedDiscreteCNAData,function(t){var n=t[0].gene.entrezGeneId,r=un.getProfiledSamplesForGene(n,e.sampleIds,e.sampleToMutationGenePanelId.result,e.genePanelIdToEntrezGeneIds.result);return a(r).values().filter(function(e){return e}).value().length===e.sampleIds.length}):this.mergedDiscreteCNAData}},{key:"existsSomeMutationWithVAFData",get:function(){return a.some(this.mergedMutationDataIncludingUncalled,function(e){return a.some(e,function(e){var t=Object($t.j)(e);return null!=t&&t>0})})}},{key:"uniqueSampleKeyToTumorType",get:function(){return Object(O.O)(this.clinicalDataForSamples,this.studiesForSamplesWithoutCancerTypeClinicalData,this.samplesWithoutCancerTypeClinicalData)}},{key:"mrnaExprRankCache",get:function(){return new ot(this.mrnaRankMolecularProfileId.result)}},{key:"variantCountCache",get:function(){return new St(this.mutationMolecularProfileId.result)}},{key:"discreteCNACache",get:function(){return new lt.a(this.studyToMolecularProfileDiscrete.result)}},{key:"genomeNexusCache",get:function(){return new st.a(Object(fn.a)(["annotation_summary"],this.genomeNexusClient))}},{key:"genomeNexusMutationAssessorCache",get:function(){return new pt.a(Object(fn.a)(["annotation_summary","mutation_assessor"],this.genomeNexusClient))}},{key:"pubMedCache",get:function(){return new ct.a}},{key:"copyNumberCountCache",get:function(){return new Pt(this.molecularProfileIdDiscrete.result)}},{key:"cancerTypeCache",get:function(){return new _t.a}},{key:"mutationCountCache",get:function(){return new kt.a}},{key:"downloadDataFetcher",get:function(){return new Nt.a(this.mutationData)}},{key:"referenceGenomeBuild",get:function(){if(!this.studies.isComplete)throw new Error("Failed to get studies");return Object(O.S)(this.studies.result)}},{key:"genomeNexusClient",get:function(){return new ft.b(this.referenceGenomeBuild)}},{key:"genomeNexusInternalClient",get:function(){return new ft.c(this.referenceGenomeBuild)}}])&&hn(t.prototype,n),r&&hn(t,r),e}();gn([I.observable],En.prototype,"activeTabId",void 0),gn([I.observable],En.prototype,"_patientId",void 0),gn([I.computed],En.prototype,"patientId",null),gn([I.observable],En.prototype,"urlValidationError",void 0),gn([I.observable],En.prototype,"ajaxErrors",void 0),gn([I.observable],En.prototype,"studyId",void 0),gn([I.observable],En.prototype,"_sampleId",void 0),gn([z.default],En.prototype,"isResourceTabOpen",null),gn([z.default,I.action],En.prototype,"setResourceTabOpen",null),gn([I.observable],En.prototype,"mutationTableGeneFilterOption",void 0),gn([I.observable],En.prototype,"copyNumberTableGeneFilterOption",void 0),gn([I.computed],En.prototype,"sampleId",null),gn([I.computed],En.prototype,"pageTitle",null),gn([I.computed],En.prototype,"metaDescription",null),gn([I.computed],En.prototype,"pageMode",null),gn([I.computed],En.prototype,"caseId",null),gn([I.observable],En.prototype,"_patientIdsInCohort",void 0),gn([I.computed],En.prototype,"patientIdsInCohort",null),gn([I.computed],En.prototype,"studyToCancerType",null),gn([I.computed],En.prototype,"mergedDiscreteCNAData",null),gn([I.computed],En.prototype,"usingPublicOncoKbInstance",null),gn([I.computed],En.prototype,"sampleIds",null),gn([I.computed],En.prototype,"mergedMutationData",null),gn([I.computed],En.prototype,"mergedMutationDataIncludingUncalled",null),gn([I.computed],En.prototype,"mergedMutationDataFilteredByGene",null),gn([I.computed],En.prototype,"mergedMutationDataIncludingUncalledFilteredByGene",null),gn([I.computed],En.prototype,"mergedDiscreteCNADataFilteredByGene",null),gn([I.computed],En.prototype,"existsSomeMutationWithVAFData",null),gn([I.computed],En.prototype,"uniqueSampleKeyToTumorType",null),gn([Object(I.action)("SetSampleId")],En.prototype,"setSampleId",null),gn([Object(I.action)("SetPatientId")],En.prototype,"setPatientId",null),gn([He.cached],En.prototype,"mrnaExprRankCache",null),gn([He.cached],En.prototype,"variantCountCache",null),gn([He.cached],En.prototype,"discreteCNACache",null),gn([He.cached],En.prototype,"genomeNexusCache",null),gn([He.cached],En.prototype,"genomeNexusMutationAssessorCache",null),gn([He.cached],En.prototype,"pubMedCache",null),gn([He.cached],En.prototype,"copyNumberCountCache",null),gn([He.cached],En.prototype,"cancerTypeCache",null),gn([He.cached],En.prototype,"mutationCountCache",null),gn([He.cached],En.prototype,"downloadDataFetcher",null),gn([I.action],En.prototype,"setActiveTabId",null),gn([I.action],En.prototype,"clearErrors",null),gn([I.computed],En.prototype,"referenceGenomeBuild",null),gn([z.default],En.prototype,"generateGenomeNexusHgvsgUrl",null),gn([I.computed],En.prototype,"genomeNexusClient",null),gn([I.computed],En.prototype,"genomeNexusInternalClient",null);var wn=n(1133),Tn=n.n(wn);function An(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function In(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function On(e){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _n(e,t){return!t||"object"!==On(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kn(e){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mn(e,t)}function Mn(e,t){return(Mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dn=function(e){function t(){return Pn(this,t),_n(this,kn(t).apply(this,arguments))}return Cn(t,V["b"]),t}(),xn=function(e){function t(){return Pn(this,t),_n(this,kn(t).apply(this,arguments))}var n,o,i;return Cn(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e,t,n=(e=this.props.samples,t={columns:[],items:{}},e&&e.forEach(function(e){var n=e.id;t.columns.push({id:n}),e.clinicalData.forEach(function(e){t.items[e.clinicalAttributeId]=t.items[e.clinicalAttributeId]||{},t.items[e.clinicalAttributeId][n]=e.value.toString(),t.items[e.clinicalAttributeId].clinicalAttribute=e.clinicalAttribute,t.items[e.clinicalAttributeId].id=e.clinicalAttributeId})}),t),o=this.prepareData(n),a=[{id:"attribute"}].concat(An(n.columns)).map(function(e){return{name:e.id,render:function(t){return Object(b.N)(t[e.id])?r.createElement("a",{href:t[e.id],target:"_blank"},t[e.id]):r.createElement("span",null,t[e.id])},download:function(t){return"".concat(t[e.id])},filter:function(t,n,r){return t[e.id].toString().toUpperCase().indexOf(r)>-1}}});return a[0].sortBy=function(e){return e.attribute},r.createElement(Dn,{columns:a,data:o,className:Tn.a.sampleTable,showPagination:!1,initialItemsPerPage:U.b,showColumnVisibility:!1})}},{key:"prepareData",value:function(e){var t=[];return a.each(a.values(e.items).sort(function(e,t){return W(e.clinicalAttribute,t.clinicalAttribute)}),function(n){var r={attribute:n.clinicalAttribute.displayName};e.columns.map(function(e){e.id in n?r[e.id]=n[e.id]:r[e.id]="n/a"}),t.push(r)}),t}}])&&In(n.prototype,o),i&&In(n,i),t}(),jn=n(768),Rn=n(748),Nn=n(580),Gn=n(880);function Ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Vn,Fn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(t,n,o){var a=e.getCopyNumberCount(t,n),i=e.makeCohortFrequencyViz(t,a),u=e.getGisticValue(t,o),c=0,s=0;return null!==u&&(c=u.qValue,s=u.peakGeneCount),r.createElement("div",null,null!==i&&i,r.createElement(l.If,{condition:null!==u},r.createElement(l.Then,null,r.createElement(Gn.a,{qValue:c,peakGeneCount:s}))))}},{key:"makeCohortFrequencyViz",value:function(t,n){if(null!==n){var o=n.data;if("complete"===n.status&&o){var a=[o.numberOfSamplesWithAlterationInGene],i=t[0].alteration>0?["red"]:["blue"];return r.createElement(Rn.a,{counts:a,freqColors:i,totalCount:o.numberOfSamples,tooltip:e.tooltipContent(t,o)})}return"complete"===n.status?r.createElement(b.c,{placement:"left",overlay:r.createElement("span",null,"Data not available for this gene and alteration.")},r.createElement("span",{style:{color:"gray",fontSize:"xx-small",textAlign:"center"}},"NA")):r.createElement(b.c,{placement:"left",overlay:r.createElement("span",null,"Error retrieving data.")},r.createElement("span",{style:{color:"gray",fontSize:"xx-small",textAlign:"center"}},"ERROR"))}return r.createElement(b.c,{placement:"left",overlay:r.createElement("span",null,"Querying server for data.")},r.createElement("span",{style:{color:"gray",fontSize:"xx-small",textAlign:"center"}},"LOADING"))}},{key:"tooltipContent",value:function(e,t){var n=t.numberOfSamplesWithAlterationInGene,o=t.numberOfSamplesWithAlterationInGene/t.numberOfSamples,a=r.createElement("b",null,Object(Nn.c)(o)),i=e[0].gene.hugoGeneSymbol,l=-2===e[0].alteration?"deleted":"amplified",u=1===n?"sample":"samples",c=1===n?"has":"have";return r.createElement("span",null,n," ",u," (",a,") in this study ",c," ",l," ",i)}},{key:"getSortValue",value:function(t,n){var r=e.getCopyNumberCount(t,n);return r&&r.data?r.data.numberOfSamplesWithAlterationInGene:null}},{key:"getCopyNumberCount",value:function(e,t){return t.get({entrezGeneId:e[0].entrezGeneId,alteration:e[0].alteration})}},{key:"getGisticValue",value:function(e,t){var n,r=t[e[0].entrezGeneId];if(r){var o=2===e[0].alteration;n=r.find(function(e){return e.amp===o})}return void 0===n?null:n}}],(n=null)&&Ln(t.prototype,n),o&&Ln(t,o),e}();function Bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e){e[e.DeepDel=-2]="DeepDel",e[e.AMP=2]="AMP"}(Vn||(Vn={}));var Un=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"displayText",value:function(e){return Vn[e[0].alteration]}},{key:"renderFunction",value:function(t){var n=null;switch(t[0].alteration){case-2:n="#0000FF";break;case 2:n="#FF0000"}return n?r.createElement("span",{style:{color:n}},e.displayText(t)):r.createElement("span",null)}},{key:"download",value:function(e){return Vn[e[0].alteration]}},{key:"sortValue",value:function(e){return e[0].alteration}}],(n=null)&&Bn(t.prototype,n),o&&Bn(t,o),e}(),Wn=n(628);function zn(){return(zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Kn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getData",value:function(t,n,r,o,i,l,u,c){var s;if(t){var p=void 0,f="complete",d=t[0].gene.hugoGeneSymbol,m=!1,h=!1;!n||n instanceof Error||(m=void 0!==a.find(n.result,function(e){return e.oncokbAnnotated&&e.entrezGeneId===t[0].entrezGeneId}),h=void 0!==a.find(n.result,function(e){return e.entrezGeneId===t[0].entrezGeneId})),r&&r.result instanceof Error?f="error":m&&(!r||!r.result||r.result instanceof Error||"complete"!==r.status||(p=e.getIndicatorData(t,r.result,i,c)),f=r?r.status:"pending"),s={hugoGeneSymbol:d,oncoKbStatus:f,oncoKbIndicator:p,oncoKbGeneExist:m,isOncoKbCancerGene:h,usingPublicOncoKbInstance:void 0===o?dt.w:o,civicEntry:l&&l.result&&u&&u.result?e.getCivicEntry(t,l.result,u.result):void 0,civicStatus:l&&l.status&&u&&u.status?e.getCivicStatus(l.status,u.status):"pending",hasCivicVariants:!(l&&l.result&&u&&u.result)||e.hasCivicVariants(t,l.result,u.result),myCancerGenomeLinks:[],hotspotStatus:"complete",isHotspot:!1,is3dHotspot:!1}}else s=dt.f;return s}},{key:"getCivicEntry",value:function(e,t,n){var r=null,o=e[0].gene.hugoGeneSymbol,i=Dt(e,o,n),l=t[o];return!l||a.isEmpty(i)&&""===l.description||(r=Object(dt.A)(l,i)),r}},{key:"getCivicStatus",value:function(e,t){return"error"===e||"error"===t?"error":"complete"===e&&"complete"===t?"complete":"pending"}},{key:"hasCivicVariants",value:function(e,t,n){var r=e[0].gene.hugoGeneSymbol,o=Dt(e,r,n);return!t[r]||!a.isEmpty(o)}},{key:"getIndicatorData",value:function(e,t,n,r){if(null!==n&&null!==t.indicatorMap){var o=Object(b.A)(e[0].gene.entrezGeneId,n[e[0].uniqueSampleKey],Object(Wn.a)(e[0].alteration));if(t.indicatorMap[o]){var a=t.indicatorMap[o];if(null===a.query.tumorType&&r){var i=r[e[0].studyId];"mixed"!==i.cancerTypeId&&(a.query.tumorType=i.cancerType.name)}return a}}}},{key:"sortValue",value:function(t,n,r,o,i,l,u){var c=e.getData(t,n,o,r,i,l,u);return a.flatten([Object(dt.cb)(c.oncoKbIndicator),Object(dt.C)(c.civicEntry),c.isOncoKbCancerGene?1:0])}},{key:"renderFunction",value:function(t,n){var o=e.getData(t,n.oncoKbCancerGenes,n.oncoKbData,n.usingPublicOncoKbInstance,n.uniqueSampleKeyToTumorType,n.civicGenes,n.civicVariants,n.studyIdToStudy);return r.createElement(dt.m,zn({},n,{annotation:o}))}}],(n=null)&&Hn(t.prototype,n),o&&Hn(t,o),e}(),Yn=n(238);n(1134);function Qn(e){return(Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zn(e,t){return!t||"object"!==Qn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jn(e){return(Jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xn(e,t){return(Xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $n=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Zn(this,Jn(t).call(this,e))).iconClicked=function(e){n.props.suppressClickBubble&&e.stopPropagation()},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xn(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{style:{marginRight:"5px"}},this.props.name),this.props.showIcon&&o.a.createElement(Yn.a,{trigger:["click"],overlay:this.props.children},o.a.createElement("i",{className:"fa fa-filter",onClick:this.iconClicked,"data-test":"gene-filter-icon"})))}}])&&qn(n.prototype,r),a&&qn(n,a),t}();function er(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nr(e,t,n){return t&&tr(e.prototype,t),n&&tr(e,n),e}function rr(e,t){return!t||"object"!==lr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function or(e){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ar(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ir(e,t)}function ir(e,t){return(ir=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lr(e){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}$n.defaultProps={suppressClickBubble:!0,showIcon:!0};var ur=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":lr(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},cr=function(e){function t(){return er(this,t),rr(this,or(t).apply(this,arguments))}return ar(t,r["Component"]),nr(t,[{key:"handleClick",value:function(e){this.props.onSelectGenePanel&&e&&this.props.onSelectGenePanel(e)}},{key:"render",value:function(){return r.createElement(r.Fragment,null,this.renderGenePanelLinks)}},{key:"renderGenePanelLinks",get:function(){var e=this,t=pr(this.props),n=[];return t.forEach(function(o,a){o&&"N/A"!==o?n.push(r.createElement("a",{onClick:function(){return e.handleClick(o)}},o)):n.push(o),a<t.length-1&&n.push(", ")}),n}}]),t}();ur([z.default],cr.prototype,"handleClick",null),ur([I.computed],cr.prototype,"renderGenePanelLinks",null);var sr=function(e){function t(e){return er(this,t),rr(this,or(t).call(this,e))}return ar(t,r["Component"]),nr(t,[{key:"render",value:function(){var e=this.props,t=e.sampleToGenePanelId,n=e.sampleManager;if(t&&n)return t&&!Object.keys(t).length?r.createElement("i",{className:"fa fa-spinner fa-pulse"}):r.createElement("div",{style:{position:"relative"}},r.createElement("ul",{style:{marginBottom:0},className:"list-inline list-unstyled"},r.createElement(cr,this.props)))}}]),t}(),pr=function(e){var t=e.data,n=e.sampleToGenePanelId,r=e.sampleManager,o=e.genePanelIdToGene;if(n&&r){var i=r.samples,l=Object(a.map)(i,function(e){return e.id}),u=t[0].entrezGeneId,c=un.getPresentSamples(t),s=un.getProfiledSamplesForGene(u,l,n,o);return i.map(function(e){var t=e.id in c;return e.id in s&&s[e.id]&&!t?"":n[e.id]||"N/A"}).filter(function(e){return e})}return[]},fr={renderFunction:function(e){return r.createElement(sr,{data:e.data,sampleToGenePanelId:e.sampleToGenePanelId,sampleManager:e.sampleManager,genePanelIdToGene:e.genePanelIdToGene,onSelectGenePanel:e.onSelectGenePanel})},download:function(e){return pr(e)},getGenePanelIds:pr};function dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hr(e,t){return!t||"object"!==vr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yr(e){return(yr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&br(e,t)}function br(e,t){return(br=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vr(e){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Sr=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":vr(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Er=function(e){function t(){return mr(this,t),hr(this,yr(t).apply(this,arguments))}return gr(t,V["b"]),t}(),wr=function(e){function t(){return mr(this,t),hr(this,yr(t).apply(this,arguments))}var n,o,i;return gr(t,r["Component"]),n=t,(o=[{key:"getCytobandForGene",value:function(e){return this.hugoGeneSymbolToCytoband[e]}},{key:"render",value:function(){var e=this,t=[],n=this.props.sampleIds.length;n>=2&&t.push({name:"Samples",render:function(t){return un.renderFunction(t,e.props.sampleManager,e.props.sampleToGenePanelId,e.props.genePanelIdToEntrezGeneIds,e.props.onSelectGenePanel,e.props.disableTooltip)},sortBy:function(t){return un.getSortValue(t,e.props.sampleManager)},download:function(e){return un.getSample(e)},order:20,resizable:!0}),t.push({name:"Gene",render:function(e){return r.createElement("span",{"data-test":"cna-table-gene-column"},e[0].gene.hugoGeneSymbol)},filter:function(e,t,n){return e[0].gene.hugoGeneSymbol.indexOf(n)>-1},download:function(e){return e[0].gene.hugoGeneSymbol},sortBy:function(e){return e[0].gene.hugoGeneSymbol},headerRender:function(t){return r.createElement($n,{name:t,showIcon:e.props.showGeneFilterMenu},r.createElement(Xt,{onOptionChanged:e.props.onFilterGenes,currentSelection:e.props.currentGeneFilter}))},visible:!0,order:30});var o=function(t){return{data:t,sampleToGenePanelId:e.props.sampleToGenePanelId,sampleManager:e.props.sampleManager,genePanelIdToGene:e.props.genePanelIdToEntrezGeneIds,onSelectGenePanel:e.props.onSelectGenePanel}};t.push({name:"Gene panel",render:function(e){return fr.renderFunction(o(e))},download:function(e){return fr.download(o(e))},sortBy:function(e){return fr.getGenePanelIds(o(e))},visible:!1,order:35}),t.push({name:"CNA",render:Un.renderFunction,filter:function(e,t,n){return Un.displayText(e).toUpperCase().indexOf(n)>-1},download:Un.download,sortBy:Un.sortValue,visible:!0,order:40}),t.push({name:"Annotation",render:function(t){return Kn.renderFunction(t,{uniqueSampleKeyToTumorType:e.props.uniqueSampleKeyToTumorType,oncoKbData:e.props.cnaOncoKbData,oncoKbCancerGenes:e.props.oncoKbCancerGenes,usingPublicOncoKbInstance:e.props.usingPublicOncoKbInstance,enableOncoKb:e.props.enableOncoKb,pubMedCache:e.props.pubMedCache,civicGenes:e.props.cnaCivicGenes,civicVariants:e.props.cnaCivicVariants,enableCivic:e.props.enableCivic,enableMyCancerGenome:!1,enableHotspot:!1,userEmailAddress:e.props.userEmailAddress,studyIdToStudy:e.props.studyIdToStudy})},sortBy:function(t){return Kn.sortValue(t,e.props.oncoKbCancerGenes,e.props.usingPublicOncoKbInstance,e.props.cnaOncoKbData,e.props.uniqueSampleKeyToTumorType,e.props.cnaCivicGenes,e.props.cnaCivicVariants)},order:50}),t.push({name:"Cytoband",render:function(t){return r.createElement("span",null,e.getCytobandForGene(t[0].gene.hugoGeneSymbol))},sortBy:function(t){return e.getCytobandForGene(t[0].gene.hugoGeneSymbol)},visible:!0,order:60}),t.push({name:"Cohort",render:function(t){return e.props.copyNumberCountCache?Fn.renderFunction(t,e.props.copyNumberCountCache,e.props.gisticData):r.createElement("span",null)},sortBy:function(t){return e.props.copyNumberCountCache?Fn.getSortValue(t,e.props.copyNumberCountCache):0},tooltip:r.createElement("span",null,"Alteration frequency in cohort"),defaultSortDirection:"desc",order:80}),1===n&&this.props.mrnaExprRankMolecularProfileId&&t.push({name:"mRNA Expr.",render:function(t){return e.props.mrnaExprRankCache?jn.a.cnaRenderFunction(t,e.props.mrnaExprRankCache):r.createElement("span",null)},order:70});var i=a.sortBy(t,function(e){return e.order});return r.createElement("div",null,"unavailable"===this.props.status&&r.createElement("div",{className:"alert alert-info",role:"alert"},"Copy Number Alterations are not available."),"available"===this.props.status&&r.createElement(Er,{columns:i,data:this.props.data,initialSortColumn:"Annotation",initialSortDirection:"desc",initialItemsPerPage:10,itemsLabel:"Copy Number Alteration",itemsLabelPlural:"Copy Number Alterations",showCountHeader:!0,columnVisibility:this.props.columnVisibility,columnVisibilityProps:this.props.columnVisibilityProps}))}},{key:"hugoGeneSymbolToCytoband",get:function(){return this.props.referenceGenes.reduce(function(e,t){return e[t.hugoGeneSymbol]=t.cytoband||"",e},{})}}])&&dr(n.prototype,o),i&&dr(n,i),t}();wr.defaultProps={enableOncoKb:!0,enableCivic:!1,showGeneFilterMenu:!0},Sr([I.computed],wr.prototype,"hugoGeneSymbolToCytoband",null);var Tr=wr=Sr([Wt.observer],wr),Ar=(n(1135),n(652)),Ir=n(1137),Or=["SAMPLE_ID","SPECIMEN_REFERENCE_NUMBER","SpecimenReferenceNumber"];function Pr(e,t,n,r,o,i,l){if(0!==i.length){var u=Ir.clinicalTimelineParser(i);if(0!==u.length){var c=window.location.href.includes("genie_bpc");if(c){var p=a.find(u,function(e){return"Status"===e.label||"Med Onc Assessment"==e.label});p&&(p.label="Med Onc Assessment",p.times.forEach(function(e){var t=a.find(e.tooltip_tables[0],function(e){return"STATUS"===e[0]})[1].toLowerCase();t.includes("indeter")?e.color="white":t.includes("stable")?e.color="gainsboro":t.includes("mixed")?e.color="goldenrod":t.includes("improving")?e.color="rgb(44, 160, 44)":t.includes("worsening")&&(e.color="rgb(214, 39, 40)")}));var f=a.find(u,function(e){return"Imaging"===e.label});f&&f.times.forEach(function(e){var t=a.find(e.tooltip_tables[0],function(e){return"IMAGE_OVERALL"===e[0]});(t=t?t[1].toLowerCase():"indeterminate").includes("indeter")||t.includes("does not mention")?e.color="white":t.includes("stable")?e.color="gainsboro":t.includes("mixed")?e.color="goldenrod":t.includes("improving")?e.color="rgb(44, 160, 44)":t.includes("worsening")&&(e.color="rgb(214, 39, 40)")})}var d,m,h=a.find(u,function(e){return"Specimen"===e.label});if(h&&(h.times=a.sortBy(h.times,function(e){var n=1/0,r=a.filter(e.tooltip_tables[0],function(e){return Or.includes(e[0])});return r&&(r.length>1?console.warn("More than 1 specimen reference number found in tooltip table"):1===r.length&&-1===(n=t.indexOf(r[0][1]))&&(n=1/0)),n})),!window.location.href.includes("mskimpact_test_june"))for(m=Object.keys(n).filter(function(e){return/OS_STATUS$/.test(e)}).map(function(e){return e.substr(0,e.length-"OS_STATUS".length)}),d=0;d<m.length;d++){var y=m[d];if("1:DECEASED"===n[y+"OS_STATUS"]&&y+"OS_MONTHS"in n){var g=Math.round(30.4*parseFloat(n[y+"OS_MONTHS"])),b={starting_time:g,ending_time:g,display:"circle",color:"#000",tooltip_tables:[[["START_DATE",g],["STATUS","DECEASED"]]]},v=u.filter(function(e){return"Status"===e.label})[0];v?v.times=v.times.concat(b):u=u.concat({label:"Status",times:[b]});break}}window.pvTimeline=Ir.clinicalTimeline().width(l).data(u).divId("#timeline").setTimepointsDisplay("Imaging","square").orderTracks(["Specimen","Surgery","Med Onc Assessment","Status","Diagnostics","Diagnostic","Imaging","Lab_test","Treatment"]).splitByClinicalAttributes("Lab_test","TEST"),window.pvTimeline.data().filter(function(e){return"Lab_test"===e.parent_track&&a.every(e.times.map(function(e){return 1===e.tooltip_tables.length&&e.tooltip_tables[0].filter(function(e){return"RESULT"===e[0]}).length>0}))}).map(function(e){return e.label}).forEach(function(e){window.pvTimeline=window.pvTimeline.sizeByClinicalAttribute(e,"RESULT")}),window.pvTimeline=c?window.pvTimeline.orderTracks(["Sample acquisition","Sequencing","Surgery","Med Onc Assessment","Status","Diagnostics","Diagnostic","Imaging","Lab_test","Treatment"]).setTimepointsDisplay("Imaging","circle").splitByClinicalAttributes("Treatment",["TREATMENT_TYPE","AGENT"]).enableTrackTooltips(!1).plugins([{obj:new Ir.trimClinicalTimeline("Trim Timeline"),enabled:!0}]).addPostTimelineHook(function(){s()("circle[id^='timelineItem_2']").attr("stroke","gray"),s()("circle[id^='timelineItem_2']").attr("stroke-width","0.5px"),s()("circle[id^='timelineItem_2']").attr("r","4.5"),s()("circle[id^='timelineItem_3']").attr("stroke","gray"),s()("circle[id^='timelineItem_3']").attr("stroke-width","0.5px"),s()("circle[id^='timelineItem_3']").attr("r","4.5"),s()("circle[id^='timelineItem_4']").attr("stroke","gray"),s()("circle[id^='timelineItem_4']").attr("stroke-width","0.5px"),s()("circle[id^='timelineItem_4']").attr("r","4.5")}.bind(this)):window.pvTimeline.splitByClinicalAttributes("Treatment",["TREATMENT_TYPE","SUBTYPE","AGENT"]).splitByClinicalAttributes("Diagnosis",["SUBTYPE"]).collapseAll().enableTrackTooltips(!1).plugins([{obj:new Ir.trimClinicalTimeline("Trim Timeline"),enabled:!0}]);var S=window.pvTimeline.data().reduce(function(e,t,n){return t.times.length>0&&a.every(t.times.map(function(e){return e.tooltip_tables.length>0&&a.every(e.tooltip_tables.map(function(e){return e.filter(function(e){return Or.includes(e[0])}).length>0}))}))?a.concat(e,[{label:t.label,index:n,className:".timelineSeries_".concat(n)}]):e},[]);S&&S.length>0&&(S.forEach(function(e){window.pvTimeline.toggleTrackCollapse(e.label)}),window.pvTimeline.addPostTimelineHook(function(e,t,n,r){for(var o=function(e,t){var n=r.label[t],o=r.color[t];e.select("circle").attr("fill",o),e.append("text").attr("y",4).attr("r",6).attr("text-anchor","middle").attr("font-size",10).attr("fill","white").text(n)},a=0;a<t.length;a++){var i=t[a],l=n[i],u=[i],c=l.OTHER_SAMPLE_ID;c&&(u=u.concat(c)),e.forEach(function(e){var t=Ar.selectAll(e).filter(function(e){if(1===e.tooltip_tables.length){var t=e.tooltip_tables[0].filter(function(e){return Or.includes(e[0])})[0];if(t)return-1!==u.indexOf(t[1])}});if(t[0][0]){var n=document.createElementNS("http://www.w3.org/2000/svg","g");null!==t.attr("cx")&&null!==t.attr("cy")&&s()(n).attr("transform","translate("+t.attr("cx")+","+t.attr("cy")+")"),s()(t[0]).removeAttr("cx"),s()(t[0]).removeAttr("cy"),s()(t[0]).removeAttr("style"),s()(t[0]).qtip("destroy"),s()(t[0]).unbind("mouseover mouseout"),s()(t[0]).wrap(n),(n=s()(t[0]).parent()).prop("__data__",s()(t[0]).prop("__data__")),o(Ar.select(n.get(0)),i),window.pvTimeline.addDataPointTooltip(n)}})}}.bind(this,S.map(function(e){return e.className}),t,r,o))),window.pvTimeline(),s()("#timeline-container").show()}}}n(877),n(1018),n(1138);var _r=["PATIENT_ID\tSTART_DATE\tSTOP_DATE\tTYPE\tVALUE"];function kr(e){return[e.patientId,void 0!==e.startNumberOfDaysSinceDiagnosis?e.startNumberOfDaysSinceDiagnosis.toString():"",void 0!==e.endNumberOfDaysSinceDiagnosis?e.endNumberOfDaysSinceDiagnosis.toString():"",e.eventType,Cr(e)].join("\t")}function Cr(e){switch(e.eventType){case"SPECIMEN":return Mr(e.attributes,"SURGERY");case"STATUS":return Mr(e.attributes,"STATUS");case"TREATMENT":var t=Mr(e.attributes,"SUBTYPE"),n=Mr(e.attributes,"AGENT");return void 0===n?t:n;case"SURGERY":return Mr(e.attributes,"EVENT_TYPE_DETAILED");default:return""}}function Mr(e,t){var n=e.find(function(e){return e.key===t});return void 0===n?void 0:n.value}function Dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xr(e,t){return!t||"object"!==Nr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jr(e){return(jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rr(e,t){return(Rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nr(e){return(Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Gr=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Nr(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};n(1136);var Lr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xr(this,jr(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rr(e,t)}(t,r["Component"]),n=t,(o=[{key:"shouldComponentUpdate",value:function(e){return e.width!==this.currentWidth&&this.drawTimeline(e.width),!1}},{key:"componentDidMount",value:function(){this.drawTimeline(this.props.width)}},{key:"getData",value:function(){return e=this.props.store.clinicalEvents.result,_r.concat(e.map(kr)).join("\n")+"\n";var e}},{key:"drawTimeline",value:function(e){var t=this.props.store.patientViewData.result.samples.reduce(function(e,t){return e[t.id]=t.clinicalData.reduce(function(e,t){return e[t.clinicalAttributeId]=t.value,e},{}),e},{}),n=this.props.sampleManager.getSampleIdsInOrder();this.props.store.studyId,this.props.store.patientId;Pr(0,n,this.props.store.patientViewData.result.patient.clinicalData.reduce(function(e,t){return e[t.clinicalAttributeId]=t.value,e},{}),t,{color:this.props.sampleManager.sampleColors,label:this.props.sampleManager.sampleLabels,index:this.props.sampleManager.sampleIndex},this.props.store.clinicalEvents.result.map(function(e){return{eventType:e.eventType,patientId:e.patientId,startDate:a.isUndefined(e.startNumberOfDaysSinceDiagnosis)?null:e.startNumberOfDaysSinceDiagnosis,stopDate:a.isUndefined(e.endNumberOfDaysSinceDiagnosis)?null:e.endNumberOfDaysSinceDiagnosis,eventData:e.attributes.reduce(function(e,t){return e[t.key]=t.value,e},{})}}),e),this.currentWidth=e}},{key:"getSvg",value:function(){return this.svgContainer.firstChild}},{key:"render",value:function(){var e=this;return r.createElement("div",{id:"timeline-container",className:"timelineContainer"},r.createElement("div",{id:"timeline",ref:function(t){e.svgContainer=t}}),r.createElement(b.d,{buttons:["PDF","PNG","SVG","Data"],dataExtension:"tsv",getSvg:this.getSvg,getData:this.getData,filename:"timeline",dontFade:!0,type:"button",style:{position:"absolute",top:0,right:5}}))}}])&&Dr(n.prototype,o),i&&Dr(n,i),t}();Gr([z.default],Lr.prototype,"getData",null),Gr([z.default],Lr.prototype,"getSvg",null);var Vr=n(851),Fr=n(769),Br=n(686);function Ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Wr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getComponentForSampleArgs",value:function(e){var t=e.tumorAltCount,n=1,r="";return Object($t.o)(e.molecularProfileId)&&(t>0?(n=.1,r="Mutation has supporting reads, but wasn't called"):(n=0,r="Mutation has 0 supporting reads and wasn't called")),{opacity:n,extraTooltipText:r}}},{key:"convertMutationToSampleElement",value:function(t,n,o,a){var i=t.tumorAltCount,l=t.tumorRefCount;if(i<0||l<0)return null;var u=i/(i+l),c=(isNaN(u)?0:u)*e.maxBarHeight,s=e.maxBarHeight-c,p=r.createElement("rect",{x:o,y:s,width:e.barWidth,height:c,fill:n}),f="".concat(Object($t.o)(t.molecularProfileId)?"(uncalled) ":"","(").concat(i," variant reads out of ").concat(i+l," total)"),d=r.createElement("span",null,r.createElement("strong",null,Object(Br.b)(u))," ",f);return{sampleId:t.sampleId,bar:p,component:a,text:d,freq:u}}},{key:"renderFunction",value:function(t,n){if(!n)return r.createElement("span",null);var o=n.getSampleIdsInOrder(),a=o.reduce(function(t,n,r){return t[n]=e.indexToBarLeft(r),t},{}),i=t.map(function(t){var r=e.getComponentForSampleArgs(t);return e.convertMutationToSampleElement(t,n.getColorForSample(t.sampleId),a[t.sampleId],n.getComponentForSample(t.sampleId,r.opacity,r.extraTooltipText))}).reduce(function(e,t){return t&&(e[t.sampleId]=t),e},{}),l=o.map(function(e){return i[e]}).filter(function(e){return!!e}),u=l.map(function(e){return r.createElement("span",{key:e.sampleId},e.component," ",e.text,r.createElement("br",null))}),c=o.map(function(e){return i[e]&&i[e].freq||void 0}),s=l.map(function(e){return e.bar}),p=r.createElement("span",null);if(1===n.samples.length?p=r.createElement("span",null,isNaN(c[0])?"":Object(Br.b)(c[0])):u.length>0&&(p=r.createElement("svg",{width:e.getSVGWidth(o.length),height:e.maxBarHeight},s)),u.length>0&&c.filter(function(e){return void 0!==e}).length>0){p=r.createElement(b.c,{placement:"left",overlay:function(){return r.createElement("span",null,u)},arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!0},p)}return p}},{key:"getSVGWidth",value:function(t){return t*e.barWidth+(t-1)*e.barSpacing}},{key:"getSortValue",value:function(t,n){if(!n)return[null];var r=t.reduce(function(e,t){return e[t.sampleId]=t,e},{});return n.getSampleIdsInOrder().map(function(e){return r[e]}).map(function(t){return e.calcFrequency(t)||null})}},{key:"isVisible",value:function(e,t){if(t){var n=!0,r=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var u=i.value,c=this.getSortValue(u,e);if(a.compact(c).length>0)return!0}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}}return!1}},{key:"getFrequency",value:function(t){var n=[];if(t){var r=!0,o=!1,a=void 0;try{for(var i,l=t[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value,c=e.calcFrequency(u),s=null===c?"":String(c);n.push(s)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}return 1===n.length?n[0]:n}},{key:"calcFrequency",value:function(e){if(!e)return null;var t=e.tumorAltCount,n=e.tumorRefCount;return t<0||n<0?null:t/(t+n)}}],(n=null)&&Ur(t.prototype,n),o&&Ur(t,o),e}();Wr.barWidth=6,Wr.barSpacing=3,Wr.maxBarHeight=12,Wr.indexToBarLeft=function(e){return e*(Wr.barWidth+Wr.barSpacing)};var zr=n(752);function Hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kr(e,t){return!t||"object"!==Zr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yr(e,t,n){return(Yr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qr(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Qr(e){return(Qr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qr(e,t){return(qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zr(e){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Jr=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Zr(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Xr=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Kr(this,Qr(t).call(this,e))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qr(e,t)}(t,Vr["b"]),n=t,(o=[{key:"getSamples",value:function(){return this.props.sampleIds?this.props.sampleIds:[]}},{key:"generateColumns",value:function(){var e=this;Yr(Qr(t.prototype),"generateColumns",this).call(this),this._columns[Vr.a.TUMOR_ALLELE_FREQ]={name:"Allele Freq",render:function(t){return Wr.renderFunction(t,e.props.sampleManager)},sortBy:function(t){return Wr.getSortValue(t,e.props.sampleManager)},download:function(e){return Wr.getFrequency(e)},tooltip:r.createElement("span",null,"Variant allele frequency in the tumor sample"),visible:Wr.isVisible(this.props.sampleManager,this.props.dataStore?this.props.dataStore.allData:this.props.data)},this._columns[Vr.a.SAMPLES]={name:"Samples",render:function(t){return un.renderFunction(t,e.props.sampleManager,e.props.sampleToGenePanelId,e.props.genePanelIdToEntrezGeneIds,e.props.onSelectGenePanel,e.props.disableTooltip)},sortBy:function(t){return un.getSortValue(t,e.props.sampleManager)},download:function(e){return un.getSample(e)},resizable:!0};var n=function(t){return{data:t,sampleToGenePanelId:e.props.sampleToGenePanelId,sampleManager:e.props.sampleManager,genePanelIdToGene:e.props.genePanelIdToEntrezGeneIds,onSelectGenePanel:e.props.onSelectGenePanel}};this._columns[Vr.a.GENE_PANEL]={name:"Gene panel",render:function(e){return fr.renderFunction(n(e))},download:function(e){return fr.download(n(e))},visible:!1,sortBy:function(e){return fr.getGenePanelIds(n(e))}},this._columns[Vr.a.REF_READS_N].render=function(t){return Fr.a.renderFunction(t,e.getSamples(),"normalRefCount")},this._columns[Vr.a.REF_READS_N].download=function(e){return Fr.a.getReads(e,"normalRefCount")},this._columns[Vr.a.VAR_READS_N].render=function(t){return Fr.a.renderFunction(t,e.getSamples(),"normalAltCount")},this._columns[Vr.a.VAR_READS_N].download=function(e){return Fr.a.getReads(e,"normalAltCount")},this._columns[Vr.a.REF_READS].render=function(t){return Fr.a.renderFunction(t,e.getSamples(),"tumorRefCount")},this._columns[Vr.a.REF_READS].download=function(e){return Fr.a.getReads(e,"tumorRefCount")},this._columns[Vr.a.VAR_READS].render=function(t){return Fr.a.renderFunction(t,e.getSamples(),"tumorAltCount")},this._columns[Vr.a.VAR_READS].download=function(e){return Fr.a.getReads(e,"tumorAltCount")},this._columns[Vr.a.EXON].sortBy=void 0,this._columns[Vr.a.EXON].render=function(t){return zr.a.renderFunction(t,e.props.genomeNexusCache,!0)},this._columns[Vr.a.GENE].headerRender=function(t){return r.createElement($n,{name:t,showIcon:e.props.showGeneFilterMenu},r.createElement(Xt,{onOptionChanged:e.props.onFilterGenes,currentSelection:e.props.currentGeneFilter}))},this._columns[Vr.a.SAMPLES].order=5,this._columns[Vr.a.GENE].order=20,this._columns[Vr.a.GENE_PANEL].order=25,this._columns[Vr.a.PROTEIN_CHANGE].order=30,this._columns[Vr.a.ANNOTATION].order=35,this._columns[Vr.a.FUNCTIONAL_IMPACT].order=38,this._columns[Vr.a.CHROMOSOME].order=40,this._columns[Vr.a.START_POS].order=50,this._columns[Vr.a.END_POS].order=60,this._columns[Vr.a.REF_ALLELE].order=70,this._columns[Vr.a.VAR_ALLELE].order=80,this._columns[Vr.a.HGVSG].order=81,this._columns[Vr.a.HGVSC].order=82,this._columns[Vr.a.MUTATION_STATUS].order=90,this._columns[Vr.a.VALIDATION_STATUS].order=100,this._columns[Vr.a.MUTATION_TYPE].order=110,this._columns[Vr.a.VARIANT_TYPE].order=115,this._columns[Vr.a.CENTER].order=120,this._columns[Vr.a.TUMOR_ALLELE_FREQ].order=130,this._columns[Vr.a.VAR_READS].order=140,this._columns[Vr.a.REF_READS].order=150,this._columns[Vr.a.VAR_READS_N].order=170,this._columns[Vr.a.REF_READS_N].order=180,this._columns[Vr.a.COPY_NUM].order=181,this._columns[Vr.a.MRNA_EXPR].order=182,this._columns[Vr.a.COHORT].order=183,this._columns[Vr.a.COSMIC].order=184,this._columns[Vr.a.EXON].order=185,this._columns[Vr.a.GNOMAD].order=187,this._columns[Vr.a.CLINVAR].order=188,this._columns[Vr.a.DBSNP].order=189,this._columns[Vr.a.MRNA_EXPR].shouldExclude=function(){return!e.props.mrnaExprRankMolecularProfileId||e.getSamples().length>1},this._columns[Vr.a.SAMPLES].shouldExclude=function(){return e.getSamples().length<2&&!e.hasUncalledMutations},this._columns[Vr.a.COPY_NUM].shouldExclude=function(){return!e.props.discreteCNAMolecularProfileId||e.getSamples().length>1}}},{key:"hasUncalledMutations",get:function(){var e=[];return this.props.data?e=this.props.data:this.props.dataStore&&(e=this.props.dataStore.allData),e.some(function(e){return e.some(function(e){return Object($t.o)(e.molecularProfileId)})})}}])&&Hr(n.prototype,o),a&&Hr(n,a),t}();Xr.defaultProps=Object.assign(Object.assign({},Vr.b.defaultProps),{initialItemsPerPage:10,paginationProps:{itemsPerPageOptions:[10,25,50,100]},showGeneFilterMenu:!0,columns:[Vr.a.COHORT,Vr.a.MRNA_EXPR,Vr.a.COPY_NUM,Vr.a.ANNOTATION,Vr.a.HGVSG,Vr.a.REF_READS_N,Vr.a.VAR_READS_N,Vr.a.REF_READS,Vr.a.VAR_READS,Vr.a.START_POS,Vr.a.END_POS,Vr.a.REF_ALLELE,Vr.a.VAR_ALLELE,Vr.a.MUTATION_STATUS,Vr.a.VALIDATION_STATUS,Vr.a.CENTER,Vr.a.GENE,Vr.a.CHROMOSOME,Vr.a.PROTEIN_CHANGE,Vr.a.MUTATION_TYPE,Vr.a.VARIANT_TYPE,Vr.a.FUNCTIONAL_IMPACT,Vr.a.COSMIC,Vr.a.TUMOR_ALLELE_FREQ,Vr.a.SAMPLES,Vr.a.EXON,Vr.a.HGVSC,Vr.a.GNOMAD,Vr.a.CLINVAR,Vr.a.DBSNP,Vr.a.GENE_PANEL]}),Jr([I.computed],Xr.prototype,"hasUncalledMutations",null);var $r=Xr=Jr([Wt.observer],Xr),eo=n(856);function to(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function no(e){return(no=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ro(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oo(e,t){return(oo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ao(e){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var io=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ao(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},lo=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=no(t).call(this,e))||"object"!==ao(o)&&"function"!=typeof o?ro(r):o).state={pdfUrl:n.buildPDFUrl(e.pdfs[0].url)},n.handleSelection=n.handleSelection.bind(ro(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oo(e,t)}(t,r["Component"]),n=t,(o=[{key:"buildPDFUrl",value:function(e){return"https://docs.google.com/viewerng/viewer?url=".concat(e,"?pid=explorer&efh=false&a=v&chrome=false&embedded=true")}},{key:"handleSelection",value:function(){this.setState({pdfUrl:this.buildPDFUrl(this.pdfSelectList.options[this.pdfSelectList.selectedIndex].value)})}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement(l.If,{condition:this.props.pdfs.length>1},r.createElement("select",{ref:function(t){return e.pdfSelectList=t},style:{marginBottom:15},onChange:this.handleSelection},a.map(this.props.pdfs,function(e){return r.createElement("option",{value:e.url},e.name)}))),r.createElement(eo.a,{height:this.props.iframeHeight,url:this.state.pdfUrl}))}}])&&to(n.prototype,o),i&&to(n,i),t}(),uo=lo=io([Wt.observer],lo),co=n(605),so=n(1139);function po(e){return function(e,t){var n=a.reduce(e,function(e,t,n){return t&&t.length>0&&(e[n]=t),e},{});try{return Object(so.validate)(n,t),{isValid:!0,message:null}}catch(e){return{isValid:!1,message:e.message}}}(e,["studyId",["sampleId","caseId"]])}var fo=n(101);function mo(e){return(mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ho(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yo(e,t){return!t||"object"!==mo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function go(e){return(go=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bo(e,t){return(bo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),yo(this,go(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bo(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:"alert alert-danger urlError",role:"alert"},r.createElement("i",{className:"fa fa-warning","aria-hidden":"true"}),r.createElement("h3",null,"The URL is invalid"),r.createElement("ul",null,this.props.urlValidationError.split(".").map(function(e){return e.length>0?r.createElement("li",null,e):null})))}}])&&ho(n.prototype,o),a&&ho(n,a),t}();n(1140);var So=n(179),Eo=n(181),wo=n.n(Eo),To=n(857),Ao=n(688),Io=n(584),Oo=n(1141),Po=n.n(Oo);function _o(e){return(_o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ko(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Co(e,t){return!t||"object"!==_o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mo(e){return(Mo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Do(e,t){return(Do=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Co(this,Mo(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Do(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e="";if(this.props.show)if(!a.isUndefined(this.props.isTrialFeedback)&&this.props.isTrialFeedback){var t="https://docs.google.com/forms/d/e/1FAIpQLSfcoLRG0iWO_qUb4hfzWFQ1toP575EKCTwqPcXE9DmMzuS34w/viewform",n="entry.1655318994=".concat(this.props.userEmailAddress||""),o="entry.1782078941=".concat(encodeURIComponent(window.location.href));if(e="".concat(t,"?").concat(n,"&").concat(o,"&embedded=true"),!a.isUndefined(this.props.data)){var i="entry.1070287537=".concat(this.props.data.nctId||""),l="entry.699867040=".concat(this.props.data.protocolNo||"");e="".concat(t,"?").concat(n,"&").concat(o,"&").concat(i,"&").concat(l,"&embedded=true")}}else{var u="entry.251841421=".concat(this.props.userEmailAddress||""),c="entry.1295500928=".concat(encodeURIComponent(window.location.href));e="".concat("https://docs.google.com/forms/d/e/1FAIpQLSes1WuMattmo_aT8-34LaPRTC47vVzvdWMgYZ5tSuw8EHoLZw/viewform","?").concat(u,"&").concat(c,"&embedded=true")}return r.createElement(Ut.Modal,{show:this.props.show,onHide:this.props.onHide},r.createElement(Ut.Modal.Header,{closeButton:!0},r.createElement(Ut.Modal.Title,null,this.props.title)),r.createElement(Ut.Modal.Body,null,r.createElement("iframe",{src:e,style:{width:550,height:700,border:"none",marginLeft:"10px"},marginHeight:0,marginWidth:0},r.createElement("i",{className:"fa fa-spinner fa-pulse fa-2x"}))))}}])&&ko(n.prototype,o),i&&ko(n,i),t}();function jo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ro(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function No(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Go(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lo(e,t){return!t||"object"!==Uo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vo(e){return(Vo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bo(e,t)}function Bo(e,t){return(Bo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Uo(e){return(Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Wo,zo,Ho,Ko=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Uo(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};!function(e){e.TITLE="Title",e.MATCHING_CRITERIA="Matching Criteria",e.STATUS="Status"}(Wo||(Wo={})),function(e){e[e.STATUS=140]="STATUS"}(zo||(zo={})),function(e){e.MUTATION="Mutation",e.CNA="Copy Number Alteration",e.MSI="Microsatellite Instability",e.WILDTYPE="Wildtype"}(Ho||(Ho={}));var Yo=function(e){function t(){return Go(this,t),Lo(this,Vo(t).apply(this,arguments))}return Fo(t,V["b"]),t}(),Qo=function(e){function t(){var e;return Go(this,t),(e=Lo(this,Vo(t).apply(this,arguments))).showGeneralFeedback=!1,e._columns=[{name:Wo.TITLE,render:function(e){return r.createElement("div",null,r.createElement(l.If,{condition:e.protocolNo.length>0},r.createElement("div",null,r.createElement("a",{target:"_blank",href:"https://www.mskcc.org/cancer-care/clinical-trials/"+e.protocolNo},e.protocolNo))),r.createElement(l.If,{condition:e.nctId.length>0},r.createElement("div",null,r.createElement("a",{target:"_blank",href:"https://clinicaltrials.gov/ct2/show/"+e.nctId},e.nctId))),r.createElement("div",null,e.shortTitle),e.principalInvestigator&&r.createElement("div",{className:Po.a.icon},r.createElement("i",{className:"fa fa-user-md ".concat(Po.a.marginRight),"aria-hidden":"true"}),r.createElement(l.If,{condition:!a.isUndefined(e.principalInvestigator.url)},r.createElement(l.Then,null,r.createElement("a",{target:"_blank",href:e.principalInvestigator.url},e.principalInvestigator.full_name)),r.createElement(l.Else,null,e.principalInvestigator.full_name)),r.createElement(l.If,{condition:!a.isUndefined(e.principalInvestigator.email)},r.createElement("a",{href:"mailto:"+e.principalInvestigator.email},r.createElement("i",{className:"fa fa-envelope-o ".concat(Po.a.marginLeft),"aria-hidden":"true"})))))},width:e.columnWidths[Wo.TITLE]},{name:Wo.MATCHING_CRITERIA,render:function(t){return r.createElement("div",null,t.matches.map(function(o,a){return r.createElement("div",null,r.createElement("div",{className:Po.a.matchInfoContainer},r.createElement("div",{className:Po.a.genomicInfoContainer},r.createElement("div",null,o.matches.map(function(t,n){return r.createElement("div",{className:Po.a.criteriaContainer},r.createElement(l.If,{condition:t.matches||t.notMatches},r.createElement("div",{className:Po.a.firstLeft},t.matches&&e.getGenomicMatch(t.matches),t.notMatches&&e.getGenomicNotMatch(t.notMatches))),e.getClinicalMatch(t),r.createElement(l.If,{condition:n<o.matches.length-1},r.createElement("hr",{className:Po.a.criteriaHr})))})),r.createElement("div",{style:{marginTop:5}},r.createElement("span",null,"Matched Samples:"," ",e.getSampleIdIcons(o.sampleIds))),r.createElement(l.If,{condition:""!==o.armDescription},r.createElement("div",{style:{width:"75%"}},r.createElement("span",null,"Arm: ",o.armDescription))),r.createElement(l.If,{condition:o.drugs.length>0},r.createElement("div",null,r.createElement("span",null,r.createElement("img",{src:n(1142),style:{width:18,marginTop:-5,marginRight:5},alt:"drug icon"}),r.createElement("b",null,o.drugs.map(function(e){return e.join(" + ")}).join(", "))))))),r.createElement(l.If,{condition:a<t.matches.length-1},r.createElement("hr",{className:Po.a.criteriaHr})))}))},width:e.columnWidths[Wo.MATCHING_CRITERIA]},{name:Wo.STATUS,render:function(t){return r.createElement("div",{className:Po.a.statusContainer},r.createElement("a",{target:"_blank",href:"https://www.mskcc.org/cancer-care/clinical-trials/"+t.protocolNo},r.createElement("span",{className:Po.a.statusBackground},t.status)),r.createElement("span",{className:Po.a.feedback},r.createElement(Ut.Button,{type:"button",className:"btn btn-default btn-sm btn-xs "+Po.a.feedbackButton,onClick:function(){return e.openCloseFeedbackForm({nctId:t.nctId,protocolNo:t.protocolNo})}},"Feedback")))},sortBy:function(e){return e.status},width:e.columnWidths[Wo.STATUS]}],e}var o,i,u;return Fo(t,r["Component"]),o=t,(i=[{key:"getSampleIdIcons",value:function(e){var t=this,n=e;e.length>1&&(n=this.props.sampleManager.getSampleIdsInOrder().filter(function(t){return e.includes(t)}));return r.createElement(r.Fragment,null,n.map(function(e){return r.createElement("span",{className:Po.a.genomicSpan},t.props.sampleManager.getComponentForSample(e,1,""))}))}},{key:"getClinicalMatch",value:function(e){return r.createElement("div",{className:Po.a.firstRight,style:e.matches||e.notMatches?{}:{width:"100%"}},r.createElement("span",{className:Po.a.secondLeft},function(e){if(e.length>1){var t=e.map(function(e){return e.match(/\d+(\.?\d+)?/g).map(function(e){return Number(e)})});if(2===e.length){var n="",r="";return e[0].includes(">")&&e[1].includes("<")?(n=e[0].includes("=")?"".concat(t[0]," ≤"):"".concat(t[0]," <"),r=e[1].includes("=")?"≤ ".concat(t[1]):"< ".concat(t[1]),"".concat(n," Age ").concat(r)):e[0].includes("<")&&e[1].includes(">")?(n=e[1].includes("=")?"".concat(t[1]," ≤"):"".concat(t[1]," <"),r=e[0].includes("=")?"≤ ".concat(t[0]):"< ".concat(t[0]),"".concat(n," Age ").concat(r)):"Age: ".concat(e.join(", "))}return"Age: ".concat(e.join(", "))}return"".concat(e[0]," yrs old")}(e.trialAgeNumerical)),r.createElement("span",{className:Po.a.secondRight},e.trialOncotreePrimaryDiagnosis.positive.join(", "),e.trialOncotreePrimaryDiagnosis.negative.length>0&&r.createElement("span",null,r.createElement("b",null," except "),r.createElement(l.If,{condition:e.trialOncotreePrimaryDiagnosis.negative.length<4},r.createElement(l.Then,null,r.createElement("span",null,e.trialOncotreePrimaryDiagnosis.negative.join(", ").replace(/,(?!.*,)/gim," and"))),r.createElement(l.Else,null,r.createElement(b.c,{placement:"bottomLeft",trigger:["hover","focus"],overlay:this.tooltipClinicalContent(e.trialOncotreePrimaryDiagnosis.negative),destroyTooltipOnHide:!0,onPopupAlign:b.Q},r.createElement("span",null,e.trialOncotreePrimaryDiagnosis.negative.length+" cancer types")))))))}},{key:"openCloseFeedbackForm",value:function(e){this.selectedTrialFeedbackFormData=e}},{key:"getGenomicMatch",value:function(e){var t=this;return r.createElement(r.Fragment,null,e.MUTATION.map(function(e){return r.createElement("div",null,r.createElement("span",{style:{marginRight:5}},r.createElement("b",null,e.patientGenomic.trueHugoSymbol," "),e.patientGenomic.trueProteinChange.join(", ")),r.createElement(b.c,{placement:"bottomLeft",trigger:["hover","focus"],overlay:t.tooltipGenomicContent(e.genomicAlteration),destroyTooltipOnHide:!1,onPopupAlign:b.Q},r.createElement("i",{className:"fa fa-info-circle "+Po.a.icon})))}),e.MSI.length>0&&r.createElement("div",null,"Tumor is ",r.createElement("b",null,"MSI-H")),e.CNA.map(function(e){return r.createElement("div",null,t.getGenomicAlteration(e.genomicAlteration))}),e.WILDTYPE.map(function(e){return r.createElement("div",null,t.getGenomicAlteration(e.genomicAlteration))}))}},{key:"getGenomicNotMatch",value:function(e){var t=[];return e.MUTATION.length>0&&(t=e.MUTATION[0].genomicAlteration),e.CNA.length>0&&(t=t.concat(e.CNA[0].genomicAlteration)),r.createElement(r.Fragment,null,t.length>0&&r.createElement("div",null,r.createElement("span",{className:Po.a.genomicSpan},this.getDescriptionForNotMatches(t,3,Ho.MUTATION)),r.createElement(b.c,{placement:"bottomLeft",trigger:["hover","focus"],overlay:this.tooltipGenomicContent(t),destroyTooltipOnHide:!1,onPopupAlign:b.Q},r.createElement("i",{className:"fa fa-info-circle "+Po.a.icon}))),e.MSI.length>0&&r.createElement("div",null,"Tumor is ",r.createElement("b",null,"not MSI-H")),e.WILDTYPE.length>0&&r.createElement("div",null,r.createElement("span",{className:Po.a.genomicSpan},this.getDescriptionForNotMatches(e.WILDTYPE[0].genomicAlteration,3,Ho.WILDTYPE)),r.createElement(b.c,{placement:"bottomLeft",trigger:["hover","focus"],overlay:this.tooltipGenomicContent(e.WILDTYPE[0].genomicAlteration),destroyTooltipOnHide:!1,onPopupAlign:b.Q},r.createElement("i",{className:"fa fa-info-circle "+Po.a.icon}))))}},{key:"getGenomicAlteration",value:function(e){var t=e.map(function(e){return e.split(" ")});return r.createElement("div",null,t.map(function(e){return r.createElement("div",null,r.createElement("b",null,e[0])," ",e[1])}))}},{key:"tooltipGenomicContent",value:function(e){return r.createElement("div",{className:Po.a.tooltip},r.createElement("div",null,"Genomic selection"," ",e.length>1?"criteria":"criterion"," specified in the trial:"),e.map(function(e){return r.createElement("div",{className:Po.a.genomicSpan},r.createElement(l.If,{condition:e.includes("!")},r.createElement(l.Then,null,r.createElement("b",null,"Not "),e.replace(/!/g,"")),r.createElement(l.Else,null,e)))}))}},{key:"tooltipClinicalContent",value:function(e){return r.createElement("div",{className:Po.a.tooltip},r.createElement("ul",{className:Po.a.alterationUl},e.map(function(e){return r.createElement("li",null,e)})))}},{key:"getDescriptionForNotMatches",value:function(e,t,n){var r=new Set(Ro(e).map(function(e){return e.split(" ")[0]})),o="";return n===Ho.MUTATION?1===r.size?(o=Ro(r).join(", ")+" "+Ro(e).map(function(e){return e.split(" ")[1].replace(/!/g,"")}).join(", "),"Negative for ".concat(o)):(o=r.size<=t?Ro(r).join(", "):"".concat(r.size," genes"),"Negative for alterations in ".concat(o)):n===Ho.WILDTYPE?(o=r.size<=t?Ro(r).join(", "):"".concat(r.size," genes"),"Tumor doesn't have ".concat(o," defined by the trial")):""}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement("p",{style:{marginBottom:"0"}},"Curated genomic and clinical criteria from open clinical trials at Memorial Sloan Kettering. Please"," ",r.createElement("a",{href:"mailto:team@oncokb.org"},"contact us")," or submit"," ",r.createElement("a",{onClick:function(){return e.showGeneralFeedback=!0}},"feedback form")," ","if you have any questions."),!a.isUndefined(this.showGeneralFeedback)&&r.createElement(xo,{show:this.showGeneralFeedback,onHide:function(){return e.showGeneralFeedback=!1},title:"OncoKB Matched Trials General Feedback",userEmailAddress:Ct.b.serverConfig.user_email_address}),this.selectedTrialFeedbackFormData&&r.createElement(xo,{show:!!this.selectedTrialFeedbackFormData,data:this.selectedTrialFeedbackFormData,onHide:function(){return e.openCloseFeedbackForm()},isTrialFeedback:!0,title:"OncoKB Matched Trial Feedback",userEmailAddress:Ct.b.serverConfig.user_email_address}),r.createElement(Yo,{data:this.props.detailedTrialMatches,columns:this._columns,showCopyDownload:!1}),r.createElement("div",{className:Po.a.powered},"Powered by"," ",r.createElement("a",{href:"https://oncokb.org/",target:"_blank"},"OncoKB")," ","&"," ",r.createElement("a",{href:"https://matchminer.org/",target:"_blank"},"MatchMiner")))}},{key:"columnWidths",get:function(){var e;return jo(e={},Wo.STATUS,zo.STATUS),jo(e,Wo.TITLE,.35*(this.props.containerWidth-zo.STATUS)),jo(e,Wo.MATCHING_CRITERIA,.65*(this.props.containerWidth-zo.STATUS)),e}}])&&No(o.prototype,i),u&&No(o,u),t}();Ko([I.computed],Qo.prototype,"columnWidths",null),Ko([I.observable],Qo.prototype,"selectedTrialFeedbackFormData",void 0),Ko([I.observable],Qo.prototype,"showGeneralFeedback",void 0),Ko([I.action],Qo.prototype,"openCloseFeedbackForm",null);var qo=Qo=Ko([Wt.observer],Qo),Zo=(n(726),n(795),n(796),n(65)),Jo=n(188),Xo=n(89),$o=n(169);function ea(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ta(e,t){return!t||"object"!==oa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function na(e){return(na=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ra(e,t){return(ra=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oa(e){return(oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var aa=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":oa(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},ia=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ta(this,na(t).call(this,e,{studyId:{isSessionProp:!1},caseId:{isSessionProp:!1},sampleId:{isSessionProp:!1},resourceUrl:{isSessionProp:!1},genomicEvolutionSettings:{isSessionProp:!1,nestedObjectProps:{showTimeline:"",clusterHeatmap:"",transposeHeatmap:"",showMutationLabelsInHeatmap:"",showOnlySelectedMutationsInChart:"",logScaleChart:"",yAxisDataRangeInChart:"",showOnlySelectedMutationsInTable:""}}}))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ra(e,t)}(t,Jo["a"]),n=t,(r=[{key:"setActiveTab",value:function(e){this.updateURL({},"".concat(Xo.a.Patient,"/").concat(e))}},{key:"setResourceUrl",value:function(e){this.updateURL({resourceUrl:e})}},{key:"activeTabId",get:function(){return this.pathName.split("/").pop()||$o.a.Summary}}])&&ea(n.prototype,r),o&&ea(n,o),t}();aa([I.computed],ia.prototype,"activeTabId",null);var la,ua=n(579),ca=n(581),sa=n(576),pa=n(689),fa=n(9),da=n.n(fa),ma=n(644),ha=n.n(ma),ya=n(1143),ga=n.n(ya),ba=n(550),va=n(589),Sa=n(797);function Ea(e,t){var n=null;if(t){var o;switch(t.mutationStatus){case la.MUTATED_WITH_VAF:o="VAF: ".concat(t.vaf.toFixed(2));break;case la.MUTATED_BUT_NO_VAF:o="Mutated, but we don't have VAF data.";break;case la.PROFILED_WITH_READS_BUT_UNCALLED:case la.PROFILED_BUT_NOT_MUTATED:o="Mutation not detected (VAF: ".concat((t.vaf||0).toFixed(2),")");break;case la.NOT_PROFILED:default:o="".concat(t.sampleId," is not sequenced for ").concat(e.gene.hugoGeneSymbol," mutations.")}n=[r.createElement("span",null,"Sample ID: ",t.sampleId),r.createElement("br",null),r.createElement("span",null,o)]}return r.createElement("div",null,r.createElement("span",null,"Gene: ",e.gene.hugoGeneSymbol),r.createElement("br",null),r.createElement("span",null,"Protein Change: ",e.proteinChange),r.createElement("br",null),n)}!function(e){e[e.MUTATED_WITH_VAF=0]="MUTATED_WITH_VAF",e[e.MUTATED_BUT_NO_VAF=1]="MUTATED_BUT_NO_VAF",e[e.PROFILED_WITH_READS_BUT_UNCALLED=2]="PROFILED_WITH_READS_BUT_UNCALLED",e[e.PROFILED_BUT_NOT_MUTATED=3]="PROFILED_BUT_NOT_MUTATED",e[e.NOT_PROFILED=4]="NOT_PROFILED"}(la||(la={}));var wa=n(607),Ta=n(612);function Aa(e){return e.mutationStatus===la.MUTATED_WITH_VAF||e.mutationStatus===la.PROFILED_WITH_READS_BUT_UNCALLED}function Ia(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Oa(){return(Oa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Pa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ka(e,t,n){return t&&_a(e.prototype,t),n&&_a(e,n),e}function Ca(e,t){return!t||"object"!==ja(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ma(e){return(Ma=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Da(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xa(e,t)}function xa(e,t){return(xa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ja(e){return(ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ra=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ja(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Na=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Ga="Show only selected mutations",La=i.a.cloneDeep(sa.d);La.axis.style.grid.strokeOpacity=1;var Va=function(e){function t(){return Pa(this,t),Ca(this,Ma(t).apply(this,arguments))}return Da(t,r["Component"]),ka(t,[{key:"render",value:function(){return this.props.scaleCallback(this.props.scale),r.createElement("g",null)}}]),t}(),Fa=function(e){function t(){return Pa(this,t),Ca(this,Ma(t).apply(this,arguments))}return Da(t,r["Component"]),ka(t,[{key:"render",value:function(){var e=this.props,t=e.sampleIdOrder,n=e.sampleManager,o=e.text,a=Na(e,["sampleIdOrder","sampleManager","text"]),i=t[o];return r.createElement("g",{transform:"rotate(50, ".concat(a.x,", ").concat(a.y,")")},r.createElement(Te,{label:o+1,color:n?n.getColorForSample(i):"black",x:a.x+10,y:a.y-5,r:6,textDy:-1}),r.createElement(pa.a,Oa({text:i},a,{verticalAnchor:"start",textAnchor:"start",maxWidth:50,dx:20})))}}]),t}(),Ba=function(e){function t(){var e;return Pa(this,t),(e=Ca(this,Ma(t).apply(this,arguments))).tooltipDatum=null,e.tooltipOnPoint=!1,e.mouseEvents=e.makeMouseEvents(),e.mouseEvent=null,e.scale=null,e.dragRect={startX:0,startY:0,currentX:0,currentY:0},e.dragging=!1,e}return Da(t,r["Component"]),ka(t,[{key:"scaleCallback",value:function(e){this.scale=e}},{key:"makeMouseEvents",value:function(){var e=this;return[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:Object(I.action)(function(t){var n;return t.datum?(n=t.datum,e.tooltipOnPoint=!0):t.data.length>0&&(n=t.data[0],e.tooltipOnPoint=!1),e.tooltipDatum=n,e.props.dataStore.setMouseOverMutation(e.tooltipDatum.mutation),null})}]},onMouseOut:function(){return[{target:"data",mutation:Object(I.action)(function(){return e.tooltipDatum=null,e.tooltipOnPoint=!1,e.props.dataStore.setMouseOverMutation(null),null})}]},onClick:function(){return[{target:"data",mutation:Object(I.action)(function(t){var n;t.datum?n=t.datum:t.data.length>0&&(n=t.data[0]),e.props.dataStore.toggleSelectedMutation(n.mutation)})}]}}}]}},{key:"selectPointsInDragRect",value:function(){var e=this;if(this.scale){var t=this.renderData.grayPoints.concat(i.a.flatten(this.renderData.lineData)),n={x:[Math.min(this.dragRect.startX,this.dragRect.currentX),Math.max(this.dragRect.startX,this.dragRect.currentX)],y:[Math.max(this.dragRect.startY,this.dragRect.currentY),Math.min(this.dragRect.startY,this.dragRect.currentY)]},r={x:n.x.map(function(t){return Object(Sa.a)(e.scale.x,t)}),y:n.y.map(function(t){return Object(Sa.b)(e.scale.y,t)})},o=t.filter(function(e){return e.x>=r.x[0]&&e.x<=r.x[1]&&e.y>=r.y[0]&&e.y<=r.y[1]});this.props.dataStore.setSelectedMutations(o.map(function(e){return e.mutation}))}}},{key:"onMouseMove",value:function(e){if(e.persist(),this.mouseEvent=e,this.dragging&&e.target.classList.contains("draggingCover")){var t=s()(e.target).offset();this.dragRect.currentX=e.pageX-t.left,this.dragRect.currentY=e.pageY-t.top}}},{key:"onMouseDown",value:function(e){if("svg"===e.target.nodeName.toLowerCase()){this.dragging=!0;var t=s()(e.target).offset();this.dragRect.startX=e.pageX-t.left,this.dragRect.startY=e.pageY-t.top,this.dragRect.currentX=this.dragRect.startX,this.dragRect.currentY=this.dragRect.startY}}},{key:"onMouseUp",value:function(e){this.dragging&&(this.dragging=!1,this.selectPointsInDragRect())}},{key:"tooltipFunction",value:function(e){return Ea(e.mutation,this.tooltipOnPoint?{mutationStatus:e.mutationStatus,sampleId:e.sampleId,vaf:e.y}:void 0)}},{key:"getTooltipComponent",value:function(){if(this.tooltipDatum&&this.mouseEvent){var e=this.mouseEvent.clientY<250?"bottom":"top";return r.createElement(ba.a,{isOpened:!0,node:document.body},r.createElement(Ut.Popover,{className:da()("cbioportal-frontend","cbioTooltip",ha.a.Tooltip,ga.a.Tooltip),positionLeft:this.mouseEvent.pageX,positionTop:this.mouseEvent.pageY+("top"===e?-7:7),style:{transform:"top"===e?"translate(-50%,-100%)":"translate(-50%,0%)",maxWidth:400},placement:e},this.tooltipFunction(this.tooltipDatum)))}return r.createElement("span",null)}},{key:"getHighlights",value:function(){var e=this,t=[];this.props.dataStore.onlyShowSelectedInVAFChart||t.push.apply(t,Ia(this.props.dataStore.selectedMutations));var n=this.props.dataStore.getMouseOverMutation();return n&&t.push(n),t.length>0&&null!==this.scale?t.map(function(t){var n=e.mutationToDataPoints.get({proteinChange:t.proteinChange,hugoGeneSymbol:t.gene.hugoGeneSymbol});if(!n)return r.createElement("g",null);var o=null;if(n.length>1){for(var a="M ".concat(e.scale.x(n[0].x)," ").concat(e.scale.y(e.y(n[0]))),i=1;i<n.length;i++)a="".concat(a," L ").concat(e.scale.x(n[i].x)," ").concat(e.scale.y(e.y(n[i])));o=r.createElement("path",{style:{stroke:"#318ec4",strokeOpacity:1,strokeWidth:6,fillOpacity:0,pointerEvents:"none"},d:a})}var l=n.map(function(t){return r.createElement("path",{d:"M ".concat(e.scale.x(t.x)," ").concat(e.scale.y(e.y(t)),"\n                            m -").concat(3,", 0\n                            a ").concat(3,", ").concat(3," 0 1,0 ").concat(6,",0\n                            a ").concat(3,", ").concat(3," 0 1,0 ").concat(-6,",0\n                            "),style:{stroke:"#318ec4",fill:"white",strokeWidth:2,opacity:1,pointerEvents:"none"}})});return r.createElement("g",null,o,l)}):r.createElement("g",null)}},{key:"getDragRect",value:function(){if(this.dragging){var e=Math.min(this.dragRect.startX,this.dragRect.currentX),t=Math.min(this.dragRect.startY,this.dragRect.currentY),n=Math.abs(this.dragRect.startX-this.dragRect.currentX),o=Math.abs(this.dragRect.startY-this.dragRect.currentY);return[r.createElement("rect",{fill:"black",fillOpacity:"0",x:0,y:0,width:this.svgWidth,height:this.svgHeight,className:"draggingCover"}),r.createElement("rect",{style:{pointerEvents:"none"},fill:"red",fillOpacity:"0.5",x:e,y:t,width:n,height:o})]}return r.createElement("g",null)}},{key:"y",value:function(e){return this.props.logScale?Math.log10(Math.max(.001,e.y)):e.y}},{key:"tickFormatY",value:function(e,t,n){if(this.props.logScale){var r=Object(wa.a)(e,n,function(e){return Math.pow(10,e)});return 0===t&&e<=.001&&e>0?"≤ ".concat(r):r}return Object(wa.a)(e,n)}},{key:"render",value:function(){var e=this;return this.renderData.lineData.length>0?r.createElement(r.Fragment,null,r.createElement("svg",{"data-test":"VAFLineChart",ref:this.props.svgRef,style:{width:this.svgWidth,height:this.svgHeight,pointerEvents:"all"},height:this.svgHeight,width:this.svgWidth,role:"img",viewBox:"0 0 ".concat(this.svgWidth," ").concat(this.svgHeight),onMouseMove:this.onMouseMove,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},r.createElement(ca.VictoryChart,{theme:La,standalone:!1,domain:{y:this.yDomain},width:this.chartWidth,height:this.chartHeight,domainPadding:20,singleQuadrantDomainPadding:!1,style:{parent:{backgroundColor:"white"}}},r.createElement(ca.VictoryAxis,{dependentAxis:!0,label:"Allele Freq",axisLabelComponent:r.createElement(ca.VictoryLabel,{dy:-28}),crossAxis:!1,offsetX:50,tickFormat:this.tickFormatY,orientation:"left"}),r.createElement(ca.VictoryAxis,{style:{grid:{strokeOpacity:function(e,t){return 0===t?0:1}}},tickValues:this.props.samples.map(function(e,t){return t}),tickLabelComponent:r.createElement(Fa,{sampleIdOrder:this.sampleIdOrder,sampleManager:this.props.sampleManager}),crossAxis:!1,offsetY:50,orientation:"bottom"}),this.renderData.lineData.map(function(t){return t.length>1?[r.createElement(ca.VictoryLine,{style:{data:{stroke:"#000000",strokeOpacity:.5,pointerEvents:"none"}},data:t,y:e.y}),r.createElement(ca.VictoryLine,{style:{data:{strokeOpacity:0,pointerEvents:"stroke",strokeWidth:6}},data:t,events:e.mouseEvents,y:e.y})]:null}),r.createElement(Va,{scaleCallback:this.scaleCallback}),this.renderData.grayPoints.length>0&&r.createElement(ca.VictoryScatter,{style:{data:{stroke:"gray",fill:"white",strokeWidth:2}},size:2.5,data:this.renderData.grayPoints,events:this.mouseEvents,y:this.y}),this.renderData.lineData.length>0&&r.createElement(ca.VictoryScatter,{style:{data:{stroke:"#000000",fill:"white",strokeWidth:2}},size:3,data:i.a.flatten(this.renderData.lineData),events:this.mouseEvents,y:this.y})),r.createElement(Wt.Observer,null,this.getHighlights),r.createElement(Wt.Observer,null,this.getDragRect)),r.createElement(Wt.Observer,null,this.getTooltipComponent)):r.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:this.svgHeight,width:"100%"}},'No VAF data to show. Select mutations below or un-check the "',Ga,'" filter above.')}},{key:"mutations",get:function(){var e=this;return this.props.dataStore.onlyShowSelectedInVAFChart?this.props.dataStore.allData.filter(function(t){return e.props.dataStore.isMutationSelected(t[0])}):this.props.dataStore.allData}},{key:"chartWidth",get:function(){return Math.min(100*this.props.samples.length+100,Io.a.size.width-100)}},{key:"chartHeight",get:function(){return 300}},{key:"svgWidth",get:function(){return this.chartWidth+35}},{key:"svgHeight",get:function(){return this.chartHeight+35}},{key:"sampleIdOrder",get:function(){return this.props.sampleManager?this.props.sampleManager.getSampleIdsInOrder():this.props.samples.map(function(e){return e.sampleId})}},{key:"sampleIdIndex",get:function(){return Object(b.W)(this.sampleIdOrder)}},{key:"renderData",get:function(){return function(e,t,n,r,o){var a=[],l=[],u=!0,c=!1,s=void 0;try{for(var p,f=t[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var d=p.value,m=[],h={},y=!0,g=!1,b=void 0;try{for(var v,S=d[Symbol.iterator]();!(y=(v=S.next()).done);y=!0){var E=v.value,w=E.uniqueSampleKey,T=E.sampleId,A=Object($t.j)(E);null!==A?"uncalled"===E.mutationStatus.toLowerCase()?E.tumorAltCount>0&&(m.push({x:n[T],y:A,sampleId:T,mutation:E,mutationStatus:la.PROFILED_WITH_READS_BUT_UNCALLED}),h[w]=!0):(m.push({x:n[T],y:A,sampleId:T,mutation:E,mutationStatus:la.MUTATED_WITH_VAF}),h[w]=!0):(m.push({x:n[T],sampleId:T,mutation:E,mutationStatus:la.MUTATED_BUT_NO_VAF}),h[w]=!0)}}catch(e){g=!0,b=e}finally{try{y||null==S.return||S.return()}finally{if(g)throw b}}var I=d[0],O=!0,P=!1,_=void 0;try{for(var k,C=e[Symbol.iterator]();!(O=(k=C.next()).done);O=!0){var M=k.value;M.uniqueSampleKey in h||(Object(Ta.a)(M.uniqueSampleKey,r,I.gene.hugoGeneSymbol,o)?m.push({x:n[M.sampleId],y:0,sampleId:M.sampleId,mutation:I,mutationStatus:la.PROFILED_BUT_NOT_MUTATED}):m.push({x:n[M.sampleId],sampleId:M.sampleId,mutation:I,mutationStatus:la.NOT_PROFILED}))}}catch(e){P=!0,_=e}finally{try{O||null==C.return||C.return()}finally{if(P)throw _}}for(m=i.a.sortBy(m,function(e){return e.x});m.length>0&&!Aa(m[0]);)m.shift();for(;m.length>0&&!Aa(m[m.length-1]);)m.pop();if(0!==m.length){for(var D=[],x=[],j=0;j<m.length;j++)if(0!==j&&j!==m.length-1&&void 0===m[j].y){var R=0,N=0;for(R=j;R>=0&&void 0===m[R].y;R--);for(N=j;N<=m.length-1&&void 0===m[N].y;N++);var G=1/(N-R);m[j].y=(j-R)*G*(m[R].y+m[N].y),x.push(m[j])}else D.push(m[j]);a.push.apply(a,x),l.push(D)}}}catch(e){c=!0,s=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw s}}return{lineData:l,grayPoints:a}}(this.props.samples,this.mutations,this.sampleIdIndex,this.props.mutationProfileId,this.props.coverageInformation)}},{key:"mutationToDataPoints",get:function(){var e=new va.a,t=!0,n=!1,r=void 0;try{for(var o,a=this.renderData.lineData[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;e.set({hugoGeneSymbol:i[0].mutation.gene.hugoGeneSymbol,proteinChange:i[0].mutation.proteinChange},i)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"yDomain",get:function(){var e;if(this.props.zeroToOneAxis)e=[0,1];else{var t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=!0,o=!1,a=void 0;try{for(var i,l=this.renderData.lineData[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value,c=!0,s=!1,p=void 0;try{for(var f,d=u[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){var m=f.value;t=Math.min(m.y,t),n=Math.max(m.y,n)}}catch(e){s=!0,p=e}finally{try{c||null==d.return||d.return()}finally{if(s)throw p}}}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}e=[t,n]}return this.props.logScale&&(e=e.map(function(e){return Math.log10(Math.max(e,.001))})),e}}]),t}();Ra([I.observable.ref],Ba.prototype,"tooltipDatum",void 0),Ra([I.observable],Ba.prototype,"tooltipOnPoint",void 0),Ra([I.observable.ref],Ba.prototype,"mouseEvent",void 0),Ra([I.observable.ref],Ba.prototype,"scale",void 0),Ra([I.observable],Ba.prototype,"dragRect",void 0),Ra([I.observable],Ba.prototype,"dragging",void 0),Ra([z.default],Ba.prototype,"scaleCallback",null),Ra([I.computed],Ba.prototype,"mutations",null),Ra([I.action],Ba.prototype,"selectPointsInDragRect",null),Ra([z.default,I.action],Ba.prototype,"onMouseMove",null),Ra([z.default,I.action],Ba.prototype,"onMouseDown",null),Ra([z.default,I.action],Ba.prototype,"onMouseUp",null),Ra([I.computed],Ba.prototype,"chartWidth",null),Ra([I.computed],Ba.prototype,"chartHeight",null),Ra([I.computed],Ba.prototype,"svgWidth",null),Ra([I.computed],Ba.prototype,"svgHeight",null),Ra([I.computed],Ba.prototype,"sampleIdOrder",null),Ra([I.computed],Ba.prototype,"sampleIdIndex",null),Ra([I.computed],Ba.prototype,"renderData",null),Ra([I.computed],Ba.prototype,"mutationToDataPoints",null),Ra([z.default],Ba.prototype,"getTooltipComponent",null),Ra([z.default],Ba.prototype,"getHighlights",null),Ra([z.default],Ba.prototype,"getDragRect",null),Ra([z.default],Ba.prototype,"y",null),Ra([I.computed],Ba.prototype,"yDomain",null),Ra([z.default],Ba.prototype,"tickFormatY",null);var Ua=Ba=Ra([Wt.observer],Ba),Wa=n(595);function za(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ha(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ka(e,t){return!t||"object"!==qa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ya(e){return(Ya=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qa(e,t){return(Qa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qa(e){return(qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Za=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":qa(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};function Ja(e,t){return e[0].proteinChange===t.proteinChange&&e[0].gene.hugoGeneSymbol===t.gene.hugoGeneSymbol}function Xa(e){return'{ "proteinChange": "'.concat(e.proteinChange,'", "hugoGeneSymbol": "').concat(e.gene.hugoGeneSymbol,'" }')}var $a=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ka(this,Ya(t).call(this,e))).urlWrapper=n,r.mouseOverMutation=null,r.selectedMutationsMap=I.observable.map(),r.dataHighlighter=function(e){var t=[];return r.onlyShowSelectedInTable||t.push.apply(t,za(r.selectedMutations)),r.mouseOverMutation&&t.push(r.mouseOverMutation),i.a.some(t,function(t){return Ja(e,t)})},r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qa(e,t)}(t,Wa["a"]),n=t,(r=[{key:"getMouseOverMutation",value:function(){return this.mouseOverMutation}},{key:"setMouseOverMutation",value:function(e){this.mouseOverMutation=e}},{key:"setOnlyShowSelectedInTable",value:function(e){this.urlWrapper.updateURL(function(t){return t.genomicEvolutionSettings.showOnlySelectedMutationsInTable=e.toString(),t})}},{key:"setOnlyShowSelectedInVAFChart",value:function(e){this.urlWrapper.updateURL(function(t){return t.genomicEvolutionSettings.showOnlySelectedMutationsInChart=e.toString(),t})}},{key:"toggleSelectedMutation",value:function(e){var t=Xa(e);this.selectedMutationsMap.has(t)?this.selectedMutationsMap.delete(t):this.selectedMutationsMap.set(t,e)}},{key:"setSelectedMutations",value:function(e){this.selectedMutationsMap.clear();var t=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;this.toggleSelectedMutation(i),1}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"isMutationSelected",value:function(e){return this.selectedMutationsMap.has(Xa(e))}},{key:"onlyShowSelectedInTable",get:function(){return"true"===this.urlWrapper.query.genomicEvolutionSettings.showOnlySelectedMutationsInTable}},{key:"onlyShowSelectedInVAFChart",get:function(){return"true"===this.urlWrapper.query.genomicEvolutionSettings.showOnlySelectedMutationsInChart}},{key:"selectedMutations",get:function(){return this.selectedMutationsMap.entries().map(function(e){return e[1]})}},{key:"sortedFilteredData",get:function(){var e=this,t=this.filterString.toUpperCase(),n=this.filterString.toLowerCase();return this.sortedData.filter(function(r){var o=e.dataFilter(r,e.filterString,t,n),a=!e.onlyShowSelectedInTable||0===e.selectedMutations.length||i.a.some(e.selectedMutations,function(e){return Ja(r,e)});return o&&a})}}])&&Ha(n.prototype,r),o&&Ha(n,o),t}();Za([I.observable.ref],$a.prototype,"mouseOverMutation",void 0),Za([I.action],$a.prototype,"setMouseOverMutation",null),Za([I.action],$a.prototype,"setOnlyShowSelectedInTable",null),Za([I.action],$a.prototype,"setOnlyShowSelectedInVAFChart",null),Za([I.action],$a.prototype,"toggleSelectedMutation",null),Za([I.action],$a.prototype,"setSelectedMutations",null),Za([I.computed],$a.prototype,"selectedMutations",null),Za([I.computed],$a.prototype,"sortedFilteredData",null);var ei=n(742),ti=[{type:"rectangle",fill:"rgba(255,255,255,1)",z:1e3},{type:"line",stroke:"rgba(190,190,190,1)","stroke-width":1,x1:20,x2:80,y1:50,y2:50,z:1e3}];function ni(e){return"".concat(e.gene.hugoGeneSymbol," ").concat(e.proteinChange)}function ri(e,t,n,r){var o=i.a.keyBy(t,O.N),a=i.a.groupBy(t,function(e){return e.uniqueSampleKey}),l=i.a.mapValues(o,function(){return!1}),u=[],c=!0,s=!1,p=void 0;try{for(var f,d=function(){var e=f.value,t=a[e.uniqueSampleKey]||[],i={},c=!0,s=!1,p=void 0;try{for(var d,m=t[Symbol.iterator]();!(c=(d=m.next()).done);c=!0){var h=d.value,y=Object(O.N)(h),g=r===bi.SAMPLE_TRACKS?y:e.sampleId,b="uncalled"===h.mutationStatus.toLowerCase();if(!b||h.tumorAltCount>0){i[y]=!0;var v=Object($t.j)(h),S=void 0;b?S=la.PROFILED_WITH_READS_BUT_UNCALLED:null===v?S=la.MUTATED_BUT_NO_VAF:(S=la.MUTATED_WITH_VAF,l[y]=!0),u.push({profile_data:v,sample:e.sampleId,patient:e.patientId,study_id:e.studyId,hugo_gene_symbol:"",mutation:h,uid:g,mutationId:y,mutationStatus:S})}}}catch(e){s=!0,p=e}finally{try{c||null==m.return||m.return()}finally{if(s)throw p}}var E=Object.keys(o).filter(function(e){return!(e in i)}).map(function(e){return o[e]}),w=!0,T=!1,A=void 0;try{for(var I,P=E[Symbol.iterator]();!(w=(I=P.next()).done);w=!0){var _=I.value,k=Object(O.N)(_),C=r===bi.SAMPLE_TRACKS?k:e.sampleId,M=Object(Ta.a)(e.uniqueSampleKey,_.molecularProfileId,_.gene.hugoGeneSymbol,n);u.push({profile_data:null,sample:e.sampleId,patient:e.patientId,study_id:e.studyId,hugo_gene_symbol:"",mutation:_,uid:C,mutationId:k,mutationStatus:M?la.PROFILED_BUT_NOT_MUTATED:la.NOT_PROFILED,na:!M})}}catch(e){T=!0,A=e}finally{try{w||null==P.return||P.return()}finally{if(T)throw A}}},m=e[Symbol.iterator]();!(c=(f=m.next()).done);c=!0)d()}catch(e){s=!0,p=e}finally{try{c||null==m.return||m.return()}finally{if(s)throw p}}return u=u.filter(function(e){return l[e.mutationId]}),r===bi.SAMPLE_TRACKS?i.a.groupBy(u,function(e){return e.sample}):i.a.groupBy(u,function(e){return e.mutationId})}var oi=n(590),ai=n(608),ii=n(186),li=n.n(ii),ui=(n(755),n(1144)),ci=n.n(ui),si=n(21),pi=n.n(si);function fi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function di(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mi(e){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yi(e,t){return(yi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gi(e){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var bi,vi=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":gi(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};!function(e){e[e.MUTATION_TRACKS=0]="MUTATION_TRACKS",e[e.SAMPLE_TRACKS=1]="SAMPLE_TRACKS"}(bi||(bi={}));var Si=2,Ei={init_cell_width:20,init_cell_padding:1,cell_padding_off_cell_width_threshold:10},wi=function(e){function t(e){var n,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=mi(t).call(this,e),(n=!a||"object"!==gi(a)&&"function"!=typeof a?hi(o):a).oncoprint=null,n.oncoprintComponent=null,n.horzZoomSliderState=100,n.minZoom=0,n.sortConfig=Object(b.S)({await:function(){return[n.sampleIdOrder]},invoke:function(){return n.clustered?Promise.resolve({clusterHeatmapTrackGroupIndex:Si}):n.mode===bi.MUTATION_TRACKS?Promise.resolve({order:n.sampleIdOrder.result}):Promise.resolve({})}}),n.sampleIdOrder=Object(b.S)({await:function(){return[n.props.store.samples]},invoke:function(){return n.props.sampleManager?Promise.resolve(n.props.sampleManager.getSampleIdsInOrder()):Promise.resolve(n.props.store.samples.result.map(function(e){return e.sampleId}))}}),n.mutationWithIdOrder=Object(b.S)({invoke:function(){var e=[],t=!0,r=!1,o=void 0;try{for(var a,l=n.mutations[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var u=a.value;e.push({mutation:u,id:Object(O.N)(u)})}}catch(e){r=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}return Promise.resolve(i.a.chain(e).uniqBy(function(e){return e.id}).sortBy(function(e){return ni(e.mutation)}).value())}}),n.mutationModeColumnLabels=Object(b.S)({await:function(){return[n.sampleIdOrder]},invoke:function(){return Promise.resolve(n.sampleIdOrder.result.reduce(function(e,t,r){var o=r+1;return e[t]={text:o.toString(),angle_in_degrees:0,text_color:"#ffffff",circle_color:n.props.sampleManager.getColorForSample(t),left_padding_percent:o<10?-15:-34},e},{}))}}),n.sampleModeColumnLabels=Object(b.S)({invoke:function(){var e={};if(n.showMutationLabels){var t=!0,r=!1,o=void 0;try{for(var a,i=n.mutations[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var l=a.value;e[Object(O.N)(l)]={text:ni(l)}}}catch(e){r=!0,o=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw o}}}return Promise.resolve(e)}}),n.sampleModeHeatmapTracksOrder=Object(b.S)({await:function(){return[n.sampleIdOrder]},invoke:function(){return n.clustered?Promise.resolve(void 0):Promise.resolve(fi({},Si,n.sampleIdOrder.result))}}),n.mutationModeHeatmapTracksOrder=Object(b.S)({await:function(){return[n.mutationWithIdOrder]},invoke:function(){return n.clustered?Promise.resolve(void 0):Promise.resolve(fi({},Si,n.mutationWithIdOrder.result.map(function(e){return e.id})))}}),n.sampleModeHeatmapTracks=Object(b.S)({await:function(){return[n.props.store.samples,n.sampleIdOrder,n.props.store.mutationMolecularProfile,n.props.store.coverageInformation]},invoke:function(){if(0===n.mutations.length)return Promise.resolve([]);var e=n.props.store.mutationMolecularProfile.result,t=ri(n.props.store.samples.result,n.mutations,n.props.store.coverageInformation.result,bi.SAMPLE_TRACKS),r=[];return n.sampleIdOrder.result.forEach(function(o,a){var i=t[o];if(i&&i.length){var l=n.props.sampleManager?n.props.sampleManager.getColorForSample(o):void 0,u=a+1;r.push({key:o,label:"".concat(u),description:"".concat(o," data from ").concat(e.molecularProfileId),molecularProfileId:e.molecularProfileId,molecularAlterationType:e.molecularAlterationType,datatype:e.datatype,data:i,trackGroupIndex:Si,naLegendLabel:"Not sequenced",labelColor:l?"white":"black",labelCircleColor:l,labelFontWeight:"normal",labelLeftPadding:u<10?21:17,hasColumnSpacing:!0,tooltip:function(e){var t=e[0],n=Ea(t.mutation,{sampleId:t.sample,mutationStatus:t.mutationStatus,vaf:t.profile_data}),r=document.createElement("div");pi.a.render(n,r);var o=r.innerHTML;return s()(o)},sortDirectionChangeable:!1,initSortDirection:-1,movable:!1,customNaShapes:ti})}}),Promise.resolve(r)}}),n.mutationModeHeatmapTracks=Object(b.S)({await:function(){return[n.props.store.samples,n.mutationWithIdOrder,n.props.store.mutationMolecularProfile,n.props.store.coverageInformation]},invoke:function(){if(0===n.mutations.length)return Promise.resolve([]);var e=n.props.store.mutationMolecularProfile.result,t=ri(n.props.store.samples.result,n.mutations,n.props.store.coverageInformation.result,bi.MUTATION_TRACKS),r=[];return n.mutationWithIdOrder.result.forEach(function(n){var o=t[n.id];o&&o.length&&r.push({key:n.id,label:ni(n.mutation),description:"".concat(ni(n.mutation)," data from ").concat(e.molecularProfileId),molecularProfileId:e.molecularProfileId,molecularAlterationType:e.molecularAlterationType,datatype:e.datatype,data:o,trackGroupIndex:Si,naLegendLabel:"Not sequenced",labelFontWeight:"normal",hasColumnSpacing:!0,tooltip:function(e){var t=e[0],n=Ea(t.mutation,{sampleId:t.sample,mutationStatus:t.mutationStatus,vaf:t.profile_data}),r=document.createElement("div");pi.a.render(n,r);var o=r.innerHTML;return s()(o)},sortDirectionChangeable:!1,initSortDirection:-1,movable:!1,customNaShapes:ti})}),Promise.resolve(r)}}),n.oncoprintUI=Object(ua.a)({await:function(){return[n.heatmapTracks,n.heatmapTracksOrder,n.columnLabels,n.sortConfig]},render:function(){return 0===n.heatmapTracks.result.length?null:r.createElement("div",{className:"borderedChart",style:{display:"inline-block"}},n.header,r.createElement(ei.c,{key:"MutationOncoprint",ref:n.oncoprintComponentRef,oncoprintRef:n.oncoprintRef,highlightedIds:n.highlightedIds,highlightedTracks:n.highlightedTracks,initParams:Ei,showTrackLabels:!(n.mode===bi.MUTATION_TRACKS&&!n.showMutationLabels),columnLabels:n.columnLabels.result,clinicalTracks:[],geneticTracks:[],genesetHeatmapTracks:[],heatmapTracks:n.heatmapTracks.result,heatmapTracksOrder:n.heatmapTracksOrder.result,divId:"MutationHeatmap",width:Io.a.size.width-100,caseLinkOutInTooltips:!1,sortConfig:n.sortConfig.result}))},renderPending:function(){return r.createElement(fo.a,{isLoading:!0})},renderError:function(){return r.createElement(oi.a,null)},showLastRenderWhenPending:!0}),window.mutationOncoprint=hi(n),n.minZoomUpdater=setInterval(function(){n.oncoprint&&(n.minZoom=n.oncoprint.model.getMinHorzZoom())},500),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yi(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentWillUnmount",value:function(){clearInterval(this.minZoomUpdater)}},{key:"oncoprintComponentRef",value:function(e){this.oncoprintComponent=e}},{key:"oncoprintRef",value:function(e){var t=this;this.oncoprint=e,this.oncoprint.onHorzZoom(function(e){return t.horzZoomSliderState=e}),this.horzZoomSliderState=this.oncoprint.getHorzZoom(),this.oncoprint.onCellMouseOver(function(e,n){if(t.mode===bi.SAMPLE_TRACKS&&null!==e){var r=t.mutationKeyToMutation[e];r&&t.props.dataStore.setMouseOverMutation(r)}else if(t.mode===bi.MUTATION_TRACKS&&void 0!==n){if(t.oncoprintComponent){var o=t.oncoprintComponent.getTrackSpecKey(n),a=o&&t.mutationKeyToMutation[o];a&&t.props.dataStore.setMouseOverMutation(a)}}else t.props.dataStore.setMouseOverMutation(null)}),this.oncoprint.onCellClick(function(e,n){if(t.mode===bi.SAMPLE_TRACKS&&null!==e){var r=t.mutationKeyToMutation[e];r&&t.props.dataStore.toggleSelectedMutation(r)}else if(t.mode===bi.MUTATION_TRACKS&&void 0!==n){if(t.oncoprintComponent){var o=t.oncoprintComponent.getTrackSpecKey(n),a=o&&t.mutationKeyToMutation[o];a&&t.props.dataStore.toggleSelectedMutation(a)}}else t.props.dataStore.setSelectedMutations([])})}},{key:"updateOncoprintHorzZoom",value:function(){this.oncoprint&&this.oncoprint.setHorzZoom(this.horzZoomSliderState)}},{key:"onClickZoomIn",value:function(){this.oncoprint&&this.oncoprint.setHorzZoom(this.oncoprint.getHorzZoom()/.7)}},{key:"onClickZoomOut",value:function(){this.oncoprint&&this.oncoprint.setHorzZoom(.7*this.oncoprint.getHorzZoom())}},{key:"render",value:function(){return this.oncoprintUI.component}},{key:"showMutationLabels",get:function(){var e=this.props.urlWrapper.query.genomicEvolutionSettings.showMutationLabelsInHeatmap;return!e||"true"===e},set:function(e){this.props.urlWrapper.updateURL(function(t){return t.genomicEvolutionSettings.showMutationLabelsInHeatmap=e.toString(),t})}},{key:"clustered",get:function(){var e=this.props.urlWrapper.query.genomicEvolutionSettings.clusterHeatmap;return!e||"true"===e},set:function(e){this.props.urlWrapper.updateURL(function(t){return t.genomicEvolutionSettings.clusterHeatmap=e.toString(),t})}},{key:"mode",get:function(){return"true"===this.props.urlWrapper.query.genomicEvolutionSettings.transposeHeatmap?bi.MUTATION_TRACKS:bi.SAMPLE_TRACKS},set:function(e){this.props.urlWrapper.updateURL(function(t){return t.genomicEvolutionSettings.transposeHeatmap=(e===bi.MUTATION_TRACKS).toString(),t})}},{key:"mutations",get:function(){return i.a.flatten(this.props.dataStore.allData)}},{key:"highlightedMutationIds",get:function(){var e=this.props.dataStore.getMouseOverMutation(),t=this.props.dataStore.selectedMutations.slice();return e&&t.push(e),t.map(O.N)}},{key:"highlightedIds",get:function(){return this.mode===bi.SAMPLE_TRACKS?this.highlightedMutationIds:void 0}},{key:"highlightedTracks",get:function(){return this.mode===bi.MUTATION_TRACKS?this.highlightedMutationIds:void 0}},{key:"mutationKeyToMutation",get:function(){return i.a.keyBy(this.mutations,O.N)}},{key:"columnLabels",get:function(){switch(this.mode){case bi.MUTATION_TRACKS:return this.mutationModeColumnLabels;case bi.SAMPLE_TRACKS:default:return this.sampleModeColumnLabels}}},{key:"heatmapTracksOrder",get:function(){switch(this.mode){case bi.MUTATION_TRACKS:return this.mutationModeHeatmapTracksOrder;case bi.SAMPLE_TRACKS:default:return this.sampleModeHeatmapTracksOrder}}},{key:"heatmapTracks",get:function(){switch(this.mode){case bi.MUTATION_TRACKS:return this.mutationModeHeatmapTracks;case bi.SAMPLE_TRACKS:default:return this.sampleModeHeatmapTracks}}},{key:"zoomControls",get:function(){var e=this;return r.createElement("div",{className:ci.a.zoomControls},r.createElement(b.c,{overlay:r.createElement("span",null,"Zoom out of heatmap"),placement:"top"},r.createElement("div",{onClick:this.onClickZoomOut,className:ci.a.zoomButton},r.createElement("i",{className:"fa fa-search-minus"}))),r.createElement(b.c,{overlay:r.createElement("span",null,"Zoom in/out of heatmap"),placement:"top"},r.createElement("div",{style:{width:"90px"}},r.createElement(li.a,{value:this.horzZoomSliderState,onChange:function(t){return e.horzZoomSliderState=t},onChangeComplete:this.updateOncoprintHorzZoom,step:.01,max:1,min:this.minZoom,tooltip:!1}))),r.createElement(b.c,{overlay:r.createElement("span",null,"Zoom in to heatmap"),placement:"top"},r.createElement("div",{className:ci.a.zoomButton,onClick:this.onClickZoomIn},r.createElement("i",{className:"fa fa-search-plus"}))))}},{key:"header",get:function(){var e=this;return r.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:5}},r.createElement("div",{style:{display:"inline-flex",alignItems:"center"}},r.createElement(ai.a,{checked:this.clustered,onChange:function(){e.clustered=!e.clustered},labelProps:{style:{marginRight:10}},inputProps:{"data-test":"HeatmapCluster"}},r.createElement("span",{style:{marginTop:-3}},"Cluster")),r.createElement(ai.a,{checked:this.mode===bi.MUTATION_TRACKS,onChange:function(){e.mode=e.mode===bi.MUTATION_TRACKS?bi.SAMPLE_TRACKS:bi.MUTATION_TRACKS},labelProps:{style:{marginRight:10}},inputProps:{"data-test":"HeatmapTranspose"}},r.createElement("span",{style:{marginTop:-3}},"Transpose")),r.createElement(ai.a,{checked:this.showMutationLabels,onChange:function(){e.showMutationLabels=!e.showMutationLabels},labelProps:{style:{marginRight:10}},inputProps:{"data-test":"HeatmapMutationLabels"}},r.createElement("span",{style:{marginTop:-3}},"Show mutation labels")),this.zoomControls),r.createElement(b.d,{filename:"vafHeatmap",getSvg:function(){return e.oncoprint?e.oncoprint.toSVG(!0):null},getData:function(){return function(e){var t=[];t.push(["Sample_ID","Gene","Protein_Change","Variant_Allele_Frequency"]);var n=!0,r=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var l=a.value;null!==l.profile_data&&t.push([l.sample,l.mutation.gene.hugoGeneSymbol,l.mutation.proteinChange,l.profile_data])}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return t.map(function(e){return e.join("\t")}).join("\n")}(i.a.flatMap(e.heatmapTracks.result,function(e){return e.data}))},buttons:["SVG","PNG","Data"],type:"button",dontFade:!0,style:{marginLeft:10}}))}}])&&di(n.prototype,o),a&&di(n,a),t}();vi([I.observable],wi.prototype,"horzZoomSliderState",void 0),vi([I.observable],wi.prototype,"minZoom",void 0),vi([z.default],wi.prototype,"oncoprintComponentRef",null),vi([z.default],wi.prototype,"oncoprintRef",null),vi([I.computed],wi.prototype,"mutations",null),vi([I.computed],wi.prototype,"highlightedMutationIds",null),vi([I.computed],wi.prototype,"highlightedIds",null),vi([I.computed],wi.prototype,"highlightedTracks",null),vi([z.default],wi.prototype,"updateOncoprintHorzZoom",null),vi([z.default],wi.prototype,"onClickZoomIn",null),vi([z.default],wi.prototype,"onClickZoomOut",null),vi([I.computed],wi.prototype,"mutationKeyToMutation",null),vi([I.computed],wi.prototype,"columnLabels",null),vi([I.computed],wi.prototype,"heatmapTracksOrder",null),vi([I.computed],wi.prototype,"heatmapTracks",null),vi([I.computed],wi.prototype,"zoomControls",null),vi([I.computed],wi.prototype,"header",null);var Ti=wi=vi([Wt.observer],wi);function Ai(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ii(e,t){return!t||"object"!==_i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oi(e){return(Oi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pi(e,t){return(Pi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _i(e){return(_i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ki,Ci=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":_i(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};!function(e){e.LINE_CHART="lineChart",e.HEATMAP="heatmap",e.TIMELINE="timeline"}(ki||(ki={}));var Mi="patient_view_mutations_tab__vaf_plot_choice",Di=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ii(this,Oi(t).apply(this,arguments))).dataStore=new $a(function(){return e.mergedMutations},e.props.urlWrapper),e.vafLineChartSvg=null,e._plotTab=localStorage.getItem(Mi)||ki.LINE_CHART,e.vafLineChart=Object(ua.a)({await:function(){return[e.props.store.coverageInformation,e.props.store.samples,e.props.store.mutationMolecularProfileId]},renderPending:function(){return r.createElement(fo.a,{isLoading:!0,size:"small"})},render:function(){return r.createElement("div",{className:"borderedChart",style:{display:"inline-block"}},r.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:5}},r.createElement("div",{style:{display:"flex",alignItems:"center"}},r.createElement(ai.a,{checked:e.dataStore.onlyShowSelectedInVAFChart,onChange:function(){return e.dataStore.setOnlyShowSelectedInVAFChart(!e.dataStore.onlyShowSelectedInVAFChart)},labelProps:{style:{marginRight:10}},inputProps:{"data-test":"VAFOnlyHighlighted"}},r.createElement("span",{style:{marginTop:-3}},Ga)),r.createElement(ai.a,{checked:e.vafLineChartLogScale,onChange:function(){e.vafLineChartLogScale=!e.vafLineChartLogScale},labelProps:{style:{marginRight:10}},inputProps:{"data-test":"VAFLogScale"}},r.createElement("span",{style:{marginTop:-3}},"Log scale")),r.createElement(ai.a,{checked:!e.vafLineChartZeroToOneYAxis,onChange:function(){e.vafLineChartZeroToOneYAxis=!e.vafLineChartZeroToOneYAxis},labelProps:{style:{marginRight:10}},inputProps:{"data-test":"VAFDataRange"}},r.createElement("span",{style:{marginTop:-3}},"Set y-axis to data range"))),r.createElement(b.d,{filename:"vafHeatmap",getSvg:function(){return e.vafLineChartSvg},buttons:["SVG","PNG","PDF"],type:"button",dontFade:!0})),r.createElement(Ua,{dataStore:e.dataStore,samples:e.props.store.samples.result,coverageInformation:e.props.store.coverageInformation.result,mutationProfileId:e.props.store.mutationMolecularProfileId.result,sampleManager:e.props.sampleManager,svgRef:e.vafLineChartSvgRef,logScale:e.vafLineChartLogScale,zeroToOneAxis:e.vafLineChartZeroToOneYAxis}))},showLastRenderWhenPending:!0}),e.table=Object(ua.a)({await:function(){return[e.props.store.mutationData,e.props.store.uncalledMutationData,e.props.store.oncoKbAnnotatedGenes,e.props.store.studyIdToStudy,e.props.store.sampleToMutationGenePanelId,e.props.store.genePanelIdToEntrezGeneIds]},renderPending:function(){return r.createElement(fo.a,{isLoading:!0,size:"small"})},render:function(){return r.createElement("div",{"data-test":"GenomicEvolutionMutationTable"},r.createElement("div",{style:{float:"left",marginRight:15,marginTop:4}},r.createElement(ai.a,{checked:e.dataStore.onlyShowSelectedInTable,onChange:function(){return e.dataStore.setOnlyShowSelectedInTable(!e.dataStore.onlyShowSelectedInTable)},labelProps:{style:{marginRight:10}},inputProps:{"data-test":"TableShowOnlyHighlighted"}},r.createElement("span",{style:{marginTop:-3}},"Show only selected mutations"))),r.createElement($r,{dataStore:e.dataStore,showGeneFilterMenu:e.props.store.mutationTableShowGeneFilterMenu.result,currentGeneFilter:e.props.store.mutationTableGeneFilterOption,onFilterGenes:e.onFilterGenesMutationTable,onRowClick:e.onTableRowClick,onRowMouseEnter:e.onTableRowMouseEnter,onRowMouseLeave:e.onTableRowMouseLeave,studyIdToStudy:e.props.store.studyIdToStudy.result,sampleManager:e.props.sampleManager,sampleIds:e.props.sampleManager?e.props.sampleManager.getSampleIdsInOrder():[],uniqueSampleKeyToTumorType:e.props.store.uniqueSampleKeyToTumorType,molecularProfileIdToMolecularProfile:e.props.store.molecularProfileIdToMolecularProfile.result,variantCountCache:e.props.store.variantCountCache,indexedVariantAnnotations:e.props.store.indexedVariantAnnotations,indexedMyVariantInfoAnnotations:e.props.store.indexedMyVariantInfoAnnotations,discreteCNACache:e.props.store.discreteCNACache,mrnaExprRankCache:e.props.store.mrnaExprRankCache,pubMedCache:e.props.store.pubMedCache,genomeNexusCache:e.props.store.genomeNexusCache,mrnaExprRankMolecularProfileId:e.props.store.mrnaRankMolecularProfileId.result||void 0,discreteCNAMolecularProfileId:e.props.store.molecularProfileIdDiscrete.result,downloadDataFetcher:e.props.store.downloadDataFetcher,mutSigData:e.props.store.mutSigData.result,myCancerGenomeData:e.props.store.myCancerGenomeData,hotspotData:e.props.store.indexedHotspotData,cosmicData:e.props.store.cosmicData.result,oncoKbData:e.props.store.oncoKbData,oncoKbCancerGenes:e.props.store.oncoKbCancerGenes,usingPublicOncoKbInstance:e.props.store.usingPublicOncoKbInstance,civicGenes:e.props.store.civicGenes,civicVariants:e.props.store.civicVariants,userEmailAddress:Ct.a.getUserEmailAddress(),enableOncoKb:Ct.b.serverConfig.show_oncokb,enableFunctionalImpact:Ct.b.serverConfig.show_genomenexus,enableHotspot:Ct.b.serverConfig.show_hotspot,enableMyCancerGenome:Ct.b.serverConfig.mycancergenome_show,enableCivic:Ct.b.serverConfig.show_civic,columnVisibility:e.props.mutationTableColumnVisibility,columnVisibilityProps:{onColumnToggled:e.props.onMutationTableColumnVisibilityToggled},sampleToGenePanelId:e.props.store.sampleToMutationGenePanelId.result,genePanelIdToEntrezGeneIds:e.props.store.genePanelIdToEntrezGeneIds.result,generateGenomeNexusHgvsgUrl:e.props.store.generateGenomeNexusHgvsgUrl}))}}),e.timeline=Object(ua.a)({await:function(){return[e.props.store.clinicalEvents]},render:function(){return null!==e.props.sampleManager&&e.props.store.clinicalEvents.result.length>0?r.createElement("div",{className:"borderedChart",style:{marginBottom:20,padding:e.showTimeline?10:5,width:Io.a.size.width-50}},r.createElement("button",{className:"btn btn-xs btn-default",style:{paddingTop:0,paddingBottom:0,marginLeft:e.showTimeline?-5:0,marginTop:e.showTimeline?-10:0},onClick:e.toggleTimeline,"data-test":"ToggleTimeline"},e.showTimeline?"Hide Timeline":"Show Timeline"),e.showTimeline&&r.createElement("div",{style:{marginTop:10}},r.createElement(Lr,{store:e.props.store,width:Io.a.size.width-100,sampleManager:e.props.sampleManager}))):null}}),e.tabUI=Object(ua.a)({await:function(){return[e.table,e.vafLineChart,e.timeline]},renderPending:function(){return r.createElement(fo.a,{isLoading:!0,size:"big",center:!0})},render:function(){return r.createElement("div",{"data-test":"GenomicEvolutionTab"},e.timeline.component,r.createElement(co.b,{activeTabId:e.plotTab,onTabClick:e.setPlotTab,className:"secondaryNavigation vafVizNavTabs",unmountOnHide:!1},r.createElement(co.a,{id:ki.LINE_CHART,linkText:"Line Chart"},r.createElement("div",{style:{paddingBottom:10}},e.vafLineChart.component)),r.createElement(co.a,{id:ki.HEATMAP,linkText:"Heatmap"},r.createElement("div",{style:{paddingBottom:10}},r.createElement(Ti,{store:e.props.store,dataStore:e.dataStore,sampleManager:e.props.sampleManager,urlWrapper:e.props.urlWrapper})))),r.createElement("div",{style:{marginTop:20}},e.table.component))}}),e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pi(e,t)}(t,r["Component"]),n=t,(o=[{key:"toggleTimeline",value:function(){this.showTimeline=!this.showTimeline}},{key:"setPlotTab",value:function(e){this._plotTab=e,localStorage.setItem(Mi,e)}},{key:"vafLineChartSvgRef",value:function(e){this.vafLineChartSvg=e}},{key:"onTableRowClick",value:function(e){e.length&&this.dataStore.toggleSelectedMutation(e[0])}},{key:"onTableRowMouseEnter",value:function(e){e.length&&this.dataStore.setMouseOverMutation(e[0])}},{key:"onTableRowMouseLeave",value:function(){this.dataStore.setMouseOverMutation(null)}},{key:"onFilterGenesMutationTable",value:function(e){this.props.store.mutationTableGeneFilterOption=e}},{key:"render",value:function(){return this.tabUI.component}},{key:"showTimeline",get:function(){return"true"===this.props.urlWrapper.query.genomicEvolutionSettings.showTimeline},set:function(e){this.props.urlWrapper.updateURL({genomicEvolutionSettings:Object.assign({},this.props.urlWrapper.query.genomicEvolutionSettings,{showTimeline:e.toString()})})}},{key:"vafLineChartLogScale",get:function(){return"true"===this.props.urlWrapper.query.genomicEvolutionSettings.logScaleChart},set:function(e){this.props.urlWrapper.updateURL(function(t){return t.genomicEvolutionSettings.logScaleChart=e.toString(),t})}},{key:"vafLineChartZeroToOneYAxis",get:function(){var e=this.props.urlWrapper.query.genomicEvolutionSettings.yAxisDataRangeInChart;return!e||"true"===e},set:function(e){this.props.urlWrapper.updateURL(function(t){return t.genomicEvolutionSettings.yAxisDataRangeInChart=e.toString(),t})}},{key:"plotTab",get:function(){return this._plotTab}},{key:"mergedMutations",get:function(){return this.props.store.mergedMutationDataIncludingUncalledFilteredByGene.filter(function(e){return!Object($t.m)(e[0])})}}])&&Ai(n.prototype,o),a&&Ai(n,a),t}();Ci([z.default,I.action],Di.prototype,"toggleTimeline",null),Ci([I.observable],Di.prototype,"_plotTab",void 0),Ci([I.computed],Di.prototype,"plotTab",null),Ci([z.default,I.action],Di.prototype,"setPlotTab",null),Ci([z.default],Di.prototype,"vafLineChartSvgRef",null),Ci([I.computed],Di.prototype,"mergedMutations",null),Ci([z.default],Di.prototype,"onTableRowClick",null),Ci([z.default],Di.prototype,"onTableRowMouseEnter",null),Ci([z.default],Di.prototype,"onTableRowMouseLeave",null),Ci([z.default],Di.prototype,"onFilterGenesMutationTable",null);var xi=Di=Ci([Wt.observer],Di),ji=n(756),Ri=n(700),Ni=n(706),Gi=n(1025),Li=n.n(Gi),Vi=n(703);function Fi(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Bi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ui(e,t){return!t||"object"!==Hi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wi(e){return(Wi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zi(e,t){return(zi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hi(e){return(Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ki=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Hi(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Yi=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ui(this,Wi(t).apply(this,arguments))).filter="",e.genesDividedToColumns=function(t){for(var n=[],r=e.columnCount,o=Fi(t);r>0;){var i=Object(a.chunk)(o,Math.ceil(o.length/r));if(i.length===r){n=n.concat(i);break}n.push(i[0]),o=o.slice(Object(a.flatten)(n).length),r--}return n},e.getDownloadData=function(){var t=[["Genes"]].concat(Fi(e.props.genePanel.genes.map(function(e){return[e.hugoGeneSymbol]})));return Object(Ni.a)(t)},e.genesDividedToRows=function(t){for(var n=e.genesDividedToColumns(t),r=[],o=e.geneCountPerColumn(t.length),a=0;a<o;a++){for(var i=[],l=0;l<e.columnCount;l++)i.push(n[l]&&n[l][a]?n[l][a].hugoGeneSymbol:"");r.push(i)}return r},e.geneCountPerColumn=function(t){return Math.ceil(t/e.columnCount)},e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zi(e,t)}(t,r["Component"]),n=t,(o=[{key:"handleChangeInput",value:function(e){this.filter=e}},{key:"render",value:function(){var e=this;return r.createElement("div",{id:this.props.id,className:Li.a.genesList},r.createElement("h4",{className:Li.a.panelName},this.props.genePanel.genePanelId),r.createElement("span",null,"Number of genes: ",this.props.genePanel.genes.length),r.createElement("div",{className:da()("pull-right has-feedback input-group-sm",Li.a.searchInput)},r.createElement("input",{type:"text",value:this.filter,onInput:function(t){return e.handleChangeInput(t.target.value)},className:"form-control"}),r.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true"})),r.createElement(Ri.a,{className:da()("pull-right",Li.a.copyDownloadControls),downloadData:this.getDownloadData,downloadFilename:"gene_panel_".concat(this.props.genePanel.genePanelId,".tsv"),controlsStyle:"BUTTON",containerId:this.props.id}),r.createElement(Vi.a,{headers:this.renderTableHeaders,rows:this.renderTableRows,noRowsText:"No matches"}))}},{key:"filteredGenes",get:function(){var e=this.props.genePanel.genes;if(this.filter){var t=new RegExp(this.filter,"i");return e.filter(function(e){return t.test(e.entrezGeneId.toString())||t.test(e.hugoGeneSymbol)})}return e}},{key:"renderTableRows",get:function(){var e=this.filteredGenes;if(0===e.length)return[];var t=[];return this.genesDividedToRows(e).forEach(function(e){var n=e.map(function(e){return r.createElement("td",{key:e||Math.random()},e)});t.push(r.createElement("tr",null,n))}),t}},{key:"columnCount",get:function(){return this.props.columns||1}},{key:"renderTableHeaders",get:function(){return[r.createElement("th",null,"Genes")].concat(Array(this.columnCount-1).fill(r.createElement("th",null)))}}])&&Bi(n.prototype,o),i&&Bi(n,i),t}();Ki([I.observable],Yi.prototype,"filter",void 0),Ki([z.default,I.action],Yi.prototype,"handleChangeInput",null),Ki([I.computed],Yi.prototype,"filteredGenes",null),Ki([I.computed],Yi.prototype,"renderTableRows",null),Ki([I.computed],Yi.prototype,"columnCount",null),Ki([I.computed],Yi.prototype,"renderTableHeaders",null);var Qi=Yi=Ki([Wt.observer],Yi);function qi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zi(e,t){return!t||"object"!==$i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ji(e){return(Ji=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xi(e,t){return(Xi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $i(e){return($i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var el=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":$i(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},tl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Zi(this,Ji(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xi(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(ji.a,{panelName:"Gene Panel",show:this.props.show,onHide:this.props.onHide,className:Li.a.patientViewModal},r.createElement(Qi,{id:"patient-view-gene-panel",genePanel:this.props.genePanel,columns:this.props.columns}))}}])&&qi(n.prototype,o),a&&qi(n,a),t}(),nl=tl=el([Wt.observer],tl),rl=n(858);function ol(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function al(e,t){return!t||"object"!==ul(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function il(e){return(il=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ll(e,t){return(ll=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ul(e){return(ul="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var cl=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":ul(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},sl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),al(this,il(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ll(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement(V.b,{columns:this.columns,data:this.data,showPagination:!1})}},{key:"data",get:function(){var e=Object(b.W)(this.props.sampleManager.getSampleIdsInOrder());return i.a.sortBy(this.props.data,function(t){return e[t.sample.sampleId]})}},{key:"columns",get:function(){var e=this;return[{name:"Sample",sortBy:function(e){return e.sample.sampleId},render:function(t){return e.props.sampleManager.getComponentForSample(t.sample.sampleId)||r.createElement("span",null,t.sample.sampleId)}},{name:"Resources",render:function(t){return r.createElement(r.Fragment,null,i.a.sortBy(t.resources,function(e){return e.resourceDefinition.priority}).map(function(t){return r.createElement(rl.a,{resource:t,isTabOpen:e.props.isTabOpen,openResource:e.props.openResource})}))}}]}}])&&ol(n.prototype,o),a&&ol(n,a),t}();cl([I.computed],sl.prototype,"data",null),cl([I.computed],sl.prototype,"columns",null);var pl=sl=cl([Wt.observer],sl);function fl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dl(e,t){return!t||"object"!==yl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ml(e){return(ml=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hl(e,t){return(hl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yl(e){return(yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var gl=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":yl(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},bl=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=dl(this,ml(t).apply(this,arguments))).sampleRows=Object(b.S)({await:function(){return[e.props.store.samples,e.props.store.sampleResourceData]},invoke:function(){var t=e.props.store.sampleResourceData.result,n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e.props.store.samples.result[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value,c=t[u.sampleId];c&&c.length&&n.push({sample:u,resources:c})}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return Promise.resolve(n)}}),e.sampleResources=Object(ua.a)({await:function(){return[e.sampleRows]},render:function(){return e.props.sampleManager&&e.sampleRows.result.length>0?r.createElement("div",{className:"resourcesSection"},r.createElement("h4",{className:"blackHeader"},"Sample Resources"),r.createElement(pl,{data:e.sampleRows.result,sampleManager:e.props.sampleManager,isTabOpen:e.props.store.isResourceTabOpen,openResource:e.props.openResource})):null}}),e.patientResources=Object(ua.a)({await:function(){return[e.props.store.patientResourceData]},render:function(){return e.props.store.patientResourceData.result.length>0?r.createElement("div",{className:"resourcesSection"},r.createElement("h4",{className:"blackHeader"},"Patient Resources for ",e.props.store.patientId),i.a.sortBy(e.props.store.patientResourceData.result,function(e){return parseFloat(e.resourceDefinition.priority)}).map(function(t){return r.createElement(rl.a,{resource:t,isTabOpen:e.props.store.isResourceTabOpen,openResource:e.props.openResource})})):null}}),e.studyResources=Object(ua.a)({await:function(){return[e.props.store.studyResourceData,e.props.store.studies]},render:function(){return e.props.store.studyResourceData.result.length>0?r.createElement("div",{className:"resourcesSection"},r.createElement("h4",{className:"blackHeader"},"Study Resources for"," ",e.props.store.studies.result[0].name),i.a.sortBy(e.props.store.studyResourceData.result,function(e){return e.resourceDefinition.priority}).map(function(t){return r.createElement(rl.a,{resource:t,isTabOpen:e.props.store.isResourceTabOpen,openResource:e.props.openResource})})):null}}),e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hl(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){return r.createElement("div",{className:"resourcesTab"},r.createElement(L.a,{title:"Files & Links",isLoading:this.sampleResources.isPending||this.patientResources.isPending||this.studyResources.isPending,className:"pull-left"}),r.createElement("br",null),r.createElement("br",null),r.createElement("div",null,this.patientResources.component,this.sampleResources.component,this.studyResources.component))}}])&&fl(n.prototype,o),a&&fl(n,a),t}(),vl=bl=gl([Wt.observer],bl),Sl=n(882);function El(e){return(El="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Tl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Al(e){return(Al=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Il(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ol(e,t){return(Ol=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pl(e){return(Pl="function"==typeof Symbol&&"symbol"===El(Symbol.iterator)?function(e){return El(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":El(e)})(e)}var _l=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Pl(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},kl=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}u((r=r.apply(e,t||[])).next())})},Cl=function(e){function t(e){var n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=Al(t).call(this,e),(n=!i||"object"!==Pl(i)&&"function"!=typeof i?Il(o):i).genePanelModal={genePanelId:"",isOpen:!1},n.wholeSlideViewerUrl=Object(b.S)({await:function(){return[n.patientViewPageStore.getWholeSlideViewerIds]},invoke:function(){return kl(Il(n),void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.isEmpty(this.patientViewPageStore.getWholeSlideViewerIds.result)){e.next=11;break}return t=Object(ut.C)(this.patientViewPageStore.getWholeSlideViewerIds.result,this.props.appStore.userName),e.prev=2,e.next=5,it.a.get(t);case 5:return e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",void 0);case 11:return e.abrupt("return",void 0);case 12:case"end":return e.stop()}},e,this,[[2,8]])}))}}),n.resourceTabs=Object(ua.a)({await:function(){return[n.patientViewPageStore.resourceDefinitions,n.patientViewPageStore.resourceIdToResourceData]},render:function(){var e=n.patientViewPageStore.resourceDefinitions.result.filter(function(e){return n.patientViewPageStore.isResourceTabOpen(e.resourceId)}),t=a.sortBy(e,function(e){return e.priority}),o=n.patientViewPageStore.resourceIdToResourceData.result;return t.reduce(function(e,t){var a=o[t.resourceId];return a&&a.length>0&&e.push(r.createElement(co.a,{key:Object($o.d)(t.resourceId),id:Object($o.d)(t.resourceId),linkText:t.displayName,onClickClose:n.closeResourceTab},r.createElement(Sl.a,{resourceData:o[t.resourceId],urlWrapper:n.urlWrapper}))),e},[])}}),n.urlWrapper=new ia(e.routing),n.patientViewPageStore=new En(n.props.appStore),Object(b.B)().patientViewPageStore=n.patientViewPageStore;var l=n.urlWrapper.activeTabId&&Object($o.c)(n.urlWrapper.activeTabId);return l&&n.patientViewPageStore.setResourceTabOpen(l,!0),Object(I.reaction)(function(){return[n.urlWrapper.query.caseId,n.urlWrapper.query.studyId]},function(e){var t=wl(e,2),r=(t[0],t[1]);r&&n.props.routing.location.pathname.includes("/"+Xo.a.Patient)&&Object(Zo.g)(r)},{fireImmediately:!0}),Object(I.reaction)(function(){return[e.routing.location.query,e.routing.location.hash,e.routing.location.pathname]},function(e){var t=wl(e,3),r=t[0],o=t[1];if(t[2].includes("/"+Xo.a.Patient)){var a=po(r);if(a.isValid){n.patientViewPageStore.urlValidationError=null,"studyId"in r&&(n.patientViewPageStore.studyId=r.studyId),"caseId"in r?n.patientViewPageStore.setPatientId(r.caseId):"sampleId"in r&&n.patientViewPageStore.setSampleId(r.sampleId);var i=o.match(/navCaseIds=([^&]*)/);i&&i.length>1&&(n.patientViewPageStore.patientIdsInCohort=function(e){var t=this;return e.split(",").map(function(e){return e.includes(":")?e:t.studyId+":"+e})}(i[1]))}else n.patientViewPageStore.urlValidationError=a.message}},{fireImmediately:!0}),n.onMutationTableColumnVisibilityToggled=n.onMutationTableColumnVisibilityToggled.bind(Il(n)),n.onCnaTableColumnVisibilityToggled=n.onCnaTableColumnVisibilityToggled.bind(Il(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ol(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e,t=Object(b.B)().clientPostedData;t&&t.navCaseIds&&(this.patientViewPageStore.patientIdsInCohort=(e=t.navCaseIds,a.map(e,function(e){return e.studyId+":"+e.patientId})),Object(b.B)().clientPostedData=null)}},{key:"handleSampleClick",value:function(e,t){t.shiftKey||t.altKey||t.metaKey||(t.preventDefault(),this.urlWrapper.updateURL({caseId:void 0,sampleId:e}))}},{key:"handlePatientClick",value:function(e){var t=e.split(":");2==t.length?this.urlWrapper.updateURL({studyId:t[0],caseId:t[1],sampleId:void 0}):this.urlWrapper.updateURL({caseId:e,sampleId:void 0})}},{key:"onCnaTableColumnVisibilityToggled",value:function(e,t){this.cnaTableColumnVisibility=Object(b.ab)(this.cnaTableColumnVisibility,e,t)}},{key:"onMutationTableColumnVisibilityToggled",value:function(e,t){this.mutationTableColumnVisibility=Object(b.ab)(this.mutationTableColumnVisibility,e,t)}},{key:"customTabMountCallback",value:function(e,t){Object(To.a)(e,t,this.props.routing.location,this.patientViewPageStore)}},{key:"onFilterGenesMutationTable",value:function(e){this.patientViewPageStore.mutationTableGeneFilterOption=e}},{key:"onFilterGenesCopyNumberTable",value:function(e){this.patientViewPageStore.copyNumberTableGeneFilterOption=e}},{key:"mutationTableShowGeneFilterMenu",value:function(e){var t=a.uniq(a.map(this.patientViewPageStore.mergedMutationDataIncludingUncalled,function(e){return e[0].entrezGeneId}));return e.length>1&&pn(e,t,this.patientViewPageStore.sampleToMutationGenePanelId.result,this.patientViewPageStore.genePanelIdToEntrezGeneIds.result)}},{key:"cnaTableShowGeneFilterMenu",value:function(e){var t=a.uniq(a.map(this.patientViewPageStore.mergedDiscreteCNAData,function(e){return e[0].entrezGeneId}));return e.length>1&&pn(e,t,this.patientViewPageStore.sampleToDiscreteGenePanelId.result,this.patientViewPageStore.genePanelIdToEntrezGeneIds.result)}},{key:"toggleGenePanelModal",value:function(e){this.genePanelModal={isOpen:!this.genePanelModal.isOpen,genePanelId:e||""}}},{key:"openResource",value:function(e){this.patientViewPageStore.setResourceTabOpen(e.resourceId,!0),this.urlWrapper.setActiveTab(Object($o.d)(e.resourceId)),this.urlWrapper.setResourceUrl(e.url)}},{key:"closeResourceTab",value:function(e){var t=Object($o.c)(e);t&&(this.patientViewPageStore.setResourceTabOpen(t,!1),this.urlWrapper.activeTabId===Object($o.d)(t)&&this.urlWrapper.setActiveTab($o.a.FilesAndLinks))}},{key:"render",value:function(){var e=this,t=this.sampleManager,n=null,o=null,i=null;if(this.patientViewPageStore.urlValidationError)return r.createElement(vo,{urlValidationError:this.patientViewPageStore.urlValidationError});if(this.patientViewPageStore.studyMetaData.isComplete){var u=this.patientViewPageStore.studyMetaData.result;i=r.createElement(Ao.a,{studyId:u.studyId},u.name)}if(this.patientViewPageStore.patientViewData.isComplete&&this.patientViewPageStore.studyMetaData.isComplete&&this.patientViewPageStore.clinicalEvents.isComplete&&null!==t&&(n=a.map(t.samples,function(n){var o=t&&t.clinicalDataLegacyCleanAndDerived&&t.clinicalDataLegacyCleanAndDerived[n.id]&&"Xenograft"===t.clinicalDataLegacyCleanAndDerived[n.id].DERIVED_NORMALIZED_CASE_TYPE;return r.createElement("div",{className:"patientSample"},r.createElement("span",{className:"clinical-spans"},t.getComponentForSample(n.id,1,"",r.createElement("span",{style:{display:"inline-flex"}}," ",o&&r.createElement("svg",{id:"Layer_2",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"15px",height:"15px",viewBox:"7.015 20 388.209 342.605","enable-background":"new 7.015 47.906 388.209 342.605"},r.createElement("path",{fill:"none",stroke:"#000000",strokeWidth:"20",strokeLinejoin:"bevel",strokeMiterlimit:"10",d:"M377.5,250.5 c-2.896,138.241-177.896,163.241-280.896,89.241"}),r.createElement("g",null,r.createElement("g",null,r.createElement("path",{fill:"#0C0202",stroke:"#000000",strokeMiterlimit:"10",d:"M10.5,251.5h377c0,0,66-275-201-185 C186.5,66.5-19.5,159.5,10.5,251.5z"})),r.createElement("path",{fill:"#0C0202",stroke:"#000000",strokeLinejoin:"bevel",strokeMiterlimit:"10",d:"M50.5,159.5 C-65.396,141.741,82.604,2.741,88.604,128.741"})),r.createElement("circle",{fill:"#FFFFFF",stroke:"#000000",strokeMiterlimit:"10",cx:"50.854",cy:"210.991",r:"21.25"})),o&&" ",r.createElement("a",{href:Object(ut.y)(e.patientViewPageStore.studyMetaData.result.studyId,n.id),target:"_blank",onClick:function(t){return e.handleSampleClick(n.id,t)}},Oe.getClinicalAttributeInSample(n,"DISPLAY_SAMPLE_NAME")?"".concat(Oe.getClinicalAttributeInSample(n,"DISPLAY_SAMPLE_NAME").value," (").concat(n.id,")"):n.id),t&&t.clinicalDataLegacyCleanAndDerived[n.id]&&ce(t.clinicalDataLegacyCleanAndDerived[n.id],e.patientViewPageStore.studyId)),e.toggleGenePanelModal,e.genePanelModal.isOpen)),!0===e.patientViewPageStore.hasMutationalSignatureData.result&&r.createElement(fo.a,{isLoading:e.patientViewPageStore.mutationalSignatureData.isPending&&e.patientViewPageStore.mutationalSignatureMetaData.isPending}),!0===e.patientViewPageStore.hasMutationalSignatureData.result&&e.patientViewPageStore.clinicalDataGroupedBySample.isComplete&&e.patientViewPageStore.mutationalSignatureData.isComplete&&e.patientViewPageStore.mutationalSignatureMetaData.isComplete&&r.createElement(Ue,{data:e.patientViewPageStore.mutationalSignatureData.result,metadata:e.patientViewPageStore.mutationalSignatureMetaData.result,uniqueSampleKey:n.id}))}))&&n.length>0&&"sample"===this.patientViewPageStore.pageMode&&this.patientViewPageStore.patientId&&this.patientViewPageStore.allSamplesForPatient&&this.patientViewPageStore.allSamplesForPatient.result.length>1&&n.push(r.createElement("button",{className:"btn btn-default btn-xs",onClick:function(){return e.handlePatientClick(e.patientViewPageStore.patientId)}},"Show all"," ",this.patientViewPageStore.allSamplesForPatient.result.length," ","samples")),this.patientViewPageStore.patientIdsInCohort&&this.patientViewPageStore.patientIdsInCohort.length>0){var c=this.patientViewPageStore.patientIdsInCohort.indexOf(this.patientViewPageStore.studyId+":"+this.patientViewPageStore.patientId);o=r.createElement(U.a,{currentPage:c+1,showMoreButton:!1,showItemsPerPageSelector:!1,showFirstPage:!0,showLastPage:!0,textBetweenButtons:" of ".concat(this.patientViewPageStore.patientIdsInCohort.length," patients"),firstPageDisabled:0===c,previousPageDisabled:0===c,nextPageDisabled:c===this.patientViewPageStore.patientIdsInCohort.length-1,lastPageDisabled:c===this.patientViewPageStore.patientIdsInCohort.length-1,onFirstPageClick:function(){return e.handlePatientClick(e.patientViewPageStore.patientIdsInCohort[0])},onPreviousPageClick:function(){return e.handlePatientClick(e.patientViewPageStore.patientIdsInCohort[c-1])},onNextPageClick:function(){return e.handlePatientClick(e.patientViewPageStore.patientIdsInCohort[c+1])},onLastPageClick:function(){return e.handlePatientClick(e.patientViewPageStore.patientIdsInCohort[e.patientViewPageStore.patientIdsInCohort.length-1])},onChangeCurrentPage:function(t){t>0&&t<=e.patientViewPageStore.patientIdsInCohort.length&&e.handlePatientClick(e.patientViewPageStore.patientIdsInCohort[t-1])},pageNumberEditable:!0,className:"cohortNav"})}return r.createElement(So.a,{noMargin:!0,hideFooter:!0},this.patientViewPageStore.patientViewData.isComplete&&r.createElement(wo.a,null,r.createElement("title",null,this.patientViewPageStore.pageTitle),r.createElement("meta",{name:"description",content:this.patientViewPageStore.metaDescription})),r.createElement("div",{className:"patientViewPage"},this.genePanelModal.isOpen&&r.createElement(nl,{genePanel:this.modalSelectedGenePanel,show:this.genePanelModal.isOpen,onHide:this.toggleGenePanelModal,columns:3}),r.createElement("div",{className:"headBlock"},this.patientViewPageStore.patientViewData.isComplete&&r.createElement("div",{className:"patientPageHeader"},r.createElement("i",{className:"fa fa-user-circle-o patientIcon","aria-hidden":"true"}),r.createElement("div",{className:"patientDataTable"},r.createElement("table",null,r.createElement("tr",null,r.createElement("td",null,"Patient:"),r.createElement("td",null,r.createElement(De,{handlePatientClick:function(t){return e.handlePatientClick(t)},patient:this.patientViewPageStore.patientViewData.result.patient,studyId:this.patientViewPageStore.studyId,darwinUrl:this.patientViewPageStore.darwinUrl.result,sampleManager:t}))),r.createElement("tr",null,r.createElement("td",null,"Samples:"),r.createElement("td",null,r.createElement("div",{className:"patientSamples"},n))))),r.createElement("div",{className:"studyMetaBar"},i," ",r.createElement(l.If,{condition:null!=o},o)))),r.createElement(l.If,{condition:this.patientViewPageStore.patientViewData.isComplete},r.createElement(l.Then,null,r.createElement(co.b,{id:"patientViewPageTabs",activeTabId:this.urlWrapper.activeTabId,onTabClick:function(t){return e.urlWrapper.setActiveTab(t)},className:"mainTabs",getPaginationWidth:Io.a.getWindowWidth},r.createElement(co.a,{key:0,id:$o.a.Summary,linkText:"Summary"},r.createElement(fo.a,{isLoading:this.patientViewPageStore.clinicalEvents.isPending}),!!t&&this.patientViewPageStore.clinicalEvents.isComplete&&this.patientViewPageStore.clinicalEvents.result.length>0&&r.createElement("div",null,r.createElement(Lr,{store:this.patientViewPageStore,width:Io.a.size.width-60,sampleManager:t}),r.createElement("hr",null)),r.createElement(fo.a,{isLoading:this.patientViewPageStore.mutationData.isPending||this.patientViewPageStore.cnaSegments.isPending}),this.patientViewPageStore.mutationData.isComplete&&this.patientViewPageStore.cnaSegments.isComplete&&this.patientViewPageStore.sequencedSampleIdsInStudy.isComplete&&this.patientViewPageStore.sampleToMutationGenePanelId.isComplete&&this.patientViewPageStore.sampleToDiscreteGenePanelId.isComplete&&(this.patientViewPageStore.mergedMutationDataFilteredByGene.length>0||this.patientViewPageStore.cnaSegments.result.length>0)&&t&&r.createElement("div",null,r.createElement(G,{mergedMutations:this.patientViewPageStore.mergedMutationDataFilteredByGene,samples:this.patientViewPageStore.samples.result,cnaSegments:this.patientViewPageStore.cnaSegments.result,sampleOrder:t.sampleIndex,sampleLabels:t.sampleLabels,sampleColors:t.sampleColors,sampleManager:t,containerWidth:Io.a.size.width-20,sampleIdToMutationGenePanelId:this.patientViewPageStore.sampleToMutationGenePanelId.result,sampleIdToCopyNumberGenePanelId:this.patientViewPageStore.sampleToDiscreteGenePanelId.result,onSelectGenePanel:this.toggleGenePanelModal,disableTooltip:this.genePanelModal.isOpen}),r.createElement("hr",null)),r.createElement(fo.a,{isLoading:this.patientViewPageStore.mutationData.isPending||this.patientViewPageStore.uncalledMutationData.isPending||this.patientViewPageStore.oncoKbAnnotatedGenes.isPending||this.patientViewPageStore.studyIdToStudy.isPending}),this.patientViewPageStore.oncoKbAnnotatedGenes.isComplete&&this.patientViewPageStore.mutationData.isComplete&&this.patientViewPageStore.uncalledMutationData.isComplete&&this.patientViewPageStore.studyIdToStudy.isComplete&&this.patientViewPageStore.sampleToMutationGenePanelId.isComplete&&this.patientViewPageStore.genePanelIdToEntrezGeneIds.isComplete&&!!t&&r.createElement("div",{"data-test":"patientview-mutation-table"},r.createElement($r,{studyIdToStudy:this.patientViewPageStore.studyIdToStudy.result,sampleManager:t,sampleToGenePanelId:this.patientViewPageStore.sampleToMutationGenePanelId.result,genePanelIdToEntrezGeneIds:this.patientViewPageStore.genePanelIdToEntrezGeneIds.result,sampleIds:t?t.getSampleIdsInOrder():[],uniqueSampleKeyToTumorType:this.patientViewPageStore.uniqueSampleKeyToTumorType,molecularProfileIdToMolecularProfile:this.patientViewPageStore.molecularProfileIdToMolecularProfile.result,variantCountCache:this.patientViewPageStore.variantCountCache,indexedVariantAnnotations:this.patientViewPageStore.indexedVariantAnnotations,indexedMyVariantInfoAnnotations:this.patientViewPageStore.indexedMyVariantInfoAnnotations,discreteCNACache:this.patientViewPageStore.discreteCNACache,mrnaExprRankCache:this.patientViewPageStore.mrnaExprRankCache,pubMedCache:this.patientViewPageStore.pubMedCache,genomeNexusCache:this.patientViewPageStore.genomeNexusCache,genomeNexusMutationAssessorCache:this.patientViewPageStore.genomeNexusMutationAssessorCache,mrnaExprRankMolecularProfileId:this.patientViewPageStore.mrnaRankMolecularProfileId.result||void 0,discreteCNAMolecularProfileId:this.patientViewPageStore.molecularProfileIdDiscrete.result,data:this.patientViewPageStore.mergedMutationDataIncludingUncalledFilteredByGene,downloadDataFetcher:this.patientViewPageStore.downloadDataFetcher,mutSigData:this.patientViewPageStore.mutSigData.result,myCancerGenomeData:this.patientViewPageStore.myCancerGenomeData,hotspotData:this.patientViewPageStore.indexedHotspotData,cosmicData:this.patientViewPageStore.cosmicData.result,oncoKbData:this.patientViewPageStore.oncoKbData,oncoKbCancerGenes:this.patientViewPageStore.oncoKbCancerGenes,usingPublicOncoKbInstance:this.patientViewPageStore.usingPublicOncoKbInstance,civicGenes:this.patientViewPageStore.civicGenes,civicVariants:this.patientViewPageStore.civicVariants,userEmailAddress:Ct.a.getUserEmailAddress(),enableOncoKb:Ct.b.serverConfig.show_oncokb,enableFunctionalImpact:Ct.b.serverConfig.show_genomenexus,enableHotspot:Ct.b.serverConfig.show_hotspot,enableMyCancerGenome:Ct.b.serverConfig.mycancergenome_show,enableCivic:Ct.b.serverConfig.show_civic,columnVisibility:this.mutationTableColumnVisibility,showGeneFilterMenu:this.patientViewPageStore.mutationTableShowGeneFilterMenu.result,currentGeneFilter:this.patientViewPageStore.mutationTableGeneFilterOption,onFilterGenes:this.onFilterGenesMutationTable,columnVisibilityProps:{onColumnToggled:this.onMutationTableColumnVisibilityToggled},onSelectGenePanel:this.toggleGenePanelModal,disableTooltip:this.genePanelModal.isOpen,generateGenomeNexusHgvsgUrl:this.patientViewPageStore.generateGenomeNexusHgvsgUrl})),r.createElement("hr",null),r.createElement(fo.a,{isLoading:"loading"===this.cnaTableStatus||this.patientViewPageStore.studyIdToStudy.isPending}),this.patientViewPageStore.studyIdToStudy.isComplete&&this.patientViewPageStore.genePanelIdToEntrezGeneIds.isComplete&&this.patientViewPageStore.referenceGenes.isComplete&&r.createElement("div",{"data-test":"patientview-copynumber-table"},r.createElement(Tr,{uniqueSampleKeyToTumorType:this.patientViewPageStore.uniqueSampleKeyToTumorType,studyIdToStudy:this.patientViewPageStore.studyIdToStudy.result,sampleIds:t?t.getSampleIdsInOrder():[],sampleManager:t,sampleToGenePanelId:this.patientViewPageStore.sampleToDiscreteGenePanelId.result,genePanelIdToEntrezGeneIds:this.patientViewPageStore.genePanelIdToEntrezGeneIds.result,cnaOncoKbData:this.patientViewPageStore.cnaOncoKbData,cnaCivicGenes:this.patientViewPageStore.cnaCivicGenes,cnaCivicVariants:this.patientViewPageStore.cnaCivicVariants,oncoKbCancerGenes:this.patientViewPageStore.oncoKbCancerGenes,usingPublicOncoKbInstance:this.patientViewPageStore.usingPublicOncoKbInstance,enableOncoKb:Ct.b.serverConfig.show_oncokb,enableCivic:Ct.b.serverConfig.show_civic,userEmailAddress:Ct.b.serverConfig.user_email_address,pubMedCache:this.patientViewPageStore.pubMedCache,referenceGenes:this.patientViewPageStore.referenceGenes.result,data:this.patientViewPageStore.mergedDiscreteCNADataFilteredByGene,copyNumberCountCache:this.patientViewPageStore.copyNumberCountCache,mrnaExprRankCache:this.patientViewPageStore.mrnaExprRankCache,gisticData:this.patientViewPageStore.gisticData.result,mrnaExprRankMolecularProfileId:this.patientViewPageStore.mrnaRankMolecularProfileId.result||void 0,status:this.cnaTableStatus,columnVisibility:this.cnaTableColumnVisibility,showGeneFilterMenu:this.patientViewPageStore.cnaTableShowGeneFilterMenu.result,currentGeneFilter:this.patientViewPageStore.copyNumberTableGeneFilterOption,onFilterGenes:this.onFilterGenesCopyNumberTable,columnVisibilityProps:{onColumnToggled:this.onCnaTableColumnVisibilityToggled},onSelectGenePanel:this.toggleGenePanelModal,disableTooltip:this.genePanelModal.isOpen}))),this.patientViewPageStore.sampleIds.length>1&&this.patientViewPageStore.existsSomeMutationWithVAFData&&r.createElement(co.a,{key:1,id:"genomicEvolution",linkText:"Genomic Evolution"},r.createElement(xi,{store:this.patientViewPageStore,mutationTableColumnVisibility:this.mutationTableColumnVisibility,onMutationTableColumnVisibilityToggled:this.onMutationTableColumnVisibilityToggled,sampleManager:t,urlWrapper:this.urlWrapper})),r.createElement(co.a,{key:2,id:$o.a.ClinicalData,linkText:"Clinical Data"},r.createElement("div",{className:"clearfix"},r.createElement(L.a,{title:"Patient",isLoading:this.patientViewPageStore.clinicalDataPatient.isPending,className:"pull-left"}),this.patientViewPageStore.clinicalDataPatient.isComplete&&r.createElement(ee,{showTitleBar:!0,data:this.patientViewPageStore.clinicalDataPatient.result})),r.createElement("br",null),r.createElement("div",{className:"clearfix"},r.createElement(L.a,{title:"Samples",isLoading:this.patientViewPageStore.clinicalDataGroupedBySample.isPending,className:"pull-left"}),this.patientViewPageStore.clinicalDataGroupedBySample.isComplete&&r.createElement(xn,{samples:this.patientViewPageStore.clinicalDataGroupedBySample.result}))),r.createElement(co.a,{key:4,id:$o.a.FilesAndLinks,linkText:"Files & Links",hide:!this.shouldShowResources},r.createElement("div",null,r.createElement(vl,{store:this.patientViewPageStore,sampleManager:this.sampleManager,openResource:this.openResource}))),r.createElement(co.a,{key:3,id:$o.a.PathologyReport,linkText:"Pathology Report",hide:!this.shouldShowPathologyReport},r.createElement("div",null,r.createElement(uo,{iframeHeight:Io.a.size.height-220,pdfs:this.patientViewPageStore.pathologyReport.result}))),r.createElement(co.a,{key:5,id:$o.a.TissueImage,linkText:"Tissue Image",hide:this.hideTissueImageTab},r.createElement("div",null,r.createElement(eo.a,{height:Io.a.size.height-220,url:Object(ut.j)(this.patientViewPageStore.patientId)}))),this.showWholeSlideViewerTab&&this.wholeSlideViewerUrl.result&&r.createElement(co.a,{key:6,id:$o.a.MSKTissueImage,linkText:"Tissue Image",unmountOnHide:!1},r.createElement("div",null,r.createElement(eo.a,{height:Io.a.size.height-220,url:this.wholeSlideViewerUrl.result}))),this.shouldShowTrialMatch&&r.createElement(co.a,{key:7,id:$o.a.TrialMatchTab,linkText:"Matched Trials"},r.createElement(qo,{sampleManager:t,detailedTrialMatches:this.patientViewPageStore.detailedTrialMatches.result,containerWidth:Io.a.size.width-20})),this.resourceTabs.component,Ct.b.serverConfig.custom_tabs&&Ct.b.serverConfig.custom_tabs.filter(function(e){return"PATIENT_PAGE"===e.location}).map(function(t,n){return r.createElement(co.a,{key:100+n,id:"customTab1",unmountOnHide:!0===t.unmountOnHide,onTabDidMount:function(n){e.customTabMountCallback(n,t)},linkText:t.title})}))),r.createElement(l.Else,null,r.createElement(fo.a,{isLoading:!0,center:!0,size:"big"})))))}},{key:"cnaTableStatus",get:function(){return this.patientViewPageStore.molecularProfileIdDiscrete.isComplete?void 0===this.patientViewPageStore.molecularProfileIdDiscrete.result?"unavailable":this.patientViewPageStore.discreteCNAData.isComplete?"available":"loading":"loading"}},{key:"showWholeSlideViewerTab",get:function(){return this.patientViewPageStore.clinicalDataForSamples.isComplete&&a.some(this.patientViewPageStore.clinicalDataForSamples.result,function(e){return"MSK_SLIDE_ID"===e.clinicalAttributeId})}},{key:"shouldShowResources",get:function(){return!!this.patientViewPageStore.resourceIdToResourceData.isComplete&&a.some(this.patientViewPageStore.resourceIdToResourceData.result,function(e){return e.length>0})}},{key:"shouldShowPathologyReport",get:function(){return this.patientViewPageStore.pathologyReport.isComplete&&this.patientViewPageStore.pathologyReport.result.length>0}},{key:"hideTissueImageTab",get:function(){return this.patientViewPageStore.hasTissueImageIFrameUrl.isPending||this.patientViewPageStore.hasTissueImageIFrameUrl.isError||this.patientViewPageStore.hasTissueImageIFrameUrl.isComplete&&!this.patientViewPageStore.hasTissueImageIFrameUrl.result}},{key:"shouldShowTrialMatch",get:function(){return"true"===Object(b.B)().localStorage.trialmatch&&this.patientViewPageStore.detailedTrialMatches.isComplete&&this.patientViewPageStore.detailedTrialMatches.result.length>0}},{key:"modalSelectedGenePanel",get:function(){return this.patientViewPageStore.genePanelIdToPanel.result[this.genePanelModal.genePanelId]}},{key:"sampleManager",get:function(){if(this.patientViewPageStore.patientViewData.isComplete&&this.patientViewPageStore.studyMetaData.isComplete){var e=this.patientViewPageStore.patientViewData.result;return this.patientViewPageStore.clinicalEvents.isComplete&&this.patientViewPageStore.clinicalEvents.result.length>0?new Oe(e.samples,this.patientViewPageStore.clinicalEvents.result):new Oe(e.samples)}return null}}])&&Tl(n.prototype,o),i&&Tl(n,i),t}();_l([I.observable],Cl.prototype,"mutationTableColumnVisibility",void 0),_l([I.observable],Cl.prototype,"cnaTableColumnVisibility",void 0),_l([I.observable],Cl.prototype,"genePanelModal",void 0),_l([I.observable],Cl.prototype,"urlWrapper",void 0),_l([I.computed],Cl.prototype,"cnaTableStatus",null),_l([I.computed],Cl.prototype,"showWholeSlideViewerTab",null),_l([I.action],Cl.prototype,"onCnaTableColumnVisibilityToggled",null),_l([I.action],Cl.prototype,"onMutationTableColumnVisibilityToggled",null),_l([I.computed],Cl.prototype,"shouldShowResources",null),_l([I.computed],Cl.prototype,"shouldShowPathologyReport",null),_l([I.computed],Cl.prototype,"hideTissueImageTab",null),_l([I.computed],Cl.prototype,"shouldShowTrialMatch",null),_l([z.default],Cl.prototype,"customTabMountCallback",null),_l([z.default],Cl.prototype,"onFilterGenesMutationTable",null),_l([z.default],Cl.prototype,"onFilterGenesCopyNumberTable",null),_l([z.default,I.action],Cl.prototype,"toggleGenePanelModal",null),_l([I.computed],Cl.prototype,"modalSelectedGenePanel",null),_l([I.computed],Cl.prototype,"sampleManager",null),_l([z.default,I.action],Cl.prototype,"openResource",null),_l([z.default,I.action],Cl.prototype,"closeResourceTab",null),Cl=_l([Object(Wt.inject)("routing","appStore"),Wt.observer],Cl);t.default=Cl},581:function(e,t,n){e.exports=n(16)(903)},584:function(e,t,n){"use strict";var r=n(3);t.a=new r.p},605:function(e,t,n){"use strict";n.d(t,"a",function(){return w}),n.d(t,"b",function(){return T});var r=n(0),o=n(4),a=n(9),i=n.n(a),l=(n(666),n(8)),u=n(101),c=n(2),s=n(7),p=n(649);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function h(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},E=function(e){function t(){var e;return f(this,t),(e=h(this,y(t).apply(this,arguments))).renderedOnce=!1,e}return g(t,r["Component"]),m(t,[{key:"render",value:function(){var e=this;return this.renderedOnce||setTimeout(function(){return e.renderedOnce=!0}),r.createElement("div",{className:this.props.className},this.renderedOnce&&this.props.children,!this.renderedOnce&&(this.props.loadingState||null))}}]),t}();S([c.observable],E.prototype,"renderedOnce",void 0),E=S([s.observer],E);var w=function(e){function t(){return f(this,t),h(this,y(t).apply(this,arguments))}return g(t,r["Component"]),m(t,[{key:"componentDidMount",value:function(){this.props.onTabDidMount&&this.props.onTabDidMount(this.div)}},{key:"componentWillUnmount",value:function(){this.props.onTabUnmount&&this.props.onTabUnmount(this.div)}},{key:"assignRef",value:function(e){this.div=e}},{key:"render",value:function(){var e=this;return r.createElement("div",{ref:function(t){return e.div=t},className:i()({"msk-tab":!0,hiddenByPosition:!!this.props.inactive},this.props.className)},this.props.children)}}]),t}();S([l.default],w.prototype,"assignRef",null);var T=function(e){function t(e){var n;return f(this,t),(n=h(this,y(t).call(this,e))).shownTabs=[],n.tabRefs=[],n.tabIdToNavTabWidth={},n.needToRecomputeNavTabWidths=!0,n.tabClickHandlers=Object(p.a)(function(e,t){e.preventDefault(),n.setActiveTab(t.id,t.datum)}),n.state={currentPage:1,pageBreaks:[]},n}return g(t,r["Component"]),m(t,[{key:"cloneTab",value:function(e,t,n){return n?r.cloneElement(e,{inactive:t},this.props.loadingComponent):r.cloneElement(e,{inactive:t})}},{key:"setActiveTab",value:function(e,t){this.props.onTabClick&&this.props.onTabClick(e,t)}},{key:"navTabsRefHandler",value:function(e){this.navTabsRef=e}},{key:"tabRefHandler",value:function(e,t){e&&t&&this.tabRefs.push({id:e,element:t})}},{key:"nextPage",value:function(){this.setState({currentPage:this.state.currentPage+1})}},{key:"prevPage",value:function(){this.setState({currentPage:this.state.currentPage-1})}},{key:"render",value:function(){var e=this;if(this.props.children&&r.Children.count(this.props.children)){var t,n=this.props.children,a=r.Children.toArray(n),l=e.props.activeTabId&&o.some(a,function(t){return t.props.id===e.props.activeTabId})?e.props.activeTabId:a[0].props.id;return t=o.reduce(a,function(t,n){return n.props.hide||(n.props.id===l?(e.shownTabs.push(n.props.id),t.push(e.cloneTab(n,!1))):(!1===n.props.unmountOnHide||void 0===n.props.unmountOnHide&&!1===e.props.unmountOnHide)&&o.includes(e.shownTabs,n.props.id)&&t.push(e.cloneTab(n,!0))),t},[]),r.createElement("div",{id:this.props.id?this.props.id:"",className:i()("msk-tabs","posRelative",this.props.className)},this.navTabs(n,l),r.createElement(E,{className:"tab-content",loadingState:r.createElement(u.a,{isLoading:!0,center:!0,size:"big"})},t))}return null}},{key:"navTabs",value:function(e,t){this.tabRefs=[];var n=this.tabPages(e,t),o=this.state.pageBreaks.length+1,a=this.state.currentPage>1?r.createElement("li",{key:"prevPage",style:{cursor:"pointer"}},r.createElement("a",{onClick:this.prevPage.bind(this)},r.createElement("i",{className:"fa fa-chevron-left",style:this.props.arrowStyle}))):null,l=this.state.currentPage<o?r.createElement("li",{key:"nextPage",style:{cursor:"pointer"}},r.createElement("a",{onClick:this.nextPage.bind(this)},r.createElement("i",{className:"fa fa-chevron-right",style:this.props.arrowStyle}))):null,u=this.props.tabButtonStyle||"tabs";return r.createElement("ul",{ref:this.navTabsRefHandler.bind(this),className:i()("nav","nav-".concat(u))},a,n[this.state.currentPage-1],l)}},{key:"tabPages",value:function(e,t){var n=this,o=[[]],a=1;return r.Children.forEach(e,function(e){if(e&&!e.props.hide){var l=t===e.props.id?"active":"";n.props.getPaginationWidth&&n.state.pageBreaks.length>0&&n.state.pageBreaks[a-1]===e.props.id&&(o[++a-1]=[]);var u=null;if(e.props.onClickClose){var c=e.props.onClickClose;u=r.createElement("div",{className:"closeButton",onClick:function(t){t.stopPropagation(),c(e.props.id)}},r.createElement("i",{className:"fa fa-md fa-times-circle"}))}o[a-1].push(r.createElement("li",{key:e.props.id,style:{cursor:"pointer"},ref:n.tabRefHandler.bind(n,e.props.id),className:l},r.createElement("a",{className:i()("tabAnchor","tabAnchor_".concat(e.props.id),e.props.anchorClassName),onClick:n.tabClickHandlers(e.props),href:n.props.getTabHref&&n.props.getTabHref(e.props.id),style:e.props.anchorStyle},e.props.linkText,u)))}}),o}},{key:"componentWillReceiveProps",value:function(e){o.isEqual(t.getVisibleTabIds(e.children),t.getVisibleTabIds(this.props.children))||(this.needToRecomputeNavTabWidths=!0)}},{key:"componentDidMount",value:function(){var e=this;this.computeNavTabWidths(),this.needToRecomputeNavTabWidths=!1,this.widthReaction=Object(c.autorun)(function(){e.props.getPaginationWidth&&(e.props.getPaginationWidth(),e.initPaging())})}},{key:"componentWillUnmount",value:function(){this.widthReaction()}},{key:"componentDidUpdate",value:function(){this.needToRecomputeNavTabWidths&&(this.computeNavTabWidths(),this.needToRecomputeNavTabWidths=!1,this.initPaging())}},{key:"computeNavTabWidths",value:function(){var e=this;o.each(this.tabRefs,function(t){e.tabIdToNavTabWidth[t.id]=t.element.offsetWidth}),window.test=this.tabIdToNavTabWidth}},{key:"initPaging",value:function(){if(this.props.getPaginationWidth){var e=this.findPageBreaks(),t=this.findCurrentPage(e);this.setState({currentPage:t,pageBreaks:e})}}},{key:"findCurrentPage",value:function(e){var t=this,n=1,r=!1;return this.props.activeTabId&&e.length>0&&o.each(this.tabRefs,function(o){if(o.id===e[n-1]&&n++,o.id===t.props.activeTabId)return r=!0,!1}),r?n:1}},{key:"findPageBreaks",value:function(){var e=this,t=[];if(this.needToRecomputeNavTabWidths)return[];var n=this.props.getPaginationWidth&&this.props.getPaginationWidth()||0;if(n>0){var o=0;r.Children.forEach(this.props.children,function(r,a){if(r&&r.props.id in e.tabIdToNavTabWidth&&(o+=e.tabIdToNavTabWidth[r.props.id],0!==a)){o>n-50&&(t.push(r.props.id),o=e.tabIdToNavTabWidth[r.props.id])}})}return t}}],[{key:"getVisibleTabIds",value:function(e){return r.Children.map(e,function(e){return e&&!e.props.hide?e.props.id:null}).filter(function(e){return null!==e})}}]),t}();T.defaultProps={unmountOnHide:!0,loadingComponent:r.createElement(u.a,{isLoading:!0,center:!0,size:"big"})},S([l.default],T.prototype,"initPaging",null)},607:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return f});var r=n(4),o=n.n(r),a=n(640),i=n.n(a),l=n(3),u=n(576);function c(e,t){return Object(l.fb)(e,t,u.b.fontFamily,u.b.fontSize+"px")}function s(e){for(var t="",n=0;n<e;n++)t+="0";return t}function p(e,t){for(var n=0,r="";n<3;){if(r=t(n),o.a.uniq(e.map(function(e){return i()(e).format(r)})).length===e.length)break;n++}return r}function f(e,t,n){return n&&(e=n(e),t=t.map(n)),e>=1e3?i()(e).format(function(e){return p(e=e.filter(function(e){return Math.abs(e)>=1e3}),function(e){return"0.[".concat(s(e),"]a")})}(t)):i()(e).format(function(e){return p(e=e.filter(function(e){return Math.abs(e)<1e3}),function(e){return"0.[".concat(s(e),"]")})}(t))}},608:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(0),o=n(691),a=n.n(o),i=n(9),l=n.n(i);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=p(this,f(t).apply(this,arguments))).handleInputRef=function(t){e.input=t,e.props.inputProps&&"function"==typeof e.props.inputProps.ref&&e.props.inputProps.ref(t)},e}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.input.indeterminate=!!this.props.indeterminate}},{key:"componentDidUpdate",value:function(){this.input.indeterminate=!!this.props.indeterminate}},{key:"render",value:function(){var e=this.props.labelProps&&this.props.labelProps.className,t=l()(a.a.labeledCheckbox,e);return r.createElement("label",c({className:t},this.props.labelProps),r.createElement("input",c({type:this.props.inputProps&&this.props.inputProps.type||"checkbox",checked:this.props.checked,onChange:this.props.onChange,disabled:this.props.disabled},this.props.inputProps,{ref:this.handleInputRef})),this.props.children)}}])&&s(n.prototype,o),i&&s(n,i),t}()},633:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1w8-Y",framedImage:"styles-module__framedImage__bM7JH","integer-data":"styles-module__integer-data__1Bn0H"}},644:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__1kueS",framedImage:"styles-module__framedImage__1ndwn",SurvivalTable:"styles-module__SurvivalTable__2NKCT",Tooltip:"styles-module__Tooltip__1I-Ty",NotAvailable:"styles-module__NotAvailable__1Zx5R",XmaxNumberInput:"styles-module__XmaxNumberInput__SQsf6"}},649:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.inputToKey=t,this.inputToOutput=n,this.memo={}}var t,n,o;return t=e,(n=[{key:"get",value:function(e){var t=this.inputToKey(e);return this.memo[t]=this.memo[t]||this.inputToOutput(e),this.memo[t]}},{key:"has",value:function(e){return this.inputToKey(e)in this.memo}}])&&r(t.prototype,n),o&&r(t,o),e}();function a(e){return JSON.stringify(e,Object.keys(e).sort())}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=new o(t,function(t){return function(n){return e(n,t)}});return function(e){return n.get(e)}}n.d(t,"a",function(){return i})},660:function(e,t,n){e.exports={portalWidth:"annotation-module__portalWidth__1ONSd",framedImage:"annotation-module__framedImage__3aREl","annotation-item-text":"annotation-module__annotation-item-text__2FRXN","annotation-item-error":"annotation-module__annotation-item-error__1XUY_","annotation-item":"annotation-module__annotation-item__1YzCz"}},666:function(e,t,n){},673:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgICB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDE5NC4wMDAwMDAgMTk0LjAwMDAwMCIKICAgICBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCBtZWV0Ij4KIDxtZXRhZGF0YT4KICBDcmVhdGVkIGJ5IHBvdHJhY2UgMS4xMCwgd3JpdHRlbiBieSBQZXRlciBTZWxpbmdlciAyMDAxLTIwMTEKIDwvbWV0YWRhdGE+CiA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCwxOTQuMDAwMDAwKSBzY2FsZSgwLjA1MDAwMCwtMC4wNTAwMDApIgogICAgZmlsbD0iIzM2NmJjYyIgc3Ryb2tlPSJub25lIj4KICA8cGF0aCBkPSJNMTc0NiAzODU4IGMtMTYwNSAtMTQ5IC0yMzEyIC0yMTM1IC0xMTY4IC0zMjgwIDEyMTIgLTEyMTIgMzI4NQotMzUzIDMyODUgMTM2MiAwIDExNDkgLTk2NyAyMDI1IC0yMTE3IDE5MTh6IG00OTAgLTQ4OSBjOTIyIC0xODcgMTQyNyAtMTIxMQoxMDE0IC0yMDU5IC01MzggLTExMDUgLTIwODIgLTExMDUgLTI2MjAgMCAtNTI2IDEwODAgNDI0IDIyOTggMTYwNiAyMDU5eiIvPgogIDxwYXRoIGQ9Ik0xNjcwIDMxMTEgYy0xODEgLTU0IC0xOTkgLTYwIC0zMjUgLTEyOSAtNjc2IC0zNjYgLTgwNSAtMTMzNiAtMjUyCi0xODg5IDU1MiAtNTUzIDE1MjQgLTQyNCAxODg5IDI1MiAzMTggNTkwIDExNiAxMzMzIC00NDcgMTYzNyAtMjY0IDE0MiAtNjMxCjE5NyAtODY1IDEyOXogbTU0MyAtNDk0IGMxNjIgLTYwIDM0MyAtMjQxIDQwNyAtNDA3IDI4NSAtNzM1IC02MzUgLTEzMzkKLTExOTIgLTc4MiAtNTYxIDU2MSAzOCAxNDY4IDc4NSAxMTg5eiIvPgogIDxwYXRoIGQ9Ik0xODIwIDI0MDIgYy01MzIgLTE3NCAtNDM1IC05MzEgMTIwIC05MzEgNDk5IDAgNjU3IDY2NCAyMTIgODkzIC04Ngo0NCAtMjU1IDY0IC0zMzIgMzh6Ii8+CiA8L2c+Cjwvc3ZnPgo="},686:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return l});var r=n(0),o=n(3);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return e<.01?e.toFixed(4):e.toFixed(2)}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,l;return t=e,l=[{key:"mainContent",value:function(e,t,n){var a=r.createElement("span",null,r.createElement("b",null,t)," variant reads out of"," ",r.createElement("b",null,t+n)," total");return r.createElement(o.c,{placement:"left",overlay:a,arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!0},r.createElement("span",null,i(e)))}},{key:"renderFunction",value:function(t){var n=e.getSortValue(t);if(n){var a=t[0].tumorAltCount,i=t[0].tumorRefCount;return e.mainContent(n,a,i)}return r.createElement(o.o,{status:o.n.NA})}},{key:"getTextValue",value:function(t){var n=e.getSortValue(t);return n?i(n):""}},{key:"getSortValue",value:function(e){var t=e[0];if(!t)return null;var n=t.tumorAltCount,r=t.tumorRefCount;return n<0||r<0?null:n/(n+r)}},{key:"isVisible",value:function(e){if(e){var t=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;if(this.getSortValue(i))return!0}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}return!1}}],(n=null)&&a(t.prototype,n),l&&a(t,l),e}()},687:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAABJCAIAAADdSs1eAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAdMSURBVHhe7VpdTFdlGA/jS5AARUTDkC/RIlfQ5mbkFisuaH2MNusit6Zrulbroq1uWhdetNVNX5vTNb2xC7rQlW2skcMiZrilFTKQDwEVFJAiFRAFpR97Dw8P53/+5z3nPe/5/4/bOTsXcM778by/9/k9v+d9zj9hbm7ugfBiCCwL0TAhECJidokQkRARWZgIfcSMUEIctab90uS+oxfJoj3PrX2qOCMzLTHaLp7pu3ni3PiZvgnRYOf2NS9WrrJsPHBt+oNv++jVhy+vryzKkDmH8T6ePsLhgDkHT1xt7rweze6xGzOf/nCZ4ECzI80j16dmLdu39tzgz4GjQzjQLJ6IRFqJRU7dvmtpfdfVqcjnM7MWyRRGOHZ6jDcGjvAah6AEApHnt2STuX0j1qZ/2TAk2tRtzbFfW+eQgV1l0QpqeWH41v2ESF5WMoKCsPj3pQ4vHtIOY5Hl+en2azvbbwSaqk2ZBB8o6RARr5F19L/pr453tg84Iur3H1dzs3Z83iH+BRyPP5JOsfCbPRtN8bX+1Kggwnu1D2cuT6QAtH93ac5DSXxMRJa3DnaLJ1+8WTwxffej+gHx72dvFG1YnSrFxStrDjR0OYTD3hRua+9SD+dxoWxtmv041BfetC47JX9lilvieEJkfOKOFjiE0VBf8YdJGiguINyYPCISHU4ZvE1LeZATJ1rY5uN4QqSlfeTO7D0MV74hG4yQ3vbbW5y3XDSANFwZv02NaZEVhYuR0nIo9Pq5zeBvYa5BEN5r8N/FYaMZ4wmRprZhMW71ljwpP6UNOHH6Rw3F4YssWYAs2lDUS1BGNOPEIXBtjFFHpH/4Jm4MnZy4bOum1dIFO2lAxCGt7Rw0pBTOb5POisFbzhsJHlSGpuPEQXiWEkcdEXIQwJGeGjX1dgIEtSHi4IlQXFJNJ5ShjBZ6hByX7vWrFuOrlDiKiCB8IIiIlTyrgzJiKBCH0qpzlya7WZ7Knd8SZaIM3kKe3z7UQzd5HF5JiaOIyJ+9/0BoMEH2iuSKEuvjlivvoMbk8Mjof+0wWICEBc5vPyBRxr4ZiBPtNCQ6KiLS0jEq+lc/YUim2voje5FG4BUJB/I3+/FBMaIMIg4QNN38oGDKd0wjqyAyOT17+vy1BcpoRgQawc8jxCZ7RPix5fVtuagSmO4XKlbSCPbEUUHkt4U0pCw/Mz9HkkQq+A5XCnQnAbIZigIwnY9MjTnQcD0b4qggcnIhDdEYU/kCOHHwfHO+BHR+0i9bZ6R5kfBxoG2I4xqRwbGprsH5gIc05Jly48Cq4AjoQuxIS15iBvaTaM9zLTFLclICTZeUOP/3xC2jpILGNpLEz0RXxudlwfJyffY90nThaMt8KRBwvF/3mBoWQe7l2kea/jIKDVWP5gZ5Ycq2uUPkLEtDntSahigvQHtHd4hQGlJVvgZxRLs1QRjQxap45q7lsBuE9Ufa4AIRqoYU5mXgDuZ6vFvlAhG91RDvpvs0glNEUGEWBUSEDwQRn6wJwrBOEWn62xBdSAzOu0Ew3ScbXCMSwJgK/31lXxPuHZ/8ImoUXi5HiIAvmBXTwDsCmIbkZqWi9A3zuBoqg+IIEV5ADGYaQgk0ZUw+IgLgWTVEQ81d2Vabjjhkia3CKRRnUS9TyH0EcKBEhDlQCkFBxMtk/vVF6Zu+B5xsc/qJ19IeOSKsGqK5XKYXICrW0FlUbXwJIgjdON2JobWXVNUsjtYLBXCRFnCbFaaQIEJ403wKc8SsC+0Z+bXC1BJEeOgW0eS+uEgKFKyVIELpKbjzzv5WLzMpGOe8CyQG5oniHq4sD1m1pKoIvzjU2MNjFejz7kubg5PIw8L65v4fWy8TfLBwb20Z0jbngPKWjuqscJDDjT2k85C6um0Fr1YVqE2psRcM+/p4J2XuMGx3TalHBXCECNaAPO275n5ySzxBbrK3dmO8CiVAAViQDgop3Fld7N15nSIiNhY/jzjQ0C2+TogLnvLa9sIYp/Y//TGETwIU6YECiKzr87M7RAQK8BT4i/h1ES7ksrtqSnUZZM8pMBeu4euWqCACoy2dFhzW9UOSSFwEbRFBaSdAWNBW+8FCERFhMT4AI+LqDWyWPoJyBH4USaEdJAVVfQrtnhCB9Zby7EX8TIhYjg+S+vEFXkztFRExik97GDMf5NugBxGMGCnPXnjun7jaR25tPkLTWGoB0jlXEdekZcg+QcPYaJl+REiej526qJAvQFYPN/b6Kq6x9hGaL9LtUfhDRIyWU1rmxLtqSrSLa9wQcSXPSMYhrqLcj8tXcY0zIpbyjG1H0i3kE66EfNx0ttYo3tL1RzbQpjX2cyM0IPvmKVbd0wVZ6cn8eKLl5KoAgalLjBAheeZpODcFJ1dfDwHOkYodIsKmSHmOsbhKoYk1IsIgeAoKX5DnuBQT7EGJDyKCRDOz91xlbtLt1dIgbohosd6PQeTf9PyYNchjhoiYdydEJERExtjQR0IfCX1EhkDoIzKE/gco765KHggW0QAAAABJRU5ErkJggg=="},688:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(10);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).apply(this,arguments))}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return r.createElement(o.b,{to:"/study?id=".concat(this.props.studyId),className:this.props.className},this.props.children)}}])&&i(n.prototype,a),s&&i(n,s),t}()},689:function(e,t,n){"use strict";var r=n(0),o=n(7),a=n(2),i=n(8),l=n(56),u=n(9),c=n.n(u),s=n(644),p=n.n(s),f=n(3),d=n(550);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":v(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},E=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},w=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=y(this,g(t).apply(this,arguments))).mousePosition={x:0,y:0},e.tooltipOpen=!1,e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,r["Component"]),n=t,(o=[{key:"onMouseOver",value:function(){this.tooltipOpen=!0}},{key:"onMouseOut",value:function(){this.tooltipOpen=!1}},{key:"onMouseMove",value:function(e){this.mousePosition.x=e.pageX,this.mousePosition.y=e.pageY}},{key:"render",value:function(){var e=this.props,t=(e.text,e.maxWidth,e.datum,e.suffix,e.tooltip,e.prefixTspans,e.alwaysShowTooltip,e.renderTruncatedText,e.transform),n=e.tooltipPlacement,o=e.textRef,a=E(e,["text","maxWidth","datum","suffix","tooltip","prefixTspans","alwaysShowTooltip","renderTruncatedText","transform","tooltipPlacement","textRef"]),i=void 0;return t&&void 0!==this.props.x&&void 0!==this.props.y&&(i=t(this.props.x,this.props.y)),r.createElement(r.Fragment,null,r.createElement("text",m({onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onMouseMove:this.onMouseMove,ref:o,transform:i},a),this.props.prefixTspans,this.truncatedText),(this.textReport.isTruncated||this.props.alwaysShowTooltip)&&this.tooltipOpen&&r.createElement(d.a,{isOpened:!0,node:document.body},r.createElement(l.Popover,{arrowOffsetTop:17,className:c()("cbioportal-frontend","cbioTooltip",p.a.Tooltip),positionLeft:this.mousePosition.x+("left"===n?-8:8),positionTop:this.mousePosition.y-17,style:{transform:"left"===n?"translate(-100%,0%)":void 0},placement:n},this.tooltipElt)))}},{key:"tooltipElt",get:function(){return this.props.tooltip?this.props.tooltip(this.props.datum):r.createElement("span",null,this.props.text)}},{key:"fontFamily",get:function(){var e="Arial";return this.props.style&&this.props.style.fontFamily&&(e=this.props.style.fontFamily.split(", ")[0]),e}},{key:"fontSize",get:function(){var e="13px";return this.props.style&&this.props.style.fontSize&&(e=this.props.style.fontSize+"px"),e}},{key:"textReport",get:function(){return Object(f.db)(this.props.text||"",this.props.maxWidth,this.fontFamily,this.fontSize)}},{key:"truncatedText",get:function(){return this.props.renderTruncatedText?this.props.renderTruncatedText(this.textReport.text):r.createElement("tspan",null,this.textReport.text)}}])&&h(n.prototype,o),a&&h(n,a),t}();w.defaultProps={maxWidth:100,suffix:"..."},S([a.observable],w.prototype,"mousePosition",void 0),S([a.observable],w.prototype,"tooltipOpen",void 0),S([a.computed],w.prototype,"tooltipElt",null),S([i.default,a.action],w.prototype,"onMouseOver",null),S([i.default,a.action],w.prototype,"onMouseOut",null),S([i.default],w.prototype,"onMouseMove",null),S([a.computed],w.prototype,"fontFamily",null),S([a.computed],w.prototype,"fontSize",null),S([a.computed],w.prototype,"textReport",null),S([a.computed],w.prototype,"truncatedText",null),w=S([o.observer],w),t.a=w},690:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxMDI0IiBoZWlnaHQ9IjEwMjQiIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPgogICAgPGcgaWQ9Imljb21vb24taWdub3JlIj4KICAgIDwvZz4KICAgIDxwYXRoIGZpbGw9IiNmZjk5MDAiIGQ9Ik0zMjEuMDA4IDEwNDUuMzMzYy02OC4yNDUtMTQyLjAwOC0zMS45MDEtMjIzLjM3OSAyMC41NTEtMzAwLjA0NCA1Ny40NC04My45NTYgNzIuMjQ0LTE2Ny4wNjUgNzIuMjQ0LTE2Ny4wNjVzNDUuMTUzIDU4LjcgMjcuMDkyIDE1MC41MDhjNzkuNzcyLTg4LjggOTQuODI0LTIzMC4yOCA4Mi43ODMtMjg0LjQ2NCAxODAuMzE1IDEyNi4wMTIgMjU3LjM3NiAzOTguODU2IDE1My41MjMgNjAxLjA2NSA1NTIuMzcyLTMxMi41MzIgMTM3LjM5OS03ODAuMTcyIDY1LjE1NS04MzIuODUxIDI0LjA4MSA1Mi42NzYgMjguNjQ4IDE0MS44NTEtMjAgMTg1LjEyNy04Mi4zNTItMzEyLjI3Ni0yODUuOTcyLTM3Ni4yNzYtMjg1Ljk3Mi0zNzYuMjc2IDI0LjA4MyAxNjEuMDQ0LTg3LjI5NiAzMzcuMTQ0LTE5NC42OTYgNDY4LjczMS0zLjc3NS02NC4yMTYtNy43ODMtMTA4LjUyOC00MS41NDktMTY5Ljk4LTcuNTggMTE2LjY1Ni05Ni43MzIgMjExLjc0OC0xMjAuODczIDMyOC42MjgtMzIuNzAxIDE1OC4yODcgMjQuNDk2IDI3NC4xOCAyNDEuNzQ4IDM5Ni42MjN6Ij48L3BhdGg+Cjwvc3ZnPgo="},691:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__-Qj7G",framedImage:"styles-module__framedImage__TmznI",labeledCheckbox:"styles-module__labeledCheckbox__jTAe1"}},725:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(3);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).apply(this,arguments))}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=r.createElement("svg",{width:"12",height:"12"},r.createElement("circle",{r:"5",cx:"6",cy:"6",stroke:this.props.stroke,fill:this.props.circleFill}),r.createElement("text",{x:"3",y:"8.5",fontSize:this.props.fontSize,fill:this.props.textFill},this.props.text.slice(0,1)));return this.props.tooltip&&(e=r.createElement(o.c,{placement:"right",overlay:this.props.tooltip,arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"})},e)),e}}])&&i(n.prototype,a),s&&i(n,s),t}();s.defaultProps={stroke:"#55C",circleFill:"none",fontSize:7,textFill:"#66C"}},726:function(e,t,n){},727:function(e,t,n){"use strict";n.d(t,"b",function(){return h}),n.d(t,"a",function(){return y});var r=n(4),o=n.n(r);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}var m=function(){function e(){p(this,e),this.map={}}return d(e,[{key:"entries",value:function(){for(var e=[],t=0,n=Object.keys(this.map);t<n.length;t++){var r=n[t],o=!0,a=!1,i=void 0;try{for(var l,u=this.map[r][Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;e.push(c)}}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}}return e}},{key:"set",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this.getEntry(n);return o?(o.value=e,!1):(this.getFolder(n).push({key:n,value:e}),!0)}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this.getEntry(t);return r?r.value:void 0}},{key:"has",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!!this.getEntry(t)}},{key:"getEntry",value:function(e){return this.getFolder(e).find(function(t){return o.a.isEqual(t.key,e)})}},{key:"getFolder",value:function(e){var t=function(e){return e.join(",")}(e);return this.map[t]=this.map[t]||[],this.map[t]}}],[{key:"from",value:function(t,n){var r=new e,o=!0,a=!1,i=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;r.set.apply(r,[c].concat(s(n(c))))}}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}return r}}]),e}(),h=function(e){function t(){return p(this,t),i(this,l(t).apply(this,arguments))}return u(t,m),t}(),y=function(e){function t(){return p(this,t),i(this,l(t).apply(this,arguments))}return u(t,m),d(t,[{key:"increment",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.has.apply(this,t)?this.set.apply(this,[this.get.apply(this,t)+1].concat(t)):this.set.apply(this,[1].concat(t))}}]),t}()},736:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(0),o=n(17),a=n(101);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p={marginTop:0},f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).apply(this,arguments))}var n,i,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){return r.createElement(o.If,{condition:this.props.isHidden},r.createElement(o.Else,null,r.createElement("h2",{style:this.props.style||p,className:this.props.className||""},this.props.title,r.createElement(a.a,{isLoading:this.props.isLoading,small:!0}))))}}])&&l(n.prototype,i),f&&l(n,f),t}()},737:function(e,t,n){e.exports={portalWidth:"mutationAssessorColumn-module__portalWidth__3YkFm",framedImage:"mutationAssessorColumn-module__framedImage__1asWn","ma-high":"mutationAssessorColumn-module__ma-high__gHJA0","ma-medium":"mutationAssessorColumn-module__ma-medium__3fKlP","ma-low":"mutationAssessorColumn-module__ma-low__VwQXC","ma-neutral":"mutationAssessorColumn-module__ma-neutral__2oq-W"}},738:function(e,t,n){e.exports={portalWidth:"siftTooltip-module__portalWidth__24Oa2",framedImage:"siftTooltip-module__framedImage__1C_nb","sift-deleterious":"siftTooltip-module__sift-deleterious__1aA2Z","sift-deleterious_low_confidence":"siftTooltip-module__sift-deleterious_low_confidence__2fL6l","sift-tolerated_low_confidence":"siftTooltip-module__sift-tolerated_low_confidence__1u4Hk","sift-tolerated":"siftTooltip-module__sift-tolerated__xqt6g","sift-tooltip-table":"siftTooltip-module__sift-tooltip-table__2KTtP"}},739:function(e,t,n){e.exports={portalWidth:"polyPhen2Tooltip-module__portalWidth__CFsKD",framedImage:"polyPhen2Tooltip-module__framedImage__kQY7t","polyPhen2-probably_damaging":"polyPhen2Tooltip-module__polyPhen2-probably_damaging__EBbPS","polyPhen2-possibly_damaging":"polyPhen2Tooltip-module__polyPhen2-possibly_damaging__1fyF8","polyPhen2-benign":"polyPhen2Tooltip-module__polyPhen2-benign__36nqJ","polyPhen2-unknown":"polyPhen2Tooltip-module__polyPhen2-unknown__3KRAw","polyPhen2-tooltip-table":"polyPhen2Tooltip-module__polyPhen2-tooltip-table__2WGNf"}},740:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAT5QTFRF/Pz8/////P396urqzMzMxsbGxsbGxsbGxsbGxsbGycnJ19fX9vb2/v7+2NjYwsLC+Pr69Pf38PT18fT19ff4+fr79PT0p7GzZ4CGXnuCYX+GZIWNaYqSbo+XZYWNZIKJYXyDbYWLs7m7SHiEAERVcpag+vv7gqavFFhpIWJytsvQgKeyLW5/IWd4Qn2Mv9PYfLTDKoOZKoWbTJqt9/r79Pj5c7zOM5u2MZq0WrDE5/H00+zyodfkVrjPRbHMRbHLULXOm9TjyOfv1OzypNjlndXkz+rx+vz8rdzopNjl7Pb56vX45/T36/b45vT36/b45/T36vX45PP3AENUAEBQAD1MADtKADpIDVJjCU5fB0xdBktcCExdDlJjIWd4KH6TJ3yRJ3qPJ3uQKHyRKYCVMJixMJawMJavMJex////SLEDvgAAAFN0Uk5TAAAAEzVMYW51e0l7fn57Z4OHi4qHggdcu9zu+Pr8+OvXtFC1/YwDhfjrS47u/ddHmv391gcKq/z9yxozdeX9/e19Q0KUo0oGqr0kPEc6SjhGPk2mXRMZAAAAAWJLR0QB/wIt3gAAAAlwSFlzAAAASAAAAEgARslrPgAAALpJREFUGNNjYGBmYWVj5+Dk5GBnY2VhZmDg4ubhhQMePi4GfhBfQFBIWEQUJMLPICYuISklLSMrKyMnr6CoJMbAoKwSHBIaFh4eFhoSrKLKyMCopq4RERkVHR0TGaupxQAUYNTWiYMAXT19RpAAg4FhfEJiUnKKkbEJWIDR1Mw8NS09w8LSihEiwGhtY2tn7+DoxAQTYGRydnF1YwIzIQKM7h6eXozIAozePoyoAr5+aAL+AWgCgUFQBgBUGxvs9K2IRwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0wOS0xNFQwMDoxMTowNSswMzowMPy1TyEAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMDktMTRUMDA6MTE6MDQrMDM6MDArn/wpAAAAAElFTkSuQmCC"},741:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAklQTFRF+/z+////dJ7j///+9Pv/a5TdqL7k4+v6eKDjsMnvtM75X5Hkp77ou9H33+j4vtT4wdf7cp/p3u3/ja/oaaP2ytjsZ47V/f//0N71wc3jKnft0OH8GmbeO3fcQHTSMW7VkbbyuNX/FWDcc5TS///6////2+X4z9zs1NviPoLihbT4/f7+bJ/umLLWyNTnNHzt/P3+1OP7wM7o0dznVoPMob3sY4zVR4jukLb0/v7+SILhz9vr//z0pb7gM3rlzeD9E17aWY/q/f3+R4Lhztnq///2jrfxG2rozd35RYHlgaHX0Nzw///+4+39cZrgtMXjqsn1GGjnf6nwkbTvd53iwtDjXIbOq8Pt/v39obrkN3PXLXnvfaju/v//8/j+gajrk7Hl//72sMTiPnrdt9D5+/z+qcz7AE/dcZzn8ff+iari9vf0+vnxTIfjZprvSo71QHradZjT4en2YIrV+fn03+jxOH/qeqnzKG7eY4rNVH/PiLPzxd37mbHe///3x9ToMWfIpL3roLjiT33PNnzrjLX1ibX04er1+vj18/PvXorWU4be9fj+8/X5NnfiGmjn5/D9+fv+WJTv3OLo5eru7e/vhazoL3Pk2ub6s8/6K3buPnTSm7Tja5zpQnDH7fH1/Pz6///4ga/xM3np4Or6SIboYJPmvszjRnXLp8LvlLvzLmnRydjs///8+Pr6UIjkSYTmwNX3LnLhrcXtjKnZS33V2eb70+P8gaLW///5pMj4CmHqnr31Lm7dztvu9/fy4unwQHTSe6HnW+6dZAAAACF0Uk5T+/7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+EjK2AQAAAAFiS0dEAf8CLd4AAAAJcEhZcwAAAEgAAABIAEbJaz4AAAEOSURBVBjTDcyDQkRRFAXQc7Nta6fJtt3Ltm3brsl2k227vqzWBywiZmhkbAKYCpmZW1iCR8IiVqLWYgziEjaStlLMjmAv7eDo5AzIuLi6Ae4EWQ9PL28fX8j5+QMBIMgHBgWHhIZBITwiEhyPEBUdExsXzyEhMSk5BRylIi09IzML2Tm5efkFhaAiVlxSCqBMsbyisqoaxCnV1NbVg4NyQ2NTcwuIqbSqtqmpg2m0a3ZoaYM6dbq6e3r7wLH+gcGh/3RYd2R0bHyCDzY5NT2DWZrTm19YXFpeAVtdW98AaHNre0ewu7eP7IPDo+MT0OnZ+cXl1TUfN7d3gvuHR3rSf355fXsHDD4+v75/fv8AgKdToRrTqZIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTctMDktMTRUMDA6MjI6NDErMDM6MDD+ZbjKAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE3LTA5LTE0VDAwOjIyOjI2KzAzOjAwjPA3fwAAAABJRU5ErkJggg=="},742:function(e,t,n){"use strict";n.d(t,"b",function(){return g}),n.d(t,"a",function(){return b});var r=n(0),o=n(665),a=n.n(o),i=n(7),l=n(2),u=n(798),c=n(4),s=n.n(c);n(743);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":h(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},g=1,b=0,v=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=f(t).call(this,e))||"object"!==h(o)&&"function"!=typeof o?d(r):o).trackSpecKeyToTrackId={},n.divRefHandler=n.divRefHandler.bind(d(n)),n.refreshOncoprint=s.a.debounce(n.refreshOncoprint.bind(d(n)),0),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["Component"]),n=t,(o=[{key:"divRefHandler",value:function(e){this.div=e}},{key:"getTrackSpecKey",value:function(e){var t=null;return s.a.forEach(this.trackSpecKeyToTrackId,function(n,r){if(n===e)return t=r,!1}),t}},{key:"refreshOncoprint",value:function(e){var t=this;this.oncoprint||(this.oncoprint=new a.a("#".concat(e.divId),e.width,e.initParams),this.oncoprint.setTrackGroupLegendOrder([g,b]),window.frontendOnc=this.oncoprint,e.oncoprintRef&&e.oncoprintRef(this.oncoprint)),this.oncoprint.webgl_unavailable||(Object(u.a)(e,this.lastTransitionProps||{},this.oncoprint,function(){return t.trackSpecKeyToTrackId},function(){return t.props.molecularProfileIdToMolecularProfile}),this.lastTransitionProps=s.a.clone(e))}},{key:"componentWillReceiveProps",value:function(e){this.refreshOncoprint(e)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentDidMount",value:function(){this.refreshOncoprint(this.props)}},{key:"componentWillUnmount",value:function(){this.oncoprint&&(this.oncoprint.destroy(),this.oncoprint=void 0)}},{key:"render",value:function(){return r.createElement("div",{id:this.props.divId,ref:this.divRefHandler})}},{key:"sortByMutationType",get:function(){return this.props.distinguishMutationType&&this.props.sortConfig&&this.props.sortConfig.sortByMutationType}},{key:"sortByDrivers",get:function(){return this.props.distinguishDrivers&&this.props.sortConfig&&this.props.sortConfig.sortByDrivers}}])&&p(n.prototype,o),i&&p(n,i),t}();y([l.computed],v.prototype,"sortByMutationType",null),y([l.computed],v.prototype,"sortByDrivers",null),v=y([i.observer],v),t.c=v},743:function(e,t,n){},748:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(0),o=n(3),a=n(580);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).call(this,e))}var n,i,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Component"]),n=t,(i=[{key:"mainContent",value:function(){var e=this,n=this.props,o=n.barWidth,i=n.barHeight,l=n.barColor,u=n.totalCount,c=n.counts,s=n.textMargin,p=n.textWidth,f=this.props.freqColors||t.defaultProps.freqColors,d=c[this.props.mainCountIndex&&this.props.mainCountIndex>=0&&this.props.mainCountIndex<c.length?this.props.mainCountIndex:0]/u,m=(o||0)+(s||0),h=m+(p||0),y=[];return c.forEach(function(t,n){var r=n%f.length,o=r>=0?f[r]:f[0];y.push(e.frequencyRectangle(t,u,o))}),r.createElement("svg",{width:h,height:"12"},r.createElement("text",{x:m,y:"9.5",textAnchor:"start",fontSize:"10"},Object(a.c)(d)),r.createElement("rect",{y:"2",width:o,height:i,fill:l}),y)}},{key:"frequencyRectangle",value:function(e,t,n){var o=e/t,a=this.props,i=a.barWidth,l=a.barHeight;return r.createElement("rect",{y:"2",width:o*(i||0),height:l,fill:n})}},{key:"render",value:function(){var e=this.mainContent();return this.props.tooltip&&(e=r.createElement(o.c,{placement:"left",overlay:this.props.tooltip,arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"})},e)),e}}])&&l(n.prototype,i),p&&l(n,p),t}();p.defaultProps={freqColors:["lightgreen","green"],barColor:"#ccc",textMargin:6,textWidth:35,barWidth:30,barHeight:8}},749:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(725);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).apply(this,arguments))}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this;return r.createElement("span",{style:{cursor:"default"}},r.createElement(o.a,{text:"M",tooltip:function(){return e.getToolTip(e.props.qValue)}}))}},{key:"getToolTip",value:function(e){return r.createElement("div",null,"Candidate driver gene, as determined by the ",r.createElement("b",null,"MutSig"),r.createElement("br",null),"algorithm.",r.createElement("p",null),"MutSig identifies likely driver genes by evaluating the",r.createElement("br",null),"frequency of observed mutations within the entire study.",r.createElement("p",null),"Note that not all mutations in this gene are necessarily",r.createElement("br",null),"functional/driver events.",r.createElement("p",null),r.createElement("span",null," Q-value: ",(e||0).toExponential(3)))}}])&&i(n.prototype,a),s&&i(n,s),t}()},750:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),o=n(3);function a(e,t,n){return function(a){var i=e(a);return null===i?r.createElement(o.o,{status:o.n.LOADING}):"error"===i.status?r.createElement(o.o,{status:o.n.ERROR}):null===i.data?r.createElement(o.o,{status:o.n.NA,naAlt:n}):t(i.data,a)}}},751:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),o=n(4),a=n(3),i=n(614);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,u;return t=e,u=[{key:"getData",value:function(e,t){var n=null;return t&&(n=t[e[0].uniqueSampleKey]||null),n}},{key:"sortBy",value:function(t,n){var r=e.getData(t,n);return r||null}},{key:"filter",value:function(t,n,r){var o=e.getData(t,r);return null!==o&&o.toUpperCase().indexOf(n)>-1}},{key:"isVisible",value:function(t,n){if(!t||!n)return!1;var r={};return t.forEach(function(t){var o=e.getData(t,n);o&&(r[o]=t[0].sampleId)}),o.keys(r).length>1}},{key:"download",value:function(t,n){return e.getData(t,n)||""}},{key:"render",value:function(t,n){var o=e.getData(t,n);return o?r.createElement(i.a,{maxLength:30,text:o||"",tooltip:r.createElement("div",{style:{maxWidth:300}},o)}):r.createElement(a.o,{status:a.n.NA,naAlt:"Cancer type not available for this sample."})}}],(n=null)&&l(t.prototype,n),u&&l(t,u),e}()},752:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(629),a=(n(587),n(3)),i=n(793),l=n.n(i);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"renderFunction",value:function(t,n,o){var a=e.getGenomeNexusDataFromCache(t,n);return r.createElement("div",{className:l.a["exon-table"]},r.createElement("span",null,e.getExonDataViz(a,o)))}},{key:"getGenomeNexusDataFromCache",value:function(e,t){return 0!==e.length&&t?t.get(e[0]):null}},{key:"getExonDataViz",value:function(t,n){var i=null;if(null===t)i=a.n.LOADING;else if("error"===t.status)i=a.n.ERROR;else{if(null!==t.data){var l=e.getData(t.data);return null==l?l:r.createElement("span",{style:{display:"inline-block",float:"right"}},r.createElement("span",{style:{float:"left",width:"24px",textAlign:"right"}}," ",l.split("/")[0]," "),n&&r.createElement("span",{style:{float:"left",width:"34px",textAlign:"left",marginLeft:"4px"}}," ","/ ".concat(l.split("/")[1])," "))}i=a.n.NA}if(null!==i)return i===a.n.LOADING?r.createElement(o.Circle,{size:18,scaleEnd:.5,scaleStart:.2,color:"#aaa",className:"pull-right"}):r.createElement(a.o,{status:i})}},{key:"getData",value:function(e){if(!e)return null;var t=e.annotation_summary.transcriptConsequenceSummary.exon;if(t)return t;var n=e.transcript_consequences.filter(function(t){return t.transcript_id===e.annotation_summary.transcriptConsequenceSummary.transcriptId&&t.exon})[0];return n?n.exon:null}},{key:"download",value:function(t,n){var r=e.getGenomeNexusDataFromCache(t,n),o=r&&e.getData(r.data);return o||""}},{key:"getSortValue",value:function(t,n){var r=e.getGenomeNexusDataFromCache(t,n);if(r){var o=e.getData(r.data);return null==o?null:parseInt(o.split("/")[0])}return null}}],(n=null)&&u(t.prototype,n),i&&u(t,i),e}()},753:function(e,t,n){e.exports=n.p+"reactapp/images/58335fa45d1c6a16c7d06eabd2ecee93.png"},754:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZMAAAG2CAYAAAC6fWvkAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAABOvAAATrwFj5o7DAAAAB3RJTUUH4QgXDAozoFc2mAAAIABJREFUeNrt3Xl8VPW9//FvkpkhC4SQsAkuuKHiVisTCrZel1ttq17rQ6xttdd7r7a/3uq97eNhtFbbCiQh20Cxtra9Uu21rUKAAGEnFAKYEJiETXYhk5nJrJlMkklmYeacOb8/6u/XWlmSkGTOmXk9/8QwOef9PfLOJ3O+Z9IURREAzq/oT61Lq566+rm0tDTCAM4jnQiA81t/yD/3/br2Z//Y4P1P0gDOL43JBDg3RVHEnNf2f2x1BK+bUJDpNFcapxp0TCcAkwkwAH/Y7X3B6gheJ4QQHZ2RKW/WOV4nFYDJBOi3SEwWhS+3uHz+yOT/92ejR+u7zFXG/LHZOgICmEyAi3tzq6v474tECCH6+mLjKtbZf006AJMJcFHdISndWLSvMxiU8v7xvxn0GcEGk3HG1DyDjaQAJhPgvMpqbW+dq0iEECIak3OKV7ZVkRJAmQDnZeuMTFu2zfmdC33N+gb3Y8ccodtJC6BMgHMqrrGZYrF49oW+Jh4X+nkr2haTFkCZAJ9xpD10x8YG96P9+doPD/juazgVuJ/UAMoE+JR51a2LFUXo+v/1FhOpAZQJ8P/tOtnz5cZD/nsG8neOftzzuTUtnd8mPYAyAYQQQsxfNrgpo2yFpUSWub0eoEyQ8lY1+54+3hq4bTB/1+4KXf3ubs+PSBGpjk2LSGmSrIjZP2mxODyhaYN9jfw8g3dflXFStiGDQMFkAqSipfXuokspEiGE8HdHJ76xxVlGmmAyAVJQMCqLwiKzt6snOuFSXys7SxdoqjJeMX6MPkCyYDIBUsiSjY7KoSgSIYQIhaXc8rV2NjKCMgFSSUdvLP+dTe3/Zyhfs3qH89ttvsh1pAvKBEgRC9fYFoUjUu5QvqYkxbPmr7QuIl1QJkAKsHgj16/a4XpyOF57a5Pn4QO2YCEpgzIBkty8VW2LJDmeNRyvrSgifV51K++dgDIBktl+a+8Xtu31PjSc38P8Uddd2452P0TaoEyAJPX68rbFijL81/2C5a2VpA3KBEhCdUe6/6XlaNfskfhep619M5Y3dfwHqYMyAZLMguWtFSP5/SpWts2PSWwKBmUCJI0P9nQ8d8bWd+NIfk93R/jy3+1w/YT0kQp4nAqSXlRSxKwfN7d7fOGpI/29c8foO5tNxvGjM3UsBJhMAC377XbXa4koEiGECPTGCkwbHL9gFcBkAmhYICyJwpfMnYHeWH6ijmHUqIy+PVXGGyaPNThZETCZABpk2uB4I5FFIoQQZ8/Ko0tW27hVGJQJoEWunujU97a0P6uGY1mz0/nEKXd4BqsCygTQmNIaW2U0Kueo4VjicWGYt6KNx6yAMgG05KQ7fPOaXc65ajqm+uaOB5rO9N7N6oAyATRifnXb4nhcGFR2WGnzlluYTkCZAFqw53TgnvqWji+r8dgOn+y+c8Mh/+OsEigTQOXmLbeYhBBpaj2+kuWWcm7JB2UCqNj6Q/65H53quVPNx2h1BK/73w+9z7NaSCZsWkTSkGVF3PWz/adtjuC1aj/W8fmZ7n2Vd16Wqc9g4cBkAqjJew3eF7RQJEII4fNHJv9qq2sBqwYmE0BFwjFZFL7U4u7sikzSyjHn5Oi6zabCgrxsXZwVBJMJoAK/2uoq1lKRCCFEMCjlldfaf83qgckEUIGuoKQvfGmfNxiU8rR27Hp9emh3xcybryzIbGMlwWQCJFD5OtubWiwSIYSIxeLZxTU2E6sIygRIIFtnZNqyOud3tHwOGxvcjx5pD93BaoIyARKkuMZmiknxbC2fg6II3bwVbYtYTVAmQAJ8ZA9+fmOD+9FkOJfGg757d57oeZBVBWUCjLD5KyyLFEUkzYerz19mqWJVQZkAI6j+RM9XGg/570mmczphCdy6qtn3NKsLygQYIQuWWZLyY3DLq9uKJZnb9UGZAMNuVbPv6ROWwK3JeG4OT2ja0np3EasMrWHTIjRFkhXxhZ+0tDk9oauS9RzHjTV07DMZJ+YYeAgkmEyAYbG03l2UzEUihBBdPdEJSzY6KlltMJkAwyAYlUVhkdnb1ROdkOznmpWZ0dtkKpw2YYzez8qDyQQYQks2OipToUiEECIckceUreExK6BMgCHVEYgVvLPJ/v1UOueVO1zfbO0IT2f1QZkAQ6Rsra0qHJHHpNI5S3I8a/5KK9MJKBNgKLR2hKev3OH6Ziqe+7a93odaLL1zuApAmQCXaP5Kq0mS41mpeO6KItLnrWhjOgFlAlyKFkvvnG17vQ+ldAZHu2Zv/aj7Ua4GUCbAIM1b0WZSFK7T4urWCm7jB2UCDMLWj7ofbTnaNZskhDhj67thWZPvOZKAWrFpEaqkKIq4++cHTpyx9d1AGn81sSDTua/SONWgSyMMMJkA/bGsyfccRfJp3s7IlN9ud71GEmAyAfohKili1o+b2z2+8FTS+LQxo/VdZpMxPzdLRxhgMgEu5LfbXa9RJOfW2xcbZ9rgeIMkwGQCXEAgLAljkdnf2xcbRxrnZjBkBBurjDdNyTPYSQNMJsA5mDY43qBILiwalXNKV9sqSAKUCXAOzu7oFe9taX+WJC5u7S7n3OOO0G0kAcoE+AcLV9vKo1E5hyQuLh4X+gWreAgkKBPgU467Qres2eWcSxL9t7Ol48sNpwL3kQQoE+ATxSusi+JxYSCJgZlXbWE6AWUCCCFE4+nAvfUtHQ+QxMAd/bjnjnUH/N8gCVAm4Kfr5fx0fSlKq1vLZJlb/EGZIIWtP+Sfe+RUz+dJYvBsztA17zV4/oskkEhsWkTCyLIi7vrp/tM2Z/Ba0rg0+eMMHnOVcXKWPoMwwGSC1PJeg/cFimRo+Luik97c4iwhCTCZIKWEY7IwvmR2+7uik0hjaORk6XqaFhmnFuTog6QBJhOkhF9tdRVTJEMrGJbGVtTaF5MEmEyQErqCkr7wxX0dwbA0ljSGlk6XHt5dMfPWq8ZnniENMJkgqVWss/+SIhkekhTPKq6xVpEEKBMkNWtn5JoP6hz/ShLDZ1Oj55GDtqCRJECZIGmV1NgqY1I8mySGj6II3YIVbAQFZYIkddgenLmxwf0oSQy/psP+u7cf7fkaSYAyQdJZsMJSpSiCDy8fIfOrz/DeCSgTJJcdx3u+2njIfw9JjJyP2/pmrDD7niEJUCZInqlkuaWSFEZeebWlOCZx+z8oEySBVc2+p09aAreQxMhzecNXvF3vfpkkMNzYtIhhJcmKmPVKs9XlDV9JGokxNlff2VxVOD4nk4dAgskEGrW03l1EkSRWTyBWsHiTg1uFwWQCbQpGZGF82dzR3RMdTxqJlTkqo7fJVHj9xFy9hzTAZAJNWbLZUUmRqEPkrDymdI2NmyBAmUBbOgKxgnc22b9PEupRU+968mNP+CaSAGUCzShba6sKR+QxJKEeshwftWAVD4EEZQKNOO0J37hih+vbJKE+f9nr/dq+1t4vkgQoE6hecY21Upbjo0hCldIWVLcxnYAygbo1W3rvqmvyPkwS6rX/eNcXNhzyP04SoEygWvNXtFUJIdJIQt1Kqy1lbAsAZQJV2nzY/1jL0a7ZJKF+be3B6//U4OVuOwwZNi1iSCiKIr70swMnW+1900lDGybkZ7r2Vt45JVPPY1bAZAKVWNbke44i0ZYOf+Syt7a5fk4SYDKBKkQlRRS+bHZ4OyNTSENbcnJ03WZTYUFeti5OGmAyQUL9drvrNYpEm4JBKc+03v4GSYDJBAnVE5KE8SWzv68vNo40tEmvTw81VBbOuDzfYCUNMJkgIRZvciyhSLQtFotnl65pqyAJXAodEWCwfL2x+w+eCXzv9hvyCEPjbN7IE23eiHnaxMxFpIHB4NdcAIBLxq+5AACUCQCAMgEAUCYAAFAmAADKBABAmQAAKBMAACgTAABlAgCgTAAAlAkAAJQJAIAyAQBQJgAAygQAAMoEAECZAAAoEwAAZQIAAGUCAKBMAACUCQCAMgEAgDIBAFAmAADKBABAmQAAQJkAACgTAABlAgCgTAAAoEwAAJQJAEB9dESQWt7Z5a5d8aH3EZLAcLr/9vyGoocu/yJJpI40RVFIIUU4uqNX3lVkPhaNyTmkgWH9hyVNSJuK75x92xU5zaSRGvg1VwopW20ro0gwEhRF6IpXWitJgjJBkjnmCN2+ZpfzCZLASGk46Lt3x/Ger5IEZYIkUrLKWhmPCz1JYCQtWG5hOqFMkDQ/IZ4K3F/f0vEASWCknbQEblnd3PkUSVAmSAKvL7MsIgUkbCpe3rpQkrnRhzKBpq0/5J977EzP7SSBRHF5w1f+fpf7RZJIbtwanMRkWRFzXmtptbtCV5MGEilvrMFnrjROyMnMIAwmE2jNew3eFygSqEF3T3T8G1uc5STBZAKNCUVlUfiS2ePvjk4kDahB5qiM3r2mwqsn5Oo7SYPJBBrxVp1rAUUCNYmclceUr7NxqzBlAq3w9cZyf7vO9kOSgNpU/8X11GlP+EaSoEygAaYN7RWhsJRLElAbWY6PKqnhMSuUCVTP6otc+36d4xmSgFptbfI+3GzpvYskKBOoWMlqW4UkxbNIAiqWtmBFG9MJZQK1OmgLGjc2uB8jCahd89GuOZsP+7lWKROocipZaalUFNYU2lBcbSlnawJlApXZdrT7ocZD/ntIAlphsQenL9/re5YkKBOo6qe8Vn4HDc0pq7YsiEpMJ5QJVGFVs+/pj9v6ZpAEtKajMzLld9tdr5KE9vE4FY2LSYqY9Uqz3d0Rvpw0oEWjR+u7zFXG/LHZOsJgMkGi/H6nu4gigZb19cXGLd7kWEISTCZIkGBEFncW7fMFemMFpAEtM+gzgg0m44ypeQYbaTCZYIQt2eKooEiQDKIxOadsta2MJCgTjDBvIDZp6Qb7D0gCyWLNLucTxxwhPhWUMsFIKl9rKzt7Vh5NEkgW8bjQl6ziIZCUCUbMx57wTSt2uL5NEkg29S0dDzScCtxPEpQJRkBJjbVCluOjSALJ6PVllkWkQJlgmO090/uluibvwySBZHXsTM/t6w/555IEZYLhnEpWtVUIIdJIAsms+IPWSllm2wJlgmGx4ZD/8ZajXbNJAsnO7gpd/V6D9wWS0A42LWqEoijirp/uP9XWHryeNJAK8vMM3n1VxknZhgzCYDLBUFnW5HuOIkEq8XdHJ/66zlVMEkwmGCKRmCxmvdzi7PBHLiMNpJLsLF2gqcp4xfgx+gBpMJngEr29w/MqRYJUFApLuVUb7GxkZDLBpeoOSenGon2dwaCURxpIRTpdenhXxczbpo3PPE0aTCYYpF9sciymSJDKJCmeVVJjrSAJygSD1O6PXvWHTfbvkgRS3aZGz9cP2IKFJEGZYBDK19oWxmLxbJJAqlMUkV6y0sJ7J5QJBupoe+hza3Y5nyAJ4K/2HPL/U92Rbh4lRJlgIEprrBXxuNCTBPA3xdWtvHdCmaC/dp8M/HN9S8cDJAF82mlr34yVZt93SIIyQT/Mr27lEdzA+ab25ZaFMYktDZQJLmj9If/cY6cDt5EEcG6ejvDlS3e6XyIJdWHToorIsiJmv9ZiaXeFppEGcH65Y/SdzSbj+NGZOsJgMsE/eq/B+wJFAlxcoDdWsGSzs4okmEzwD0JRWRhfMnu6uqMTSQO4uFGjMvr2VBlvmDzW4CQNJhN84q061wKKBOi/s2fl0RW19lKSYDLBJ3y9sdxZRWZ7OCLlkgYwgJ+G00V0e5nxjumTs46RBpNJyjNtaK+gSICBi8eFoaTGWk4SlEnKa/NFrnu/zvEMSQCDs22v9+GmM713kwRlktJKV9vKJSmeRRLAoKWVrmxjOqFMUtcBW7BwY4P7MZIALk3Lsa7Z6w74v0ESlElqTiUrLRWKwhoAQ2HhCkspNxRRJimn7kj3w42H/PeQBDA0rI7gdX/e4/seSSQGtwYnyN0/33/stLXvJpIAhs74/Ez3vso7L8vUZxAGk0nyW9Xse5oiAYaezx+Z/Lu/eH5KEkwmSS8mKaLwlWa7pyN8OWkAQy8nR9dtNhUW5GXr4qTBZJK03tntfpEiAYZPMCjlLdroWEISTCZJqy8iiZlFZl+gN1ZAGsDw0evSQ7srZ958ZUFmG2kwmSSdN7Y4KygSYPjFpHh2+VpbGUlQJknH3ROdsnSD/QckAYyMtbvcc4+0h+4gCcokqVTW2kvOnpVHkwQwMhRF6EpWtVWSBGWSNE65wzOqtzueIglgZO3a7/vnnSd6HiQJyiQplK62lsfjwkASwMibv8zCx/tSJtq390zvl+qavA+TBJAYJyyBW2sPdD5JEpSJtqeSVW3lQog0kgASZ8EHlgpJZhsEZaJR6w/55zYf7ZpDEkBiOT2hq9770PPfJDF82LQ4TBRFEXNe2/+x1RG8jjSAxMsba/CZTcYJOQYeAslkoiHLmnzPUSSAenT3RMf/aquzlCSYTDQjEpNF4cstLp8/Mpk0APXIyszobTIVTpswRu8nDSYT1Xt7h+dVigRQn3BEHlO5zs7nxTOZaGCUDknpxqJ9ncGglEcagProMtLD9RV3fu6aCVmnSIPJRLV+scmxmCIB1EuS41mlNbYKkqBMVKvdH73qD5vs3yUJQN02NXoebbH0cts+ZaJO5WttC2OxeDZJAKqXVlJj5b0TykR9jraHPrd6p/MbJAFow97D/i9t+aj76yRBmahKaY21QlGEjiQA7Sipbi3nJiTKRDV2nez5cn1LxwMkAWjLGVvfDSv2df4bSVAmqjB/mcVECoA2LVzeWhqVmE4okwRbf8g/93hr4DaSALTJ2xmZsrTe/WOSuDRsWrwEsqyIL/ykxeLwhKaRBqBdY0bru8wmY35uFm97MpkkwB8bvc9TJID29fbFxi3Z5FxEEkwmIy4UlYWxyOzt6olOIA1A+wz6jGCjyXjTlDyDnTSYTEbMW3WuBRQJkDyiMTmnfK2NR9RTJiOnozeW/5ta2w9JAkguNfXObx53hLihhjIZGYs2tJeGI1IuSQDJJR4X+tLVPGaFMhkBFm/k+ve3Op4hCSA5bTd3fLXhVOA+kqBMhtXCtbYySY5nkQSQvMpq2haSAmUybPZbg7M2NrgfIwkgyf9fP949a21L57dIgjIZnqmkxlqmKGQGpMR0stJSIstsnaBMhljdke5/aTzou5ckgNRgc4au+fMe73+SRP+wabGfvvSz/cfP2PpuJAkgdeTnGbxmk3FSlj6DMJhMLt2qZt/TFAmQevzd0YlvbXO9ThJMJpcsJimi8JVmu6cjfDlpAKknO0sX2LvIOKUgRx8kDSaTQXtnt/tFigRIXaGwlLt4Q3sFSTCZDFpfRBIzi8ydgd5YPmkAqUunSw/vrph561XjM8+QBpPJgL2xxVlBkQCQpHhW2RobGxkpk4Fz90SnvL3e/jxJABBCiHUfuucetAWNJEGZDEhlrb0kGpVzSAKAEEIoikhfWMNDICmTATjpDt9cvd3xFEkA+HsfHvDdt/1oz9dI4rP4wONzWLW3491br88zkASAz/z7sM/z1n03j51GEp/G3VwAgEvGr7kAAJQJAIAyAQBQJgAAUCYAAMoEAECZAAAoEwAAKBMAAGUCAKBMAACUCQAAlAkAgDIBAFAmAADKBAAAygQAQJkAACgTAABlAgAAZQIAoEwAAJQJAIAyAQCAMgEAUCYAAMoEAECZAABAmQAAKBMAAGUCAKBMAACgTAAAlAkAQH10yXAS1s7Ij37w9qlF8TjlCEBbSr51ddmdV495VevnkaYoiuYX499+c6J2a5P3ES5LAFpz7ZWjT+wu/vxNWj8Pzf8kv+d04B6KBIBWnbH13biq2fc0ZZJgZTXWUi5HAFpW8oGlPCZp+7dEmi6T2gOdTzYf7ZrDpQhAyzy+8NTf73QXafkcNPueiaIoYvar+0/bnMFruRQBaN2Y0fous8mYn5ulzfuiNDuZLN/re5YiAZAsevti497c6qxgMhlB4ZgsjC+Z3f6u6CQuQQDJwmDICO4xGW+4bKzBwWQyApbu8LxKkQBINtGonFNVay9mMhkBXUFJX/jivo5gWBrLpQcg2aSni1jdwpmfv+my7CNMJsNoyWZHFUUCIFnF40Jfvsa2UHMlqKWDtXVGpv1ho/27XG4Aklldk/eRPacD91Amw6Sytr00JsWzudQAJLuFNVZNTSeaKZOP7MHPr97p/AaXGIBU0HK0a3btgc4nKZMhVrbGtlBRkuMpxwDQr+mkuq1UKzdJaaJM6k/0fKW+ueNBLi0AqcTmDF67rMn3nBaOVRO3Bt877+BHJy2BW7i0AKSa/HEGj7nKODlLn8Fkcik2HPI/TpEASFX+ruikt3d4XmMyuQSSrIhZrzRbXd7wlVxSAFJVTpauZ9+iwgnjcnQxJpNB+FOj93mKBECqC4alsb/Y5DAxmQwmvKgsjEXmju6e6HguJQCpTq9LD+2qnHnrVQWZrUwmA/CbOtcCigQA/iomxbMra9tL1Hp8qiyTjkCs4K211h9x+QDA36zZ6XzysD04kzLpp0Ub20siZ+UxXDoA8DeKItLLVqvzIZCqK5PWjvD0P291/DuXDQB81s6Wji/vON7zVcrkIsrX2EtlOT6KSwYAzm3+MksVZXIBLZbeOes/dD/OpQIA53eqLXDzugN+VT34VlVlUrbGXiKESONSAYALm/f+GZMkq2drh2rKZMtH3V9vPOi7l0sEAC7O5Q1f8ccGz3+p5XhUs2nxiz/df7LV3jedSwQA+mdsrr6zuapwfE5m4h8CqYrJZHVz51MUCQAMTE8gVvDrbU5VbGRM+GQSlRRR+LLZ4e2MTOHSAICByRyV0bvXVHj1hFx9Z0pPJu/udr9IkQDA4ETOymOqNtgTvpExoZNJICyJmUVmf19fbByXBAAMTkZG+tkdZXd+7rpJWSdScjJ5c6uzgiIBgEsjy/FR5WsT+5iVhJWJszt6xdvr7M9zGQDApdvY4Pl6s6X3rpQrE9M6+/xoTM7hEgCAIZG2sMaasOkkIWVy3BW6pXq742nWHgCGTtNh/92bD/sfS5kyqVhjWxiPCz1LDwBDq7jaUp6IG6tGvEwaTwfu3drkfYQlB4ChZ7EHp69s7nwm6cukvMZawnIDwPApeb+1LCqN7HQyomVSu7/zm81Hu+aw1AAwfDr8kcuW1rtfHsnvOWKbFhVFEbNfbTljc4auYakBYHjl5Oi6m02F48Zm65JrMlm+1/csRQIAIyMYlPJ+ucVpSqrJJByThfEls9vfFZ3EEgPAyNDr00ONpsKbpuYZbEkxmSzd4XmVIgGAkRWLxbMra+3FSTGZdAUlvfHFfb5QWMplaQFgZKWlCamudObMGVOzD2l6Mlmy2VFFkQBAYiiK0JWttZUO9/cZ1jKxdkaueXej/XssJwAkzl/2eh9qOBW4X7NlUrWufYEkxbNYSgBIrLJh3jA+bGVy2B6cubre+S2WEAASb//xri+sbu58SnNlUr7GVqIoif9YYADAJ9PJSkuJLA/PTVfD8o/9juM9X61v7niQpQMA9Wh3haa9v8f7/eF47WG5Nfie1w8eOdUWuJmlAwB1GZdn8JqrjJOyDRnqnkw2HPI/TpEAgDp1dUcn/s92z89UPZlIsiJmvdJsc3nDV7BkAKBOWZm6wF6T8YrxY/QBVU4mf2r0Pk+RAIC6hSNS7pJN7UO6kXHIJpNgVBYzX9zn6wnEClgqAFA3XUZ6eFflzNumjc88rarJ5Dd1rgUUCQBogyTHsypqbUO2kXFIyqQjECt4a631RywPAGhH7S73EwdswULVlMmije0lkbPyGJYGALRDUUR6+WrrQlWUyWlP+MY/b3X8O8sCANqze7/v/roj3Q8nvEwqa+3FshwfxZIAgDYVV7dWJrRMmi29d63/0P04SwEA2nXa2ndT7f7ObyasTMrX2IuFEGksBQBo2+vvt1bFpMFvFRl0mWw+7H+s8aDvXpYAALTP0xG+/L0Gzw8H+/cHvWnxrp+2nLTYg9NZAgBIDrlj9P5mk7FgdKZuZCaT1c2dT1EkAJBcAr2x/F/VuQZ1q/CAJ5OopAjjy2ZHR2dkCtEDQHIxGDKCTSbj9MljDc5hnUze3e1+kSIBgOQUjco5pg3t84d1MgmEJTGzyOzv64uNI3IASE7p6SK6vcx4x/TJWceGZTJ5c6uzgiIBgOQWjwtD+VrbgN476XeZOLujV/zPOtsLxAwAyW9zo+fRpjO9dw95mSzaYJ8Xi8WziRgAUkN5jbXfH6DVrzI57gjdtnyb4ztECwCpY98R/xfXHfB/Y8jKpKLWVhKPCz3RAkBqKV1hWdifG7UuWiYNpwL3bW3yPkKkAJB6bI7gtdX7Oi/6MSMXLZOKNdZi4gSA1FXyQWtZJCYPvkzWtnR+q/lo1xyiBIDU1dkVmfT7eu8rF/qa825alGVFzHmtpdXuCl1NlACQ2nKydD3mxYX5edm6+IAmkxVm37MUCQBACCGCYWnsG5sdpgFNJuGYLIxFZo+/OzqRCAEAQgih16WHdlfOvPnKgsy2fk0mS3d4XqVIAAB/LybFs6vWtxf3azLpDMZyZr1odobCUi7RAQA+VRppQtpSMrPwlsuzD1xwMvnlZmcpRQIAOBdFEbqFq62feQjkp8rE6otc++5G+/eICwBwPvXNHV/ZeaLnwfOWSdX69vmSFM8iKgDAhVSuti44Z5kctAWNq+ud3yIiAMDFHDjRXbjC7HvmM2VSudZWrCgD/xhfAEBqKq+2LJBk5W9lsv1oz9fqmzseJBoAQH+5vOEr/9zo/YEQn9wafPfP9x89be2bQTQAgIHIG2vwmU3GCRnGx/778f/d3P48kQAABipyVs42ZOvTdE0f9/7TnNvz64kEADAYx9uDt6b15xO0AAC4EO7eAgBQJgAAygQAQJkAAECZAAAoEwAAZQIAoEwAAKBMAACUCQCAMgEAUCYAAFAmAADKBABAmQAAKBMAACgTAABlAgCgTAAAlAkAAJQJAIAyAQBQJgAAygQAAMoEAECZAAAk0Gq+AAAAlUlEQVQoEwAAZQIAAGUCAKBMAACUCQCAMgEAgDIBAFAmAADKBABAmQAAQJkAACgTAABlAgCgTAAAoEwAAJQJAIAyAQBQJgAAUCYAAMoEAECZAAAoEwAAKBMAAGUCAKBMAACUCQAAlAkAgDIBAFAmAADKBAAAygQAQJkAACgTAABlAgAAZQIAoEwAAJQJAIAyAQDgYv4vMVxnuxH2/TUAAAAASUVORK5CYII="},756:function(e,t,n){"use strict";var r=n(0),o=n(56),a=n(7),i=n(101),l=n(8);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,s(t).apply(this,arguments))}var n,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(a=[{key:"handleClose",value:function(){this.props.onHide()}},{key:"render",value:function(){return r.createElement(o.Modal,{show:this.props.show,onHide:this.handleClose,keyboard:!0,className:this.props.className},r.createElement(o.Modal.Header,{closeButton:!0},r.createElement(o.Modal.Title,{"data-test":"gene-panel-modal-title"},this.props.panelName)),r.createElement(o.Modal.Body,{style:{maxHeight:"calc(100vh - 210px)",overflowY:"auto"}},this.props.show&&this.props.isLoading&&r.createElement(i.a,{isLoading:!0}),this.props.show&&!this.props.isLoading&&r.createElement("div",{"data-test":"gene-panel-modal-body"},this.props.children)),r.createElement(o.Modal.Footer,null,r.createElement(o.Button,{"data-test":"modal-button",onClick:this.handleClose},"Close")))}}])&&u(n.prototype,a),l&&u(n,l),t}();d([l.default],m.prototype,"handleClose",null),m=d([a.observer],m),t.a=m},768:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),o=n(3);n(587);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"getCircleX",value:function(e,t,n){var r=e/100;return t*(1-r)+n*r}},{key:"getCircleFill",value:function(e){return e<25?"blue":e>75?"red":"gray"}},{key:"getTooltipContents",value:function(e){return e&&"complete"===e.status&&null!==e.data?r.createElement("div",null,r.createElement("span",null,"mRNA level of the gene in this tumor"),r.createElement("br",null),r.createElement("span",null,r.createElement("b",null,"mRNA z-score: "),e.data.zScore),r.createElement("br",null),r.createElement("span",null,r.createElement("b",null,"Percentile: "),e.data.percentile),r.createElement("br",null)):e&&"complete"===e.status&&null===e.data?r.createElement("span",null,"mRNA data is not available for this gene."):e&&"error"===e.status?r.createElement("span",null,"Error retrieving data."):r.createElement("span",null,"Querying server for data.")}},{key:"getTdContents",value:function(t){var n=null;return t&&"complete"===t.status&&null!==t.data?r.createElement("svg",{width:63,height:12},r.createElement("text",{x:33,y:11,textAnchor:"start",fontSize:10},Math.round(t.data.percentile)+"%"),r.createElement("g",null,r.createElement("line",{x1:0,y1:8,x2:30,y2:8,style:{stroke:"gray",strokeWidth:2}}),r.createElement("circle",{cx:e.getCircleX(t.data.percentile,3,27),cy:8,r:3,fill:e.getCircleFill(t.data.percentile)}))):null!==(n=t&&"complete"===t.status&&null===t.data?o.n.NA:t&&"error"===t.status?o.n.ERROR:o.n.LOADING)?r.createElement(o.o,{status:n,naAlt:"mRNA data is not available for this gene."}):void 0}},{key:"getData",value:function(e,t){if(0===e.length)return null;var n=e[0].sampleId,r=e[0].entrezGeneId;return t.get({sampleId:n,entrezGeneId:r})}},{key:"getDataFromCNA",value:function(e,t){var n=e[0].sampleId,r=e[0].entrezGeneId;return t.get({sampleId:n,entrezGeneId:r})}},{key:"renderFromCacheDatum",value:function(t){return r.createElement(o.c,{placement:"left",overlay:e.getTooltipContents(t),arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"})},e.getTdContents(t))}},{key:"renderFunction",value:function(t,n){var r=e.getData(t,n);return e.renderFromCacheDatum(r)}},{key:"cnaRenderFunction",value:function(t,n){var r=e.getDataFromCNA(t,n);return e.renderFromCacheDatum(r)}}],(n=null)&&a(t.prototype,n),i&&a(t,i),e}()},769:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(0),o=n(633),a=n.n(o);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getValues",value:function(e,t,n){var r={},o=!0,a=!1,i=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;r[c.sampleId]=c[n]}}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}var s=t.filter(function(e){return r[e]&&r[e]>0&&r[e].toString().length>0});return 1===s.length?[r[s[0]].toString()]:s.map(function(e){return"".concat(e,": ").concat(r[e])})}},{key:"getTextValue",value:function(t,n,r){return e.getValues(t,n,r).join(";")}},{key:"getDisplayValue",value:function(t,n,r){return e.getValues(t,n,r).join("\n")}},{key:"renderFunction",value:function(t,n,o){return r.createElement("div",{className:a.a["integer-data"]},e.getDisplayValue(t,n,o))}},{key:"getReads",value:function(e,t){var n=[];if(e){var r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value;n.push(u[t])}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}return 1==n.length?n[0]:n}}],(n=null)&&i(t.prototype,n),o&&i(t,o),e}()},786:function(e,t,n){e.exports={portalWidth:"mutationStatus-module__portalWidth__2s2Qx",framedImage:"mutationStatus-module__framedImage__mbMeM",germline:"mutationStatus-module__germline__3PooJ",somatic:"mutationStatus-module__somatic__1ieJL",unknown:"mutationStatus-module__unknown__mbYor"}},787:function(e,t,n){e.exports={portalWidth:"proteinChange-module__portalWidth__1U76x",framedImage:"proteinChange-module__framedImage___DDUH",proteinChange:"proteinChange-module__proteinChange__2xJ_V",germline:"proteinChange-module__germline__1c0ww"}},788:function(e,t,n){e.exports={portalWidth:"mutationType-module__portalWidth__2MF0M",framedImage:"mutationType-module__framedImage__2Mkp8",missenseMutation:"mutationType-module__missenseMutation__1TVMD",truncMutation:"mutationType-module__truncMutation__LbUPB",inframeMutation:"mutationType-module__inframeMutation__3O1fU",otherMutation:"mutationType-module__otherMutation__12WiG",defaultMutation:"mutationType-module__defaultMutation__K_gPQ",fusion:"mutationType-module__fusion__1Auq-"}},789:function(e,t,n){e.exports={portalWidth:"variantType-module__portalWidth__3507N",framedImage:"variantType-module__framedImage__1_Tun",variantTypeSnp:"variantType-module__variantTypeSnp__2Cxot",variantTypeIns:"variantType-module__variantTypeIns__3b3Bu",variantTypeDel:"variantType-module__variantTypeDel__29irc",variantTypeOther:"variantType-module__variantTypeOther__2ZJz2"}},790:function(e,t,n){e.exports={portalWidth:"mutationAssessorTooltip-module__portalWidth__15gd3",framedImage:"mutationAssessorTooltip-module__framedImage__1LzrF","ma-link":"mutationAssessorTooltip-module__ma-link__3QpML","mutation-assessor-link":"mutationAssessorTooltip-module__mutation-assessor-link__3XLsB","ma-icon":"mutationAssessorTooltip-module__ma-icon__GqjUA","ma-msa-icon":"mutationAssessorTooltip-module__ma-msa-icon__2yT6h","ma-3d-icon":"mutationAssessorTooltip-module__ma-3d-icon__166M3","mutation-assessor-main-img":"mutationAssessorTooltip-module__mutation-assessor-main-img__2QlLP","ma-tooltip-table":"mutationAssessorTooltip-module__ma-tooltip-table__3tyG8"}},791:function(e,t,n){e.exports={portalWidth:"cosmic-module__portalWidth__3eF_t",framedImage:"cosmic-module__framedImage__1OwYD","cosmic-table":"cosmic-module__cosmic-table__2ms15"}},792:function(e,t,n){e.exports={portalWidth:"validationStatus-module__portalWidth__yrVHU",framedImage:"validationStatus-module__framedImage___YpeK",unknown:"validationStatus-module__unknown__1XsWI",valid:"validationStatus-module__valid__Ziu-a",wildtype:"validationStatus-module__wildtype__14GJI",other:"validationStatus-module__other__3oLt_"}},793:function(e,t,n){e.exports={portalWidth:"exon-module__portalWidth__1GWC2",framedImage:"exon-module__framedImage__2Xs1J","exon-table":"exon-module__exon-table__6cnBD"}},794:function(e,t,n){e.exports={portalWidth:"hgvsg-module__portalWidth__70K9W",framedImage:"hgvsg-module__framedImage__2Yrs7","hgvsg-data":"hgvsg-module__hgvsg-data__mrt6T","genome-nexus-logo":"hgvsg-module__genome-nexus-logo__2zJ74"}},795:function(e,t,n){},797:function(e,t,n){"use strict";function r(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,o=(n=n||function(e,t){for(var n=0,r=1;e(n)>t;){if(n<Number.MIN_SAFE_INTEGER)throw new Error("Couldnt find lower bound");n-=r,r*=2}r=1;for(var o=0;e(o)<t;){if(o>Number.MAX_SAFE_INTEGER)throw new Error("Couldnt find upper bound");o+=r,r*=2}return[n,o]}(e,t))[0],a=n[1],i=(o+a)/2,l=r;l>0&&e(i)!==t;)e(i)>t?a=i:o=i,i=(o+a)/2,l-=1;return i}function o(e,t,n){return r(function(t){return-e(t)},-t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:20)}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o})},798:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p});var r=n(742),o=n(4),a=n.n(o),i=n(624),l=n(799),u=n(800),c=n(570),s=n(597);function p(e,t,n,o,i){var l=function(e,t){return function(e,t){if(h(e.geneticTracks||[],t.geneticTracks||[]))return!0;return E(e)!==E(t)||w(e)!==w(t)}(e,t)||function(e,t){if(h(e.clinicalTracks||[],t.clinicalTracks||[]))return!0}(e,t)||function(e,t){if(h(e.heatmapTracks,t.heatmapTracks||[])||h(e.genesetHeatmapTracks,t.genesetHeatmapTracks||[]))return!0}(e,t)}(e,t),u=function(e,t){return!e.suppressRendering&&(v(e,t)||m(y(e),y(t))>1)}(e,t);u&&f(e,n),l&&n.keepSorted(!1),function(e,t,n){e.suppressRendering&&!t.suppressRendering&&f(e,n)}(e,t,n),function(e,t,n){e.width!==t.width&&n.setWidth(e.width)}(e,t,n),function(e,t,n){a.a.isEqual(e.columnLabels,t.columnLabels)||n.setColumnLabels(e.columnLabels||{})}(e,t,n),function(e,t,n){e.showWhitespaceBetweenColumns!==t.showWhitespaceBetweenColumns&&n.setCellPaddingOn(!!e.showWhitespaceBetweenColumns)}(e,t,n),function(e,t,n){e.showMinimap!==t.showMinimap&&n.setMinimapVisible(!!e.showMinimap)}(e,t,n),function(e,t,n){e.onMinimapClose&&e.onMinimapClose!==t.onMinimapClose&&n.onMinimapClose(e.onMinimapClose)}(e,t,n),function(e,t,n){e.showTrackLabels!==t.showTrackLabels&&n.setShowTrackLabels(!!e.showTrackLabels)}(e,t,n),function(e,t,n){e.showSublabels!==t.showSublabels&&n.setShowTrackSublabels(!!e.showSublabels)}(e,t,n),function(e,t,n){if(!a.a.isEqual(e.heatmapTrackHeaders,t.heatmapTrackHeaders)){var r=e.heatmapTrackHeaders||{},o=t.heatmapTrackHeaders||{},i=Object.keys(r).map(function(e){return parseInt(e,10)}),l=Object.keys(o).map(function(e){return parseInt(e,10)}),u=!0,c=!1,s=void 0;try{for(var p,f=i[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var d=p.value;n.setTrackGroupHeader(d,r[d])}}catch(e){c=!0,s=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw s}}var m=!0,h=!1,y=void 0;try{for(var g,b=l[Symbol.iterator]();!(m=(g=b.next()).done);m=!0){var v=g.value;v in r||n.setTrackGroupHeader(v,void 0)}}catch(e){h=!0,y=e}finally{try{m||null==b.return||b.return()}finally{if(h)throw y}}}}(e,t,n),function(e,t,n,o,i){var l={genetic:void 0,genesetHeatmap:void 0,heatmap:void 0,heatmap01:void 0,genericAssay:{}},u=o();t.geneticTracks&&t.geneticTracks.length&&!v(e,t)&&(l.genetic=u[t.geneticTracks[0].key]);t.genesetHeatmapTracks&&t.genesetHeatmapTracks.length&&(l.genesetHeatmap=u[t.genesetHeatmapTracks[0].key]);if(t.heatmapTracks&&t.heatmapTracks.length){var s,p,f=!0,d=!1,m=void 0;try{for(var h,y=t.heatmapTracks[Symbol.iterator]();!(f=(h=y.next()).done);f=!0){var g=h.value;if(void 0===s&&g.molecularAlterationType===c.a.METHYLATION?s=u[g.key]:void 0===p&&g.molecularAlterationType!==c.a.METHYLATION&&g.molecularAlterationType!==c.a.GENERIC_ASSAY&&(p=u[g.key]),void 0!==s&&void 0!==p)break}}catch(e){d=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(d)throw m}}l.heatmap=p,l.heatmap01=s}else if(t.genesetHeatmapTracks){var b=!0,S=!1,E=void 0;try{for(var w,T=t.genesetHeatmapTracks[Symbol.iterator]();!(b=(w=T.next()).done);b=!0){var _=w.value;if(_.expansionTrackList&&_.expansionTrackList.length){l.heatmap=u[_.expansionTrackList[0].key];break}}}catch(e){S=!0,E=e}finally{try{b||null==T.return||T.return()}finally{if(S)throw E}}}l.genericAssay=a.a.chain(t.heatmapTracks).filter(function(e){return e.molecularAlterationType===c.a.GENERIC_ASSAY}).groupBy(function(e){return e.molecularProfileId}).mapValues(function(e){return a.a.last(e)}).mapValues(function(e){return u[e.key]}).value();var k=a.a.chain(e.heatmapTracks).filter(function(e){return e.molecularAlterationType===c.a.GENERIC_ASSAY}).groupBy(function(e){return e.molecularProfileId}).mapValues(function(e){return a()(e).flatMap(function(e){return e.data}).filter(function(e){return!e.category}).map(function(e){return e.profile_data}).value()}).value(),C=a.a.mapValues(k,function(e){return a.a.max(e)}),M=a.a.mapValues(k,function(e){return a.a.min(e)}),D=a.a.keyBy(t.geneticTracks||[],function(e){return e.key}),x=!0,j=!1,R=void 0;try{for(var N,G=e.geneticTracks[Symbol.iterator]();!(x=(N=G.next()).done);x=!0){var L=N.value;A(L,D[L.key],o,i,n,e,t,l),delete D[L.key]}}catch(e){j=!0,R=e}finally{try{x||null==G.return||G.return()}finally{if(j)throw R}}var V=!0,F=!1,B=void 0;try{for(var U,W=(t.geneticTracks||[])[Symbol.iterator]();!(V=(U=W.next()).done);V=!0){var z=U.value;D.hasOwnProperty(z.key)&&A(void 0,D[z.key],o,i,n,e,t,l)}}catch(e){F=!0,B=e}finally{try{V||null==W.return||W.return()}finally{if(F)throw B}}!function(e,t,n,o){var i=a.a.keyBy(e.geneticTracks,"key"),l=a.a.keyBy(t.geneticTracks||[],"key"),u=(e.geneticTracksOrder||e.geneticTracks.map(function(e){return e.key})).filter(function(e){return e in i}),c=(t.geneticTracksOrder||(t.geneticTracks||[]).map(function(e){return e.key})).filter(function(e){return e in l});if(!a.a.isEqual(u,c)){var s=o();n.setTrackGroupOrder(r.b,u.map(function(e){return s[e]}))}}(e,t,n,o);var H=a.a.keyBy(t.clinicalTracks||[],function(e){return e.key}),K=!0,Y=!1,Q=void 0;try{for(var q,Z=e.clinicalTracks[Symbol.iterator]();!(K=(q=Z.next()).done);K=!0){var J=q.value;I(J,H[J.key],o,n,e),delete H[J.key]}}catch(e){Y=!0,Q=e}finally{try{K||null==Z.return||Z.return()}finally{if(Y)throw Q}}var X=!0,$=!1,ee=void 0;try{for(var te,ne=(t.clinicalTracks||[])[Symbol.iterator]();!(X=(te=ne.next()).done);X=!0){var re=te.value;H.hasOwnProperty(re.key)&&I(void 0,H[re.key],o,n,e)}}catch(e){$=!0,ee=e}finally{try{X||null==ne.return||ne.return()}finally{if($)throw ee}}var oe=a.a.keyBy(t.genesetHeatmapTracks||[],function(e){return e.key}),ae=!0,ie=!1,le=void 0;try{for(var ue,ce=e.genesetHeatmapTracks[Symbol.iterator]();!(ae=(ue=ce.next()).done);ae=!0){var se=ue.value;O(se,oe[se.key],o,n,e,l),delete oe[se.key]}}catch(e){ie=!0,le=e}finally{try{ae||null==ce.return||ce.return()}finally{if(ie)throw le}}var pe=!0,fe=!1,de=void 0;try{for(var me,he=(t.genesetHeatmapTracks||[])[Symbol.iterator]();!(pe=(me=he.next()).done);pe=!0){var ye=me.value;oe.hasOwnProperty(ye.key)&&O(void 0,oe[ye.key],o,n,e,l)}}catch(e){fe=!0,de=e}finally{try{pe||null==he.return||he.return()}finally{if(fe)throw de}}var ge=a.a.keyBy(t.heatmapTracks||[],function(e){return e.key}),be=!0,ve=!1,Se=void 0;try{for(var Ee,we=e.heatmapTracks[Symbol.iterator]();!(be=(Ee=we.next()).done);be=!0){var Te=Ee.value;Te.maxProfileValue=C[Te.molecularProfileId],Te.minProfileValue=M[Te.molecularProfileId],P(Te,ge[Te.key],o,function(){},n,e,{},l,void 0),delete ge[Te.key]}}catch(e){ve=!0,Se=e}finally{try{be||null==we.return||we.return()}finally{if(ve)throw Se}}var Ae=!0,Ie=!1,Oe=void 0;try{for(var Pe,_e=(t.heatmapTracks||[])[Symbol.iterator]();!(Ae=(Pe=_e.next()).done);Ae=!0){var ke=Pe.value;ge.hasOwnProperty(ke.key)&&(ke.maxProfileValue=C[ke.molecularProfileId],ke.minProfileValue=M[ke.molecularProfileId],P(void 0,ge[ke.key],o,function(){},n,e,{},l,void 0))}}catch(e){Ie=!0,Oe=e}finally{try{Ae||null==_e.return||_e.return()}finally{if(Ie)throw Oe}}!function(e,t,n,r){var o=a.a.keyBy(e.heatmapTracks,"key"),i=a.a.keyBy(t.heatmapTracks||[],"key");a.a.forEach(e.heatmapTracksOrder||{},function(e,l){var u=e.filter(function(e){return e in o}),c=((t.heatmapTracksOrder||{})[l]||[]).filter(function(e){return e in i});if(!a.a.isEqual(u,c)){var s=r();n.setTrackGroupOrder(parseInt(l,10),u.map(function(e){return s[e]}))}})}(e,t,n,o)}(e,t,n,o,i),function(e,t,n){var r=b(t),o=b(e);("order"===r.type&&"order"===o.type&&r.order!==o.order||!a.a.isEqual(r,o))&&n.setSortConfig(o)}(e,t,n),function(e,t,n){var o=a.a.sortBy(a.a.uniq((t.heatmapTracks||[]).concat(t.genesetHeatmapTracks||[]).map(function(e){return e.trackGroupIndex}))),i=a.a.sortBy(a.a.uniq(e.heatmapTracks.concat(e.genesetHeatmapTracks).map(function(e){return e.trackGroupIndex})));a.a.xor(i,o).length&&n.setTrackGroupSortPriority([r.a].concat(i).concat(r.b))}(e,t,n),function(e,t,n){e.hiddenIds!==t.hiddenIds&&n.hideIds(e.hiddenIds||[],!0)}(e,t,n),function(e,t,n){a.a.isEqual(e.horzZoomToFitIds,t.horzZoomToFitIds)||n.updateHorzZoomToFitIds(e.horzZoomToFitIds||[])}(e,t,n),function(e,t,n,r){var o=r(),a=e.clinicalTracks.map(function(e){return o[e.key]});e.showClinicalTrackLegends&&!t.showClinicalTrackLegends?n.showTrackLegends(a):!e.showClinicalTrackLegends&&t.showClinicalTrackLegends&&n.hideTrackLegends(a)}(e,t,n,o),function(e,t,n){e.highlightedIds!==t.highlightedIds&&n.setHighlightedIds(e.highlightedIds||[])}(e,t,n),function(e,t,n,r){if(e.highlightedTracks!==t.highlightedTracks){var o=e.highlightedTracks||[],a=r();n.setHighlightedTracks(o.map(function(e){return a[e]}))}}(e,t,n,o),function(e,t,n){!e.suppressRendering&&t.suppressRendering&&d(e,n)}(e,t,n),l&&n.keepSorted(!0),u&&d(e,n)}function f(e,t){t.suppressRendering(),e.onSuppressRendering&&e.onSuppressRendering()}function d(e,t){t.releaseRendering(e.onReleaseRendering)}function m(e,t){var n=a.a.keyBy(t,function(e){return e.key}),r=0,o=0,i=0,l=!0,u=!1,c=void 0;try{for(var s,p=e[Symbol.iterator]();!(l=(s=p.next()).done);l=!0){var f=s.value,d=n[f.key];d?(o+=1,d.data!==f.data&&(i+=1)):r+=1}}catch(e){u=!0,c=e}finally{try{l||null==p.return||p.return()}finally{if(u)throw c}}return r+(t.length-o)+i}function h(e,t){return e.length!==t.length||m(e,t)>0}function y(e){return(e.geneticTracks||[]).concat(e.genesetHeatmapTracks||[]).concat(e.clinicalTracks||[]).concat(e.heatmapTracks||[])}function g(e){return e.profile_data}function b(e){var t={},n=function(e){return e.sortConfig&&e.sortConfig.order}(e);return n?t={type:"order",order:n}:e.sortConfig&&void 0!==e.sortConfig.clusterHeatmapTrackGroupIndex&&(t={type:"cluster",track_group_index:e.sortConfig.clusterHeatmapTrackGroupIndex,clusterValueFn:g}),t}function v(e,t){return e.distinguishMutationType!==t.distinguishMutationType||e.distinguishDrivers!==t.distinguishDrivers||e.distinguishGermlineMutations!==t.distinguishGermlineMutations}function S(e,t,n,r){if(!e&&t){var o=n[t.key];return void 0!==o&&(r.getTracks().includes(o)&&r.removeTrack(o),delete n[t.key]),!0}return!1}function E(e){return e.distinguishMutationType&&e.sortConfig&&e.sortConfig.sortByMutationType}function w(e){return e.distinguishDrivers&&e.sortConfig&&e.sortConfig.sortByDrivers}function T(e,t,n,r,o,i,l,u,c){var s=t&&t.expansionTrackList?t.expansionTrackList:[],p=e&&e.expansionTrackList?e.expansionTrackList:[],f=a.a.keyBy(s,function(e){return e.key}),d=!0,m=!1,h=void 0;try{for(var y,g=p[Symbol.iterator]();!(d=(y=g.next()).done);d=!0){var b=y.value;c(b,f[b.key],n,r,o,i,l,u,e.key),delete f[b.key]}}catch(e){m=!0,h=e}finally{try{d||null==g.return||g.return()}finally{if(m)throw h}}var v=!0,S=!1,E=void 0;try{for(var w,T=s[Symbol.iterator]();!(v=(w=T.next()).done);v=!0){var A=w.value;f.hasOwnProperty(A.key)&&c(void 0,f[A.key],n,r,o,i,l,u)}}catch(e){S=!0,E=e}finally{try{v||null==T.return||T.return()}finally{if(S)throw E}}}function A(t,n,o,a,c,s,p,f,d){var m=o();if(!S(t,n,m,c))if(t&&!n){var h={rule_set_params:Object(i.g)(s.distinguishMutationType,s.distinguishDrivers,s.distinguishGermlineMutations),label:t.label,sublabel:t.sublabel,track_label_color:t.labelColor||void 0,target_group:r.b,sortCmpFn:Object(l.b)(E(s),w(s)),description:t.oql,data_id_key:"uid",data:t.data,tooltipFn:Object(u.c)(s.caseLinkOutInTooltips,a,s.alterationTypesInQuery),track_info:t.info,$track_info_tooltip_elt:t.infoTooltip?e("<div>"+t.infoTooltip+"</div>"):void 0,removeCallback:function(){delete o()[t.key],t.removeCallback&&t.removeCallback()},expandCallback:t.expansionCallback||void 0,expandButtonTextGetter:function(){return"Expand"},expansion_of:d?m[d]:void 0,custom_track_options:t.customOptions},y=c.addTracks([h])[0];m[t.key]=y,void 0!==f.genetic&&c.shareRuleSet(f.genetic,y),f.genetic=y}else if(t&&n){var g=m[t.key],b=E(s),I=w(s);b===E(p)&&I===w(p)||c.setTrackSortComparator(g,Object(l.b)(b,I)),t.data!==n.data&&c.setTrackData(g,t.data,"uid"),function(e,t){return e.caseLinkOutInTooltips!==t.caseLinkOutInTooltips||e.alterationTypesInQuery!==t.alterationTypesInQuery}(s,p)&&c.setTrackTooltipFn(g,Object(u.c)(s.caseLinkOutInTooltips,a,s.alterationTypesInQuery)),t.info!==n.info&&c.setTrackInfo(g,t.info),t.infoTooltip!==n.infoTooltip&&c.setTrackInfoTooltip(g,t.infoTooltip?e("<div>"+t.infoTooltip+"</div>"):void 0),v(s,p)&&(void 0!==f.genetic?c.shareRuleSet(f.genetic,g):c.setRuleSet(g,Object(i.g)(s.distinguishMutationType,s.distinguishDrivers,s.distinguishGermlineMutations))),f.genetic=g,t.expansionTrackList&&t.expansionTrackList.length>0?c.disableTrackExpansion(g):t.expansionCallback&&c.enableTrackExpansion(g),T(t,n,o,a,c,s,p,f,A)}}function I(e,t,n,o,a){var c=n();if(!S(e,t,c,o))if(e&&!t){var s=Object(i.e)(e);s.legend_label=e.label,s.exclude_from_legend=!a.showClinicalTrackLegends,s.na_legend_label=e.na_legend_label;var p={rule_set_params:s,data:e.data,data_id_key:"uid",label:e.label,description:(e.label||"").trim()===(e.description||"").trim()?void 0:e.description,removable:!0,removeCallback:function(){delete n()[e.key]},onClickRemoveInTrackMenu:function(){a.onDeleteClinicalTrack&&a.onDeleteClinicalTrack(e.key)},sort_direction_changeable:!0,tooltipFn:Object(u.b)(e,a.caseLinkOutInTooltips),important_ids:e.altered_uids,sortCmpFn:Object(l.a)(e),init_sort_direction:0,target_group:r.a,onSortDirectionChange:a.onTrackSortDirectionChange,custom_track_options:e.custom_options,track_can_show_gaps:"string"===e.datatype};c[e.key]=o.addTracks([p])[0]}else if(e&&t){var f=c[e.key];e.data!==t.data&&o.setTrackData(f,e.data,"uid"),e.altered_uids!==t.altered_uids&&o.setTrackImportantIds(f,e.altered_uids),o.setTrackTooltipFn(f,Object(u.b)(e,a.caseLinkOutInTooltips)),t.custom_options!==e.custom_options&&o.setTrackCustomOptions(f,e.custom_options)}}function O(e,t,n,r,o,a){var c=n();if(S(e,t,c,r))T(void 0,t,n,function(){},r,o,{},a,P);else if(e&&!t){var s={rule_set_params:Object(i.f)(),data:e.data,data_id_key:"uid",has_column_spacing:!1,track_padding:0,label:e.label,html_label:Object(u.a)(e.label),target_group:e.trackGroupIndex,sort_direction_changeable:!0,sortCmpFn:l.c,init_sort_direction:0,description:"Gene set scores from ".concat(e.molecularProfileId),link_url:e.trackLinkUrl,tooltipFn:Object(u.d)(e.molecularAlterationType,!0),onSortDirectionChange:o.onTrackSortDirectionChange,expandCallback:e.expansionCallback,expandButtonTextGetter:function(e){return"".concat(e?"More":"Show","  genes")}},p=r.addTracks([s])[0];c[e.key]=p,void 0!==a.genesetHeatmap&&r.shareRuleSet(a.genesetHeatmap,p),a.genesetHeatmap=p,T(e,void 0,n,function(){},r,o,{},a,P)}else if(e&&t){var f=c[e.key];e.data!==t.data&&r.setTrackData(f,e.data,"uid"),r.setTrackTooltipFn(f,Object(u.d)(e.molecularAlterationType,!0)),T(e,t,n,function(){},r,o,{},a,P)}}function P(e,t,n,r,o,a,p,f,d){var m=n();if(!S(e,t,m,o))if(e&&!t){var h={rule_set_params:Object(i.h)(e),data:e.data,data_id_key:"uid",has_column_spacing:Object(s.a)(e.hasColumnSpacing,!1),track_padding:0,label:e.label,track_label_color:e.labelColor,track_label_circle_color:e.labelCircleColor,track_label_font_weight:e.labelFontWeight,track_label_left_padding:e.labelLeftPadding,target_group:e.trackGroupIndex,removable:!!e.onRemove||!!e.onClickRemoveInTrackMenu,movable:e.movable,na_legend_label:e.naLegendLabel,removeCallback:function(){delete n()[e.key],e.onRemove&&e.onRemove()},onClickRemoveInTrackMenu:function(){e.onClickRemoveInTrackMenu&&e.onClickRemoveInTrackMenu()},sort_direction_changeable:Object(s.a)(e.sortDirectionChangeable,!0),sortCmpFn:l.c,init_sort_direction:Object(s.a)(e.initSortDirection,0),link_url:e.trackLinkUrl,description:Object(s.a)(e.description,"".concat(e.label," data from ").concat(e.molecularProfileId)),tooltipFn:e.tooltip||Object(u.d)(e.molecularAlterationType,!0),track_info:e.info||"",onSortDirectionChange:a.onTrackSortDirectionChange,expansion_of:d?m[d]:void 0},y=o.addTracks([h])[0];if(m[e.key]=y,e.molecularAlterationType!==c.a.GENERIC_ASSAY){var g="heatmap";"METHYLATION"===e.molecularAlterationType&&(g="heatmap01"),void 0!==f[g]&&o.shareRuleSet(f[g],y),f[g]=y}else f.genericAssay[e.molecularProfileId]=y}else if(e&&t){var b=m[e.key];if(e.data!==t.data&&o.setTrackData(b,e.data,"uid"),e.info!==t.info&&void 0!==e.info&&o.setTrackInfo(b,e.info),e.movable!==t.movable&&void 0!==e.movable&&o.setTrackMovable(b,e.movable),e.molecularAlterationType===c.a.GENERIC_ASSAY&&void 0!==f.genericAssay[e.molecularProfileId]){var v=f.genericAssay[e.molecularProfileId];o.shareRuleSet(v,b)}o.setTrackTooltipFn(b,e.tooltip||Object(u.d)(e.molecularAlterationType,!0))}}}).call(this,n(11))},799:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return s}),n.d(t,"c",function(){return f});var r=n(672),o=n.n(r);function a(e){for(var t={},n=0;n<e.length;n++)for(var r=[].concat(e[n]),o=0;o<r.length;o++)t[r[o]]=n;return t}function i(e,t){var n,r=a(["amp","homdel","gain","hetloss","diploid",void 0]),o=e||t?(!e&&t?n=a([["inframe_rec","missense_rec","promoter_rec","trunc_rec","other_rec"],["inframe","missense","promoter","trunc","other"],void 0]):e&&!t?n=a([["trunc","trunc_rec"],["inframe","inframe_rec"],["promoter","promoter_rec"],["missense","missense_rec"],["other","other_rec"],void 0,!0,!1]):e&&t&&(n=a(["trunc_rec","inframe_rec","promoter_rec","missense_rec","other_rec","trunc","inframe","promoter","missense","other",void 0,!0,!1])),function(e){return n[e]}):function(e){return{true:1,false:2}[!!e+""]},i=a(["high","low",void 0]),l=a([!0,!1,void 0]);function u(e){var t=[];return e.disp_fusion?t.push(0):t.push(1),t.push(r[e.disp_cna+""]),t.push(o(e.disp_mut)),t.push(l[e.disp_germ+""]),t.push(i[e.disp_mrna+""]),t.push(i[e.disp_prot+""]),t}return{preferred:function(e){return[+!!e.na].concat(u(e)).concat([e.sample?e.sample:e.patient])},mandatory:function(e){return u(e)},isVector:!0}}function l(e){return function(t,n){return t.na&&n.na?0:t.na&&!n.na?2:!t.na&&n.na?-2:t[e]<n[e]?-1:t[e]===n[e]?0:1}}function u(e,t){return e.na&&t.na?0:e.na&&!t.na?2:!e.na&&t.na?-2:o()(e.attr_val,t.attr_val)}function c(e){return function(t,n){var r=e(t,n);return 0===r?t.sample?o()(t.sample,n.sample):o()(t.patient,n.patient):r}}function s(e){var t,n;switch(e.datatype){case"number":t=l("attr_val");break;case"counts":n=e.countsCategoryLabels,t=function(e,t){if(e.na&&t.na)return 0;if(e.na&&!t.na)return 2;if(!e.na&&t.na)return-2;for(var r=0,o=0,a=0;a<n.length;a++)r+=e.attr_val[n[a]]||0,o+=t.attr_val[n[a]]||0;if(0===r&&0===o)return 0;if(0===r)return 1;if(0===o)return-1;var i=0,l=0;for(a=0;a<n.length;a++)e.attr_val[n[a]]>e.attr_val[n[i]]&&(i=a),t.attr_val[n[a]]>t.attr_val[n[l]]&&(l=a);if(i<l)return-1;if(i>l)return 1;var u,c=n[i],s=e.attr_val[c]/r,p=t.attr_val[c]/o;return(u=s-p)>0?1:u<0?-1:0};break;case"string":default:t=u}return{preferred:c(t),mandatory:t}}var p,f={preferred:c(p=l("profile_data")),mandatory:p}},800:function(e,t,n){"use strict";n.d(t,"a",function(){return w}),n.d(t,"b",function(){return T}),n.d(t,"d",function(){return A}),n.d(t,"c",function(){return P});var r=n(15),o=n(11),a=n.n(o),i=n(178),l=n(570),u=n(4),c=n.n(u),s=n(664),p=n(573),f=n(727);n(743);function d(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var h=n(690),y=n(673),g=n(753),b=n(754),v="oncoprint__tooltip",S="N/A";function E(e,t,n){var r=a()('<span class="nobreak"><a href="#" '.concat(t?"":'style="color:red;"',' oncontextmenu="return false;">').concat(e,"</a>").concat(n?" (".concat(n,")"):"","</span>"));return r.ready(function(){r.click(function(){i.a.getGenePanelUsingGET({genePanelId:e}).then(function(t){var n=t.genes.map(function(e){return e.hugoGeneSymbol}).sort(),r=open("","_blank","width=500,height=500");if(r){var o=r.document.createElement("div");r.document.body.appendChild(o),a()('<h3 style="text-align:center;">'.concat(e,"</h3><br>")).appendTo(o),a()("<span>".concat(n.join("<br>"),"</span>")).appendTo(o)}})})}),r}function w(e){return a()("<div>").text(e).html().replace(/_/g,"_&#8203;").replace(/\./g,".&#8203;")}function T(e,t){return function(n){var r="";if("counts"===e.datatype)for(var o=n[0],i=0;i<e.countsCategoryLabels.length;i++)r+='<span class="nobreak" style="color:'+e.countsCategoryFills[i]+';font-weight:bold;">'+e.countsCategoryLabels[i]+"</span>: "+o.attr_val_counts[e.countsCategoryLabels[i]]+"<br>";else{var l={},u=!0,c=!1,s=void 0;try{for(var p,f=n[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var d=p.value;if(d.attr_val_counts)for(var m=0,h=Object.keys(d.attr_val_counts);m<h.length;m++){var y=h[m];l[y]=l[y]||0,l[y]+=d.attr_val_counts[y]}}}catch(e){c=!0,s=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw s}}var g=Object.keys(l);if("number"===e.datatype){for(var b=0,S=0,E=0,w=g;E<w.length;E++){var T=w[E],A=l[T];b+=A*parseFloat(T),S+=A}var I=(b/S).toFixed(2);".00"===I.substring(I.length-3)&&(I=I.substring(0,I.length-3)),r+=e.label+': <span class="nobreak"><b>'+I+"".concat(S>1?" (average of ".concat(S," values)"):"","</b></span><br>")}else if(g.length>1){r+=e.label+":<br>";for(var P=0;P<g.length;P++){var _=g[P];r+='<span class="nobreak"><b>'+_+"</b>: "+l[_]+" sample".concat(1===l[_]?"":"s","</span><br>")}}else if(1===g.length){var k=g[0];r+=e.label+': <span class="nobreak"><b>'+k+"</b>".concat(n.length>1?" (".concat(l[g[0]]," samples)"):"","</span><br>")}}var C=0,M=!0,D=!1,x=void 0;try{for(var j,R=n[Symbol.iterator]();!(M=(j=R.next()).done);M=!0){j.value.na&&(C+=1)}}catch(e){D=!0,x=e}finally{try{M||null==R.return||R.return()}finally{if(D)throw x}}return C>0&&e.na_tooltip_value&&(r+="".concat(e.label,": <b>").concat(e.na_tooltip_value,"</b>").concat(n.length>1?" (".concat(C," samples)"):"","<br/>")),a()("<div>").addClass(v).append(O(n,!!t)).append("<br/>").append(r)}}function A(e,t){return function(n){var r="",o=S,i="";switch(e){case l.a.MRNA_EXPRESSION:r="MRNA: ";break;case l.a.PROTEIN_LEVEL:r="PROT: ";break;case l.a.METHYLATION:r="METHYLATION: ";break;case l.a.GENERIC_ASSAY:r="GENERIC ASSAY: "}var u=0,s=[],p=0,f=0,d=!0,m=!1,h=void 0;try{for(var y,g=n[Symbol.iterator]();!(d=(y=g.next()).done);d=!0){var b=y.value;null!==b.profile_data&&void 0!==b.profile_data&&(e===l.a.GENERIC_ASSAY&&b.category?(s.push(b.category),f+=1):(u+=b.profile_data,p+=1))}}catch(e){m=!0,h=e}finally{try{d||null==g.return||g.return()}finally{if(m)throw h}}if(p>0){var E=(u/p).toFixed(2);o=1===p?E:"".concat(E," (average of ").concat(p," values)")}f>0&&(i=0===p&&1===f?s[0]:p>0&&1===f?"".concat(s[0]):"".concat(c.a.uniq(s).join(", ")," (").concat(f," data points)"));var w=r;return o===S&&0!==f||(w+="<b>"+o+"</b>"),o!==S&&f>0&&(w+=" and "),f>0&&(w+="<b>"+i+"</b>"),w+="<br />",a()("<div>").addClass(v).append(O(n,!!t)).append("<br/>").append(w)}}function I(e,t,n,r){var o=[],a={},i=void 0,l={},u=void 0,p=[],f=void 0;if(e&&(o=c.a.uniq(e.map(function(e){return e.genePanelId}).filter(function(e){return!!e})),i=c.a.uniq(e.map(function(e){return e.molecularProfileId})),r&&(f=c.a.keyBy(i,function(e){return r[e].molecularAlterationType})),l=c.a.keyBy(i),a=c.a.keyBy(o)),t){if(u=c.a.uniq(t.map(function(e){return e.molecularProfileId})).filter(function(e){return!l[e]}),f&&n&&r){var d=c.a.keyBy(u,function(e){return r[e].molecularAlterationType});u=u.concat(n.filter(function(e){return!f[e]&&!d[e]}).map(function(e){return s.a[e]}))}p=c.a.uniq(t.map(function(e){return e.genePanelId})).filter(function(e){return!!e&&!a[e]})}return{dispProfiledGenePanelIds:o,dispNotProfiledGenePanelIds:p,dispProfiledIn:i,dispNotProfiledIn:u,dispAllProfiled:!(!(i&&i.length&&u)||u.length),dispNotProfiled:!(!(u&&u.length&&i)||i.length)}}function O(e,t){return e.length?e[0].sample?e.length>1?t?'<a class="nobreak" href='.concat(Object(r.y)(e[0].study_id,e[0].sample,e.map(function(e){return{studyId:e.study_id,patientId:e.patient}})),' target="_blank">View these ').concat(e.length," samples<a/>"):'<span class="nobreak">'.concat(e.length," samples</span>"):t?(n=e[0].study_id,o=e[0].sample,'<a class="nobreak" href="'.concat(Object(r.y)(n,o),'" target="_blank">').concat(o,"</a>")):'<span class="nobreak">'.concat(e[0].sample,"</span>"):e[0].patient?e.length>1?t?'<a class="nobreak" href='.concat(Object(r.w)(e[0].study_id,e[0].patient,e.map(function(e){return{studyId:e.study_id,patientId:e.patient}})),' target="_blank">View these ').concat(e.length," patients<a/>"):'<span class="nobreak">'.concat(e.length," patients</span>"):t?function(e,t){return'<a class="nobreak" href="'.concat(Object(r.w)(e,t),'" target="_blank">').concat(t,"</a>")}(e[0].study_id,e[0].patient):'<span class="nobreak">'.concat(e[0].patient,"</span>"):"":"";var n,o}function P(e,t,n){function r(e,t){var n=new f.a,r=!0,o=!1,i=void 0;try{for(var l,u=e[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value;n.increment(c.hugo_gene_symbol,c.amino_acid_change,c.cancer_hotspots_hotspot,c.oncokb_oncogenic,c.driver_filter,c.driver_filter_annotation,c.driver_tiers_filter,c.driver_tiers_filter_annotation,c.germline)}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n.entries().map(function(e){var n=m(e.key,9),r=n[0],o=n[1],i=n[2],l=n[3],u=n[4],c=n[5],s=n[6],p=n[7],f=n[8],d=e.value,v=a()("<span>").addClass("nobreak");return v.append('<b class="nobreak">'.concat(r," ").concat(o,"</b>")),i&&v.append('<img src="'.concat(h,'" title="Hotspot" style="height:11px; width:11px; margin-left:3px"/>')),l&&v.append('<img src="'.concat(y,'" title="').concat(l,'" style="height:11px; width:11px;margin-left:3px"/>')),u&&"Putative_Driver"===u&&v.append('<img src="'.concat(g,'" title="').concat(u,": ").concat(c,'" alt="driver filter" style="height:11px; width:11px;margin-left:3px"/>')),s&&v.append('<img src="'.concat(b,'" title="').concat(s,": ").concat(p,'" alt="driver tiers filter" style="height:11px; width:11px;margin-left:3px"/>')),f&&v.append(function(){var e=a()('<small style="color: #ff0000">');return e.append("&nbsp;Germline"),e}()),t&&v.append("&nbsp;(".concat(d,")")),v})}function o(e,t){var n=new f.a,r=!0,o=!1,i=void 0;try{for(var l,u=e[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value;n.increment(c.hugo_gene_symbol,c.direction)}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n.entries().map(function(e){var n=m(e.key,2),r=n[0],o=n[1],i=e.value,l=a()("<span>").addClass("nobreak");return l.append('<b class="nobreak">'.concat(r," ").concat(o,"</b>")),t&&l.append("&nbsp;(".concat(i,")")),l})}var i={"-2":"HOMODELETED","-1":"HETLOSS",1:"GAIN",2:"AMPLIFIED"};return function(l){var u=a()("<div>").addClass(v);u.append(O(l,e)).append("<br/>");var c=[],s=[],h=[],g=[],b=[],S=!0,w=!1,T=void 0;try{for(var A,P=l[Symbol.iterator]();!(S=(A=P.next()).done);S=!0)for(var _=A.value,k=0;k<_.data.length;k++){var C=_.data[k],M=C.molecularProfileAlterationType,D=C.hugoGeneSymbol;switch(M){case"MUTATION_EXTENDED":var x={};x.hugo_gene_symbol=D,x.amino_acid_change=C.proteinChange,x.driver_filter=C.driverFilter,x.driver_filter_annotation=C.driverFilterAnnotation,x.driver_tiers_filter=C.driverTiersFilter,x.driver_tiers_filter_annotation=C.driverTiersFilterAnnotation,C.isHotspot&&(x.cancer_hotspots_hotspot=!0),Object(p.n)(C)||(x.germline=!0);var j=C.oncoKbOncogenic;j&&(x.oncokb_oncogenic=j),("fusion"===C.alterationSubType?b:c).push(x);break;case"COPY_NUMBER_ALTERATION":if(i.hasOwnProperty(C.value)){var R={cna:i[C.value],hugo_gene_symbol:D},N=C.oncoKbOncogenic;N&&(R.oncokb_oncogenic=N),s.push(R)}break;case"MRNA_EXPRESSION":case"PROTEIN_LEVEL":var G=C.alterationSubType,L="MRNA_EXPRESSION"===M?h:g;"high"===G?L.push({hugo_gene_symbol:D,direction:"HIGH"}):"low"===G&&L.push({hugo_gene_symbol:D,direction:"LOW"})}}}catch(e){w=!0,T=e}finally{try{S||null==P.return||P.return()}finally{if(w)throw T}}if(b.length>0){u.append("Fusion: "),b=r(b,l.length>1);for(var V=0;V<b.length;V++)V>0&&u.append(","),u.append(b[V]);u.append("<br>")}if(c.length>0){u.append("Mutation: "),c=r(c,l.length>1);for(V=0;V<c.length;V++)V>0&&u.append(", "),u.append(c[V]);u.append("<br>")}if(s.length>0){u.append("Copy Number Alteration: "),s=function(e,t){var n=new f.a,r=!0,o=!1,i=void 0;try{for(var l,u=e[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value;n.increment(c.hugo_gene_symbol,c.cna,c.oncokb_oncogenic)}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n.entries().map(function(e){var n=m(e.key,3),r=n[0],o=n[1],i=n[2],l=e.value,u=a()("<span>").addClass("nobreak");return u.append('<b class="nobreak">'.concat(r," ").concat(o,"</b>")),i&&u.append("<img src=".concat(y,' title="').concat(i,'" style="height:11px; width:11px;margin-left:3px"/>')),t&&u.append("&nbsp;(".concat(l,")")),u})}(s,l.length>1);for(V=0;V<s.length;V++)V>0&&u.append(", "),u.append(s[V]);u.append("<br>")}if(h.length>0){u.append("MRNA: "),h=o(h,l.length>1);for(V=0;V<h.length;V++)V>0&&u.append(", "),u.append(h[V]);u.append("<br>")}if(g.length>0){u.append("PROT: "),g=o(g,l.length>1);for(V=0;V<g.length;V++)V>0&&u.append(", "),u.append(g[V]);u.append("<br>")}var F=t&&t(),B=new f.a,U=new f.a,W=new f.a,z=new f.a,H=0,K=0,Y=!0,Q=!1,q=void 0;try{for(var Z,J=l[Symbol.iterator]();!(Y=(Z=J.next()).done);Y=!0){var X=Z.value,$=I(X.profiled_in,X.not_profiled_in,n,F),ee=!0,te=!1,ne=void 0;try{for(var re,oe=$.dispProfiledGenePanelIds[Symbol.iterator]();!(ee=(re=oe.next()).done);ee=!0){var ae=re.value;B.increment(ae)}}catch(e){te=!0,ne=e}finally{try{ee||null==oe.return||oe.return()}finally{if(te)throw ne}}var ie=!0,le=!1,ue=void 0;try{for(var ce,se=$.dispNotProfiledGenePanelIds[Symbol.iterator]();!(ie=(ce=se.next()).done);ie=!0){var pe=ce.value;U.increment(pe)}}catch(e){le=!0,ue=e}finally{try{ie||null==se.return||se.return()}finally{if(le)throw ue}}if($.dispProfiledIn){var fe=!0,de=!1,me=void 0;try{for(var he,ye=$.dispProfiledIn[Symbol.iterator]();!(fe=(he=ye.next()).done);fe=!0){var ge=he.value;W.increment(ge)}}catch(e){de=!0,me=e}finally{try{fe||null==ye.return||ye.return()}finally{if(de)throw me}}}if($.dispNotProfiledIn){var be=!0,ve=!1,Se=void 0;try{for(var Ee,we=$.dispNotProfiledIn[Symbol.iterator]();!(be=(Ee=we.next()).done);be=!0){var Te=Ee.value;z.increment(Te)}}catch(e){ve=!0,Se=e}finally{try{be||null==we.return||we.return()}finally{if(ve)throw Se}}}$.dispAllProfiled?H+=1:$.dispNotProfiled&&(K+=1)}}catch(e){Q=!0,q=e}finally{try{Y||null==J.return||J.return()}finally{if(Q)throw q}}var Ae=B.entries(),Ie=U.entries();if(Ae.length||Ie.length){u.append("Gene Panels: ");var Oe=!1,Pe=!0,_e=!1,ke=void 0;try{for(var Ce,Me=Ae[Symbol.iterator]();!(Pe=(Ce=Me.next()).done);Pe=!0){var De=Ce.value;Oe&&u.append(",&nbsp;"),Oe=!0,u.append(E(De.key[0],!0,l.length>1?De.value:void 0))}}catch(e){_e=!0,ke=e}finally{try{Pe||null==Me.return||Me.return()}finally{if(_e)throw ke}}var xe=!0,je=!1,Re=void 0;try{for(var Ne,Ge=Ie[Symbol.iterator]();!(xe=(Ne=Ge.next()).done);xe=!0){var Le=Ne.value;B.has.apply(B,d(Le.key))||(Oe&&u.append(",&nbsp;"),Oe=!0,u.append(E(Le.key[0],!1,l.length>1?Le.value:void 0)))}}catch(e){je=!0,Re=e}finally{try{xe||null==Ge.return||Ge.return()}finally{if(je)throw Re}}u.append("<br>")}var Ve=W.entries(),Fe=z.entries();return H===l.length?(u.append("Profiled in all selected molecular profiles."+(l.length>1?" (".concat(H,")"):"")),u.append("<br>")):K===l.length?(u.append("Not profiled in selected molecular profiles."+(l.length>1?" (".concat(K,")"):"")),u.append("<br>")):(Ve.length&&(u.append("Profiled in: "+Ve.map(function(e){var t=e.key[0],n=t;return F&&t in F&&(n=F[t].name),'<span class="nobreak">'.concat(n).concat(l.length>1?" (".concat(e.value,")"):"","</span>")}).join(", ")),u.append("<br>")),Fe.length&&(u.append("<span class=\"nobreak\" style='color:red; font-weight:bold'>Not profiled in: "+Fe.map(function(e){var t=e.key[0],n=t;return F&&t in F&&(n=F[t].name),'<span class="nobreak">'.concat(n).concat(l.length>1?" (".concat(e.value,")"):"","</span>")}).join(", ")+"</span>"),u.append("<br>")),H>0&&(u.append("Profiled in all selected molecular profiles."+(l.length>1?" (".concat(H,")"):"")),u.append("<br>")),K>0&&(u.append("Not profiled in selected molecular profiles."+(l.length>1?" (".concat(K,")"):"")),u.append("<br>"))),u}}},801:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a});var r=/.+\.(.+)/;function o(e){var t=new URL(e).pathname;if(t){var n=t.match(r);if(n)return n[1].toLowerCase()}}function a(e){return"https://docs.google.com/viewerng/viewer?url=".concat(e,"?pid=explorer&efh=false&a=v&chrome=false&embedded=true")}},851:function(e,t,n){"use strict";var r=n(0),o=n(7),a=n(2),i=n(4),l=n(575),u=n(614),c=n(15);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getTextValue",value:function(t){return e.getData(t)||""}},{key:"getData",value:function(e){return e.length>0?e[0].sampleId:null}},{key:"renderFunction",value:function(t,n){var o=e.getTextValue(t),a=r.createElement(u.a,{text:o,tooltip:r.createElement("div",{style:{maxWidth:300}},o),maxLength:16});if(n){var i=n[t[0].molecularProfileId],l=i&&i.studyId;l&&(a=r.createElement("a",{href:Object(c.y)(l,o),target:"_blank"},a))}return a}}],(n=null)&&s(t.prototype,n),o&&s(t,o),e}(),f=n(686),d=n(3);function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(t){var n=e.getSortValue(t);if(n){var o=t[0].normalAltCount,a=t[0].normalRefCount;return f.a.mainContent(n,o,a)}return r.createElement(d.o,{status:d.n.NA})}},{key:"getTextValue",value:function(t){var n=e.getSortValue(t);return n?Object(f.b)(n):""}},{key:"getSortValue",value:function(e){var t=e[0];if(!t)return null;var n=t.normalAltCount,r=t.normalRefCount;return n<0||r<0?null:n/(n+r)}}],(n=null)&&m(t.prototype,n),o&&m(t,o),e}(),y=n(768),g=(n(587),n(748)),b=n(580),v=n(17),S=n(749);function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(t,n,o){var a=e.getMutSigQValue(t,n),i=e.getVariantCountData(t,o),l=e.makeCohortFrequencyViz(i);return r.createElement("div",null,null!==l&&l,r.createElement(v.If,{condition:a>0},r.createElement(v.Then,null,r.createElement(S.a,{qValue:a}))))}},{key:"getSortValue",value:function(t,n){var r=e.getVariantCountData(t,n);return r&&r.data?r.data.numberOfSamplesWithMutationInGene:null}},{key:"getVariantCountData",value:function(e,t){if(0===e.length)return null;var n=e[0].entrezGeneId,r=e[0].keyword,o=t.get({entrezGeneId:n,keyword:r});return o?Object.assign({hugoGeneSymbol:e[0].gene.hugoGeneSymbol},o):null}},{key:"getMutSigQValue",value:function(e,t){if(!t||0===e.length)return-1;var n=t[e[0].entrezGeneId];return n?n.qValue:-1}},{key:"makeCohortFrequencyViz",value:function(t){var n=null;if(null===t)n=d.n.LOADING;else if("error"===t.status)n=d.n.ERROR;else{if(null!==t.data){var o=[t.data.numberOfSamplesWithMutationInGene];return t.data.keyword&&o.push(t.data.numberOfSamplesWithKeyword),r.createElement(g.a,{counts:o,totalCount:t.data.numberOfSamples,tooltip:e.getCohortFrequencyTooltip(t)})}n=d.n.NA}if(null!==n)return r.createElement(d.o,{status:n})}},{key:"getBoldPercentage",value:function(e){return r.createElement("b",null,Object(b.c)(e))}},{key:"getCohortFrequencyTooltip",value:function(t){return null===t?r.createElement("span",null,"Querying server for data."):"error"===t.status?r.createElement("span",null,"Error retrieving data."):null===t.data?r.createElement("span",null,"Count data is not available for this gene."):r.createElement("div",null,r.createElement("span",null,t.data.numberOfSamplesWithMutationInGene," ","samples (",e.getBoldPercentage(t.data.numberOfSamplesWithMutationInGene/t.data.numberOfSamples),") in this study have mutated"," ",t.hugoGeneSymbol,void 0!==t.data.keyword&&r.createElement("span",null,", out of which"," ",t.data.numberOfSamplesWithKeyword," (",e.getBoldPercentage(t.data.numberOfSamplesWithKeyword/t.data.numberOfSamples),") have ",t.data.keyword," mutations"),"."))}}],(n=null)&&E(t.prototype,n),o&&E(t,o),e}();function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(t,n,o){var a=e.getData(t,n,o);return r.createElement(d.c,{placement:"left",overlay:e.getTooltipContents(a),arrowContent:r.createElement("div",{className:"rc-tooltip-arrow-inner"})},e.getTdContents(a))}},{key:"getTextValue",value:function(t,n,r){var o=e.getTdValue(e.getData(t,n,r));return null!==o?e.altToFilterString[o]:""}},{key:"getSortValue",value:function(t,n,r){return e.getTdValue(e.getData(t,n,r))}},{key:"filter",value:function(t,n,r,o){var a=e.getData(t,n,r);return!(!a||!a.data)&&(!!e.altToFilterString[a.data.alteration]&&e.altToFilterString[a.data.alteration].indexOf(o.toLowerCase())>-1)}},{key:"getData",value:function(e,t,n){if(!e||0===e.length||!n.isActive)return null;var r=e[0].sampleId,o=e[0].entrezGeneId,a=t[e[0].molecularProfileId];return a?n.get({sampleId:r,entrezGeneId:o,studyId:a.studyId}):null}},{key:"getTdValue",value:function(e){return null!==e&&"complete"===e.status&&null!==e.data?e.data.alteration:null}},{key:"getTdContents",value:function(e){var t=null;if(null!==e&&"complete"===e.status&&null!==e.data){var n=e.data.alteration;return 2===n?r.createElement("span",{style:{color:"red",textAlign:"center",fontSize:"12px"}},r.createElement("b",null,"Amp")):1===n?r.createElement("span",{style:{color:"red",textAlign:"center",fontSize:"smaller"}},r.createElement("b",null,"Gain")):0===n?r.createElement("span",{style:{color:"black",textAlign:"center",fontSize:"xx-small"}},"Diploid"):-1===n?r.createElement("span",{style:{color:"blue",textAlign:"center",fontSize:"smaller"}},r.createElement("b",null,"ShallowDel")):r.createElement("span",{style:{color:"blue",textAlign:"center",fontSize:"12px"}},r.createElement("b",null,"DeepDel"))}if(null!==(t=e&&"complete"===e.status&&null===e.data?d.n.NA:e&&"error"===e.status?d.n.ERROR:d.n.NA))return r.createElement(d.o,{status:t,naAlt:"CNA data is not available for this gene."})}},{key:"getTooltipContents",value:function(e){return e&&"complete"===e.status&&null!==e.data?r.createElement("div",null,r.createElement("span",null,{"-2":"Deep deletion","-1":"Shallow deletion",0:"Diploid / normal",1:"Low-level gain",2:"High-level amplification"}[e.data.alteration])):e&&"complete"===e.status&&null===e.data?r.createElement("span",null,"CNA data is not available for this gene."):e&&"error"===e.status?r.createElement("span",null,"Error retrieving data."):r.createElement("span",null,"Querying server for data.")}},{key:"isVisible",value:function(e){return e&&e.isActive}}],(n=null)&&T(t.prototype,n),o&&T(t,o),e}();A.altToFilterString={2:"amp",1:"gain",0:"diploid","-1":"shallowdel","-2":"deepdel"};var I=n(769);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getTextValue",value:function(t){return e.getData(t)||""}},{key:"getDisplayValue",value:function(t){return e.getTextValue(t)}},{key:"getData",value:function(e){return e.length>0?e[0].gene.hugoGeneSymbol:null}},{key:"getSortValue",value:function(t){return e.getTextValue(t)}},{key:"renderFunction",value:function(t){var n=e.getDisplayValue(t);return r.createElement("span",{"data-test":"mutation-table-gene-column"},n)}}],(n=null)&&O(t.prototype,n),o&&O(t,o),e}();function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getSortValue",value:function(t){var n=e.getData(t);return n?e.extractSortValue(n):null}},{key:"extractSortValue",value:function(e){var t=e.match(/[0-9]+/g),n=-1;return t?n=parseInt(t[0]):e.toLowerCase().indexOf("x")>-1?n=23:e.toLowerCase().indexOf("y")>-1&&(n=24),n}},{key:"getData",value:function(e){return e.length>0?e[0].chr:null}}],(n=null)&&_(t.prototype,n),r&&_(t,r),e}(),C=n(22),M=n(786),D=n.n(M);function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getData",value:function(e){var t=null;return e.length>0&&(t=e[0].mutationStatus),t}},{key:"sortValue",value:function(t){return e.getData(t)}},{key:"download",value:function(t){return e.getData(t)||""}},{key:"renderFunction",value:function(t){var n,o=e.getData(t),a=!1;return o?o.toLowerCase().indexOf("somatic")>-1?(n=r.createElement("span",{className:D.a.somatic},"S"),a=!0):o.toLowerCase().indexOf("germline")>-1?(n=r.createElement("span",{className:D.a.germline},"G"),a=!0):n=r.createElement("span",{className:D.a.unknown},o):n=r.createElement("span",null),a&&(n=r.createElement(d.c,{overlay:r.createElement("span",null,o),placement:"right"},n)),n}}],(n=null)&&x(t.prototype,n),o&&x(t,o),e}(),R=n(787),N=n.n(R);function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getSortValue",value:function(t){return Object(C.b)(e.getTextValue(t))}},{key:"getTextValue",value:function(t){var n="",r=e.getData(t);return r&&(n=r.toString()),n}},{key:"getFilterValue",value:function(t,n,r){var o=e.getDisplayValue(t),a=j.getData(t);return a&&a.toLowerCase().includes("germline")&&(o="".concat(o).concat(a)),o.toUpperCase().indexOf(r)>-1}},{key:"getDisplayValue",value:function(t){return e.getTextValue(t)}},{key:"getData",value:function(e){return e.length>0?e[0].proteinChange:null}},{key:"renderPlainText",value:function(t){var n=e.getDisplayValue(t);return r.createElement("span",null,n)}},{key:"renderWithMutationStatus",value:function(t){var n=e.getDisplayValue(t),o=j.getData(t),a=r.createElement(u.a,{text:n,tooltip:r.createElement("span",null,n),className:N.a.proteinChange,maxLength:40});return o&&o.toLowerCase().indexOf("germline")>-1&&(a=r.createElement("span",null,a,r.createElement("span",{className:N.a.germline},"Germline"))),a}}],(n=null)&&G(t.prototype,n),o&&G(t,o),e}();function V(e,t){return e=r.createElement(d.c,{overlay:r.createElement("span",null,t),placement:"left"},e)}var F=n(788),B=n.n(F);function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var W=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getDisplayValue",value:function(t){var n=e.getMapEntry(t);return n&&n.displayValue?n.displayValue:e.getTextValue(t)}},{key:"getTextValue",value:function(t){var n="",r=e.getData(t);return r&&(n=r.toString()),n}},{key:"getClassName",value:function(t){var n=e.getMapEntry(t);return n&&n.className?n.className:e.MAIN_MUTATION_TYPE_MAP.other.className}},{key:"getMapEntry",value:function(t){var n=e.getData(t);return n?e.MAIN_MUTATION_TYPE_MAP[Object(d.C)(n)]:void 0}},{key:"getData",value:function(e){return e.length>0?e[0].mutationType:null}},{key:"renderFunction",value:function(t){var n=e.getDisplayValue(t),o=e.getClassName(t),a=e.getTextValue(t),i=r.createElement("span",{className:o},n);return a.toLowerCase()!==n.toLowerCase()&&(i=V(i,a)),i}},{key:"MAIN_MUTATION_TYPE_MAP",get:function(){return{missense:{displayValue:"Missense",className:B.a.missenseMutation},inframe:{displayValue:"IF",className:B.a.inframeMutation},truncating:{displayValue:"Truncating",className:B.a.truncMutation},nonsense:{displayValue:"Nonsense",className:B.a.truncMutation},nonstop:{displayValue:"Nonstop",className:B.a.truncMutation},nonstart:{displayValue:"Nonstart",className:B.a.truncMutation},frameshift:{displayValue:"FS",className:B.a.truncMutation},frame_shift_del:{displayValue:"FS del",className:B.a.truncMutation},frame_shift_ins:{displayValue:"FS ins",className:B.a.truncMutation},in_frame_ins:{displayValue:"IF ins",className:B.a.inframeMutation},in_frame_del:{displayValue:"IF del",className:B.a.inframeMutation},splice_site:{displayValue:"Splice",className:B.a.truncMutation},fusion:{displayValue:"Fusion",className:B.a.fusion},silent:{displayValue:"Silent",className:B.a.otherMutation},other:{displayValue:"Other",className:B.a.otherMutation}}}}],(n=null)&&U(t.prototype,n),o&&U(t,o),e}(),z=n(789),H=n.n(z);function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getDisplayValue",value:function(t){return e.getTextValue(t)}},{key:"getTextValue",value:function(t){var n="",r=e.getData(t);return r&&(n=r.toString().toUpperCase()),n}},{key:"getData",value:function(e){return e.length>0?e[0].variantType:null}},{key:"getMapEntry",value:function(t){var n=e.getData(t);return n?e.MAIN_VARIANT_TYPE_MAP[n.toUpperCase()]:void 0}},{key:"getTooltip",value:function(t){var n=e.getMapEntry(t);return n&&n.toolTip?n.toolTip:void 0}},{key:"getClassName",value:function(t){var n=e.getMapEntry(t);return n&&n.className?n.className:e.MAIN_VARIANT_TYPE_MAP.OTHER.className}},{key:"renderFunction",value:function(t){var n=e.getDisplayValue(t),o=e.getClassName(t),a=e.getTooltip(t),i=r.createElement("span",{className:o},n);return a&&(i=V(i,a)),i}},{key:"MAIN_VARIANT_TYPE_MAP",get:function(){return{SNP:{toolTip:"Single Nucleotide Polymorphism",className:H.a.variantTypeSnp},DNP:{toolTip:"Di-Nucleotide Polymorphism",className:H.a.variantTypeSnp},TNP:{toolTip:"Tri-Nucleotide Polymorphism",className:H.a.variantTypeSnp},ONP:{toolTip:"Oligo-Nucleotide Polymorphism",className:H.a.variantTypeSnp},INS:{toolTip:"Insertion",className:H.a.variantTypeIns},DEL:{toolTip:"Deletion",className:H.a.variantTypeDel},CONSOLIDATED:{className:H.a.variantTypeOther},OTHER:{className:H.a.variantTypeOther}}}}],(n=null)&&K(t.prototype,n),o&&K(t,o),e}(),Q=n(629),q=n(9),Z=n.n(q),J=n(660),X=n.n(J),$=n(790),ee=n.n($),te=n(737),ne=n.n(te);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e){e.querySelector(".rc-tooltip-arrow").style.display="none"}var ce=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=ae(t).call(this,e))||"object"!==re(o)&&"function"!=typeof o?ie(r):o).tooltipContent=n.tooltipContent.bind(ie(n)),n}var o,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(t,r["Component"]),o=t,i=[{key:"download",value:function(e){return e?"impact: ".concat(e.functionalImpact,", score: ").concat(e.functionalImpactScore):"NA"}},{key:"maLink",value:function(e){var t=null;return e&&0!==(t=e.replace("getma.org","mutationassessor.org/r3")).indexOf("http://")&&(t="http://".concat(t)),t}}],(a=[{key:"render",value:function(){var e=r.createElement("span",{className:"".concat(X.a["annotation-item-text"])});if(this.props.mutationAssessor&&null!==this.props.mutationAssessor.functionalImpact){var t=this.props.mutationAssessor;e=r.createElement("span",{className:Z()(X.a["annotation-item-text"],ne.a["ma-".concat(t.functionalImpact)])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}));var n=r.createElement("div",{className:"rc-tooltip-arrow-inner"});e=r.createElement(d.c,{overlay:this.tooltipContent,placement:"right",trigger:["hover","focus"],arrowContent:n,onPopupAlign:ue,destroyTooltipOnHide:!1},e)}return e}},{key:"tooltipContent",value:function(){if(this.props.mutationAssessor){var e=this.props.mutationAssessor,o=t.maLink("http://mutationassessor.org/r3/?cm=var&p=".concat(e.uniprotId,"&var=").concat(e.variant)),a=t.maLink(e.msaLink),i=t.maLink(e.pdbLink),l=e.functionalImpact?r.createElement("div",null,r.createElement("table",{className:ee.a["ma-tooltip-table"]},r.createElement("tr",null,r.createElement("td",null,"Source"),r.createElement("td",null,r.createElement("a",{href:"http://mutationassessor.org/r3"},"MutationAssessor"))),r.createElement("tr",null,r.createElement("td",null,"Impact"),r.createElement("td",null,r.createElement("span",{className:ne.a["ma-".concat(e.functionalImpact)]},e.functionalImpact))),(e.functionalImpactScore||0===e.functionalImpactScore)&&r.createElement("tr",null,r.createElement("td",null,"Score"),r.createElement("td",null,r.createElement("b",null,e.functionalImpactScore.toFixed(2)))))):null,u=o?r.createElement("div",{className:ee.a["mutation-assessor-link"]},r.createElement("a",{href:o,target:"_blank"},r.createElement("img",{height:"15",width:"19",src:n(687),className:ee.a["mutation-assessor-main-img"],alt:"Mutation Assessor"}),"Go to Mutation Assessor")):null,c=a?r.createElement("div",{className:ee.a["mutation-assessor-link"]},r.createElement("a",{href:a,target:"_blank"},r.createElement("span",{className:"".concat(ee.a["ma-icon"]," ").concat(ee.a["ma-msa-icon"])},"msa"),"Multiple Sequence Alignment")):null,s=i?r.createElement("div",{className:ee.a["mutation-assessor-link"]},r.createElement("a",{href:i,target:"_blank"},r.createElement("span",{className:"".concat(ee.a["ma-icon"]," ").concat(ee.a["ma-3d-icon"])},"3D"),"Mutation Assessor 3D View")):null;return r.createElement("span",null,l,c,s,u)}}}])&&oe(o.prototype,a),i&&oe(o,i),t}();ce.MUTATION_ASSESSOR_URL="http://mutationassessor.org/r3/";var se=n(738),pe=n.n(se);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(e){e.querySelector(".rc-tooltip-arrow").style.display="none"}var be=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=me(t).call(this,e))||"object"!==fe(o)&&"function"!=typeof o?he(r):o).tooltipContent=n.tooltipContent.bind(he(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(t,r["Component"]),n=t,a=[{key:"download",value:function(e,t){return e||t?"impact: ".concat(t,", score: ").concat(e):"NA"}}],(o=[{key:"render",value:function(){var e=r.createElement("span",{className:"".concat(X.a["annotation-item-text"])});if(this.props.siftPrediction&&this.props.siftPrediction.length>0){e=r.createElement("span",{className:Z()(X.a["annotation-item-text"],pe.a["sift-".concat(this.props.siftPrediction)])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}));var t=r.createElement("div",{className:"rc-tooltip-arrow-inner"});e=r.createElement(d.c,{overlay:this.tooltipContent,placement:"right",trigger:["hover","focus"],arrowContent:t,onPopupAlign:ge,destroyTooltipOnHide:!1},e)}return e}},{key:"tooltipContent",value:function(){var e=this.props.siftPrediction?r.createElement("div",null,r.createElement("table",{className:pe.a["sift-tooltip-table"]},r.createElement("tr",null,r.createElement("td",null,"Source"),r.createElement("td",null,r.createElement("a",{href:"http://sift.bii.a-star.edu.sg/"},"SIFT"))),r.createElement("tr",null,r.createElement("td",null,"Impact"),r.createElement("td",null,r.createElement("span",{className:pe.a["sift-".concat(this.props.siftPrediction)]},this.props.siftPrediction))),(this.props.siftScore||0===this.props.siftScore)&&r.createElement("tr",null,r.createElement("td",null,"Score"),r.createElement("td",null,r.createElement("b",null,this.props.siftScore.toFixed(2)))))):null;return r.createElement("span",null,e)}}])&&de(n.prototype,o),a&&de(n,a),t}();be.SIFT_URL="http://sift.bii.a-star.edu.sg/";var ve=n(739),Se=n.n(ve);function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oe(e){e.querySelector(".rc-tooltip-arrow").style.display="none"}var Pe,_e=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Te(t).call(this,e))||"object"!==Ee(o)&&"function"!=typeof o?Ae(r):o).tooltipContent=n.tooltipContent.bind(Ae(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(t,r["Component"]),n=t,a=[{key:"download",value:function(e,t){return e||t?"impact: ".concat(t,", score: ").concat(e):"NA"}}],(o=[{key:"render",value:function(){var e=r.createElement("span",{className:"".concat(X.a["annotation-item-text"])});if(this.props.polyPhenPrediction&&this.props.polyPhenPrediction.length>0){e=r.createElement("span",{className:Z()(X.a["annotation-item-text"],Se.a["polyPhen2-".concat(this.props.polyPhenPrediction)])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}));var t=r.createElement("div",{className:"rc-tooltip-arrow-inner"});e=r.createElement(d.c,{overlay:this.tooltipContent,placement:"right",trigger:["hover","focus"],arrowContent:t,onPopupAlign:Oe,destroyTooltipOnHide:!1},e)}return e}},{key:"tooltipContent",value:function(){var e=this.props.polyPhenPrediction?r.createElement("div",null,r.createElement("table",{className:Se.a["polyPhen2-tooltip-table"]},r.createElement("tr",null,r.createElement("td",null,"Source"),r.createElement("td",null,r.createElement("a",{href:"http://genetics.bwh.harvard.edu/pph2/"},"PolyPhen-2"))),r.createElement("tr",null,r.createElement("td",null,"Impact"),r.createElement("td",null,r.createElement("span",{className:Se.a["polyPhen2-".concat(this.props.polyPhenPrediction)]},this.props.polyPhenPrediction))),(this.props.polyPhenScore||0===this.props.polyPhenScore)&&r.createElement("tr",null,r.createElement("td",null,"Score"),r.createElement("td",null,r.createElement("b",null,this.props.polyPhenScore.toFixed(2)))))):null;return r.createElement("span",null,e)}}])&&we(n.prototype,o),a&&we(n,a),t}();function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function De(e,t,n){return t&&Me(e.prototype,t),n&&Me(e,n),e}function xe(e,t){return!t||"object"!==ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}_e.POLYPHEN2_URL="http://genetics.bwh.harvard.edu/pph2/",function(e){e[e.MUTATION_ASSESSOR=0]="MUTATION_ASSESSOR",e[e.SIFT=1]="SIFT",e[e.POLYPHEN2=2]="POLYPHEN2"}(Pe||(Pe={}));var Ne=function(e){function t(e){var n;return Ce(this,t),(n=xe(this,je(t).call(this,e))).state={active:n.props.active},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(t,r["Component"]),De(t,[{key:"legend",value:function(){var e=this;return r.createElement("div",null,r.createElement("table",{className:"table table-striped table-border-top"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Legend"),r.createElement("th",null,r.createElement("span",{style:{display:"inline-block",width:22},title:"Mutation Asessor",onMouseOver:function(){return e.setState({active:"mutationAssessor"})}},r.createElement("img",{height:14,width:14,src:n(687),alt:"Mutation Assessor"}))),r.createElement("th",null,r.createElement("span",{style:{display:"inline-block",width:22},title:"SIFT",onMouseOver:function(){return e.setState({active:"sift"})}},r.createElement("img",{height:14,width:14,src:n(740),alt:"SIFT"}))),r.createElement("th",null,r.createElement("span",{style:{display:"inline-block",width:22},title:"PolyPhen-2",onMouseOver:function(){return e.setState({active:"polyPhen2"})}},r.createElement("img",{height:14,width:14,src:n(741),alt:"PolyPhen-2"}))))),r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:Z()(X.a["annotation-item-text"],ne.a["ma-high"])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}))),r.createElement("td",{className:ne.a["ma-high"]},"high"),r.createElement("td",{className:pe.a["sift-deleterious"]},"deleterious"),r.createElement("td",{className:Se.a["polyPhen2-probably_damaging"]},"probably_damaging")),r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:Z()(X.a["annotation-item-text"],ne.a["ma-medium"])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}))),r.createElement("td",{className:ne.a["ma-medium"]},"medium"),r.createElement("td",null,"-"),r.createElement("td",null,"-")),r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:Z()(X.a["annotation-item-text"],ne.a["ma-low"])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}))),r.createElement("td",{className:ne.a["ma-low"]},"low"),r.createElement("td",{className:pe.a["sift-deleterious_low_confidence"]},"deleterious_low_confidence"),r.createElement("td",{className:Se.a["polyPhen2-possibly_damaging"]},"possibly_damaging")),r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:Z()(X.a["annotation-item-text"],ne.a["ma-neutral"])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}))),r.createElement("td",{className:ne.a["ma-neutral"]},"neutral"),r.createElement("td",{className:pe.a["sift-tolerated_low_confidence"]},"tolerated_low_confidence"),r.createElement("td",{className:Se.a["polyPhen2-benign"]},"benign")),r.createElement("tr",null,r.createElement("td",null,r.createElement("span",{className:Z()(X.a["annotation-item-text"],ne.a["ma-neutral"])},r.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}))),r.createElement("td",null,"-"),r.createElement("td",{className:pe.a["sift-tolerated"]},"tolerated"),r.createElement("td",null,"-")))))}},{key:"render",value:function(){return r.createElement("div",null,"mutationAssessor"===this.state.active&&t.mutationAssessorText(),"sift"===this.state.active&&t.siftText(),"polyPhen2"===this.state.active&&t.polyPhen2Text(),this.legend())}}],[{key:"mutationAssessorText",value:function(){return r.createElement("div",{style:{width:450,height:100}},r.createElement("a",{href:ce.MUTATION_ASSESSOR_URL,target:"_blank"},"Mutation Assessor")," ","predicts the functional impact of amino-acid substitutions in proteins, such as mutations discovered in cancer or missense polymorphisms. The functional impact is assessed based on evolutionary conservation of the affected amino acid in protein homologs. The method has been validated on a large set (60k) of disease associated (OMIM) and polymorphic variants.")}},{key:"siftText",value:function(){return r.createElement("div",{style:{width:450,height:100}},r.createElement("a",{href:be.SIFT_URL,target:"_blank"},"SIFT")," ","predicts whether an amino acid substitution affects protein function based on sequence homology and the physical properties of amino acids. SIFT can be applied to naturally occurring nonsynonymous polymorphisms and laboratory-induced missense mutations.")}},{key:"polyPhen2Text",value:function(){return r.createElement("div",{style:{width:450,height:100}},r.createElement("a",{href:_e.POLYPHEN2_URL,target:"_blank"},"PolyPhen-2")," ","(Polymorphism Phenotyping v2) is a tool which predicts possible impact of an amino acid substitution on the structure and function of a human protein using straightforward physical and comparative considerations.")}}]),t}();function Ge(e){e.querySelector(".rc-tooltip-arrow").style.left="10px"}var Le=function(){function e(){Ce(this,e)}return De(e,null,[{key:"headerRender",value:function(e){var t=r.createElement("div",{className:"rc-tooltip-arrow-inner"});return r.createElement("div",null,e,r.createElement("br",null),r.createElement("div",{style:{height:14}},r.createElement(d.c,{overlay:r.createElement(Ne,{active:"mutationAssessor"}),placement:"topLeft",trigger:["hover","focus"],arrowContent:t,destroyTooltipOnHide:!0,onPopupAlign:Ge},r.createElement("span",{style:{display:"inline-block",width:22}},r.createElement("img",{height:14,width:14,src:n(687),alt:"Sift"}))),r.createElement(d.c,{overlay:r.createElement(Ne,{active:"sift"}),placement:"topLeft",trigger:["hover","focus"],arrowContent:t,destroyTooltipOnHide:!0,onPopupAlign:Ge},r.createElement("span",{style:{display:"inline-block",width:22}},r.createElement("img",{height:14,width:14,src:n(740),alt:"SIFT"}))),r.createElement(d.c,{overlay:r.createElement(Ne,{active:"polyPhen2"}),placement:"topLeft",trigger:["hover","focus"],arrowContent:t,destroyTooltipOnHide:!0,onPopupAlign:Ge},r.createElement("span",{style:{display:"inline-block",width:22}},r.createElement("img",{height:14,width:14,src:n(741),alt:"PolyPhen-2"})))))}},{key:"getData",value:function(t,n,r){var o=e.getDataFromCache(t,n),a=e.getDataFromCache(t,r),i=o?this.getSiftData(o.data):void 0,l=o?this.getPolyphenData(o.data):void 0;return{mutationAssessor:a?this.getMutationAssessorData(a.data):void 0,siftScore:i&&i.siftScore,siftPrediction:i&&i.siftPrediction,polyPhenScore:l&&l.polyPhenScore,polyPhenPrediction:l&&l.polyPhenPrediction}}},{key:"getSiftData",value:function(e){var t=void 0,n=void 0;return e&&!i.isEmpty(e.transcript_consequences)&&(t=e.transcript_consequences[0].sift_score,n=e.transcript_consequences[0].sift_prediction),{siftScore:t,siftPrediction:n}}},{key:"getPolyphenData",value:function(e){var t=void 0,n=void 0;return e&&!i.isEmpty(e.transcript_consequences)&&(t=e.transcript_consequences[0].polyphen_score,n=e.transcript_consequences[0].polyphen_prediction),{polyPhenScore:t,polyPhenPrediction:n}}},{key:"getMutationAssessorData",value:function(e){return e&&e.mutation_assessor?e.mutation_assessor.annotation:void 0}},{key:"renderFunction",value:function(t,n,o){var a=e.getDataFromCache(t,n),i=e.getDataFromCache(t,o);return r.createElement("div",null,e.makeFunctionalImpactViz(i,Pe.MUTATION_ASSESSOR),e.makeFunctionalImpactViz(a,Pe.SIFT),e.makeFunctionalImpactViz(a,Pe.POLYPHEN2))}},{key:"download",value:function(t,n,r){if(n||r){var o=e.getData(t,n,r);if(o)return["MutationAssessor: ".concat(ce.download(o.mutationAssessor)),"SIFT: ".concat(be.download(o.siftScore,o.siftPrediction)),"Polyphen-2: ".concat(_e.download(o.polyPhenScore,o.polyPhenPrediction))].join(";")}return""}},{key:"getDataFromCache",value:function(e,t){return 0!==e.length&&t?t.get(e[0]):null}},{key:"makeFunctionalImpactViz",value:function(t,n){var o=null;if(null===t)o=d.n.LOADING;else if("error"===t.status)o=d.n.ERROR;else if(null===t.data)o=d.n.NA;else{var a;switch(n){case Pe.MUTATION_ASSESSOR:return a=e.getMutationAssessorData(t.data),r.createElement(ce,{mutationAssessor:a});case Pe.SIFT:return a=e.getSiftData(t.data),r.createElement(be,{siftScore:a.siftScore,siftPrediction:a.siftPrediction});case Pe.POLYPHEN2:return a=e.getPolyphenData(t.data),r.createElement(_e,{polyPhenScore:a.polyPhenScore,polyPhenPrediction:a.polyPhenPrediction})}}if(null!==o)return o===d.n.LOADING?r.createElement(Q.Circle,{size:22,scaleEnd:.5,scaleStart:.2,color:"#aaa",className:"pull-left"}):r.createElement(d.o,{status:o})}}]),e}();function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ue(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ke=function(e){function t(){return Be(this,t),Ue(this,We(t).apply(this,arguments))}return ze(t,l["b"]),t}(),Ye=function(e){function t(e){var n;return Be(this,t),(n=Ue(this,We(t).call(this,e))).state={},n}var n,o,a;return ze(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,n=e.data,o=e.columns,a=e.initialSortColumn,i=e.initialSortDirection,l=e.initialItemsPerPage,u=n.length>(this.props.initialItemsPerPage||t.defaultProps.initialItemsPerPage);return r.createElement("div",{className:"cbioportal-frontend"},r.createElement(Ke,{data:n,columns:o||t.defaultProps.columns,initialSortColumn:a,initialSortDirection:i,initialItemsPerPage:l,showCopyDownload:!1,showColumnVisibility:!1,showFilter:!1,showPagination:u,showPaginationAtTop:!0,paginationProps:{showMoreButton:!1}}))}}])&&Ve(n.prototype,o),a&&Ve(n,a),t}();Ye.defaultProps={data:[],columns:[{name:"COSMIC ID",order:1,render:function(e){return r.createElement("span",null,r.createElement("a",{href:"http://cancer.sanger.ac.uk/cosmic/mutation/overview?id=".concat(e.cosmicMutationId),target:"_blank"},e.cosmicMutationId))},sortBy:function(e){return e.cosmicMutationId}},{name:"Protein Change",order:2,render:function(e){return r.createElement("span",null,e.proteinChange)},sortBy:function(e){return Object(C.b)(e.proteinChange)}},{name:"Occurrence",order:3,render:function(e){return r.createElement("span",null,e.count)},sortBy:function(e){return e.count}}],initialSortColumn:"Occurrence",initialSortDirection:"desc",initialItemsPerPage:10};var Qe=n(791),qe=n.n(Qe),Ze=n(633),Je=n.n(Ze);function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $e(e){e.querySelector(".rc-tooltip-arrow").style.left="10px"}var et=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getData",value:function(t,n){var r=null;if(t&&n){var o=t[0],a=n[o.keyword];if(a){var i=e.extractPosition(o.proteinChange);r=a.filter(function(t){var n=e.extractPosition(t.proteinChange);return i&&n&&i===n})}}return r}},{key:"extractPosition",value:function(e){var t=Object(C.k)(e);return t?t.start:null}},{key:"getSortValue",value:function(t,n){var r=e.getData(t,n),o=null;return r&&(o=r.length>0?i.reduce(i.map(r,"count"),function(e,t){return e+t},0):0),0===o&&(o=null),o}},{key:"getDownloadValue",value:function(t,n){var r=e.getSortValue(t,n);return r?"".concat(r):""}},{key:"renderFunction",value:function(t,n){var o,a=e.getData(t,n),l=-1,u="",c=null;return a&&a.length>0&&(c=function(){return r.createElement("span",{className:qe.a["cosmic-table"]},r.createElement("b",null,l)," occurrences of ",r.createElement("b",null,a[0].keyword)," ","mutations in COSMIC",r.createElement(Ye,{data:a}))},u=(l=i.reduce(i.map(a,"count"),function(e,t){return e+t},0)).toString()),o=r.createElement("div",{className:Je.a["integer-data"]},u),c&&(o=r.createElement(d.c,{overlay:c,placement:"topLeft",onPopupAlign:$e,trigger:["hover","focus"],destroyTooltipOnHide:!0},o)),o}}],(n=null)&&Xe(t.prototype,n),o&&Xe(t,o),e}(),tt=n(750);function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var rt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"makeRenderFunction",value:function(e){return Object(tt.a)(function(t){var n=e.props.mutationCountCache;return n?n.get({sampleId:t[0].sampleId,studyId:t[0].studyId}):{status:"error",data:null}},function(e){return r.createElement("div",{className:Je.a["integer-data"]},e.value)},"Mutation count not available for this sample.")}},{key:"sortBy",value:function(e,t){var n=null;if(t){var r=t.get({sampleId:e[0].sampleId,studyId:e[0].studyId});n=r&&r.data?parseInt(r.data.value):null}else n=null;return n}},{key:"download",value:function(t,n){var r=e.sortBy(t,n);return r?"".concat(r):""}}],(n=null)&&nt(t.prototype,n),o&&nt(t,o),e}(),ot=n(751),at=n(792),it=n.n(at);function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ut=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getData",value:function(e){var t=null;return e.length>0&&(t=e[0].validationStatus),t}},{key:"sortValue",value:function(t){return e.getData(t)}},{key:"download",value:function(t){return e.getData(t)||""}},{key:"renderFunction",value:function(t){var n,o=e.getData(t),a=!1;if(o){var i=e.VALIDATION_STATUS_FORMAT[o.toLowerCase()];i?(n=r.createElement("span",{className:it.a[i.className]},i.text),a=!0):n=r.createElement("span",{className:it.a.other},o)}else n=r.createElement("span",null);return a&&(n=r.createElement(d.c,{overlay:r.createElement("span",null,o),placement:"right"},n)),n}},{key:"VALIDATION_STATUS_FORMAT",get:function(){var e={text:"U",className:"unknown",tooltip:"Unknown"},t={text:"V",className:"valid",tooltip:"Valid"};return{valid:t,validated:t,wildtype:{text:"W",className:"wildtype",tooltip:"Wildtype"},unknown:e,not_tested:e,"not tested":e,none:e,na:e,"n/a":e}}}],(n=null)&&lt(t.prototype,n),o&&lt(t,o),e}();function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var st=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"getStudy",value:function(e,t,n){if(!t||!n)return null;var r=t[e[0].molecularProfileId];return r&&n[r.studyId]||null}},{key:"renderFunction",value:function(t,n,o){var a=e.getStudy(t,n,o);return a?r.createElement("a",{href:Object(c.B)(a.studyId),target:"_blank"},r.createElement(u.a,{text:a.name,tooltip:r.createElement("div",{style:{maxWidth:300},dangerouslySetInnerHTML:{__html:"".concat(a.name,": ").concat(a.description)}}),maxLength:16})):r.createElement("span",null)}},{key:"getTextValue",value:function(t,n,r){var o=e.getStudy(t,n,r);return o?o.name:""}},{key:"filter",value:function(t,n,r,o){var a=e.getStudy(t,r,o);return!!a&&a.name.toUpperCase().indexOf(n)>-1}}],(n=null)&&ct(t.prototype,n),o&&ct(t,o),e}(),pt=n(102);function ft(){return(ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var mt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"sortValue",value:function(e,t,n,r,o,a,i,l,u){var c=Object(pt.N)(e?e[0]:void 0,t,n,r,o,a,i,l,u);return Object(pt.x)(c)}},{key:"download",value:function(e,t,n,r,o,a,i,l,u){var c=Object(pt.N)(e?e[0]:void 0,t,n,r,o,a,i,l,u);return["OncoKB: ".concat(Object(pt.bb)(c.oncoKbIndicator)),"CIViC: ".concat(Object(pt.B)(c.civicEntry)),"MyCancerGenome: ".concat(Object(pt.Z)(c.myCancerGenomeLinks)),"CancerHotspot: ".concat(c.isHotspot?"yes":"no"),"3DHotspot: ".concat(c.is3dHotspot?"yes":"no")].join(";")}},{key:"renderFunction",value:function(e,t){return r.createElement(pt.a,ft({mutation:e?e[0]:void 0},t))}}],(n=null)&&dt(t.prototype,n),o&&dt(t,o),e}(),ht=n(752);function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var gt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(t,n){var o=e.getGenomeNexusDataFromCache(t,n);return r.createElement("div",null,r.createElement("span",null,e.getHgvscDataViz(o)))}},{key:"getGenomeNexusDataFromCache",value:function(e,t){return 0!==e.length&&t?t.get(e[0]):null}},{key:"getHgvscDataViz",value:function(t){var n=null;if(null===t)n=d.n.LOADING;else if("error"===t.status)n=d.n.ERROR;else{if(null!==t.data){var o=e.getData(t.data);return null==o?o:r.createElement("span",{style:{display:"inline-block",float:"right"}},o)}n=d.n.NA}if(null!==n)return n===d.n.LOADING?r.createElement(Q.Circle,{size:18,scaleEnd:.5,scaleStart:.2,color:"#aaa",className:"pull-right"}):r.createElement(d.o,{status:n})}},{key:"getData",value:function(e){return e?e.annotation_summary.transcriptConsequenceSummary.hgvsc:null}},{key:"download",value:function(t,n){var r=e.getGenomeNexusDataFromCache(t,n),o=r&&e.getData(r.data);return o||""}},{key:"getSortValue",value:function(t,n){var r=e.getGenomeNexusDataFromCache(t,n);if(r){var o=e.getData(r.data);return null==o?null:parseInt(o.split("c.")[1])}return null}}],(n=null)&&yt(t.prototype,n),o&&yt(t,o),e}(),bt=n(573),vt=n(794),St=n.n(vt);function Et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var wt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(t,n){return e.getHgvsgDataViz(t[0],n)}},{key:"getHgvsgDataViz",value:function(t,n){var o=e.getData(t);if(o){var a=n(o);return r.createElement(d.c,{placement:"topLeft",overlay:r.createElement("div",null,o,r.createElement("br",null),"Click to see this variant on  ",r.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},"Genome Nexus",r.createElement("div",{className:St.a["genome-nexus-logo"]})))},r.createElement("span",{className:St.a["hgvsg-data"]},r.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},o," ",r.createElement("i",{className:"fa fa-external-link"}))))}return r.createElement("span",null)}},{key:"getData",value:function(e){return Object(bt.e)(e)}},{key:"download",value:function(t){var n=e.getData(t[0]);return n||""}},{key:"getSortValue",value:function(t){return e.getData(t[0])}}],(n=null)&&Et(t.prototype,n),o&&Et(t,o),e}();function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var At=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(e,t,n){return r.createElement("span",{"data-test":"gnomad-column","data-test2":e[0].sampleId},r.createElement(pt.n,{className:"",mutation:e[0],indexedVariantAnnotations:t,indexedMyVariantInfoAnnotations:n}))}},{key:"getData",value:function(e,t){return Object(C.i)(e[0],t?t.result:void 0)}},{key:"getSortValue",value:function(t,n){var r=e.getData(t,n);return Object(pt.S)(r)}},{key:"download",value:function(t,n){var r=e.getData(t,n);return Object(pt.R)(r)}}],(n=null)&&Tt(t.prototype,n),o&&Tt(t,o),e}();function It(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ot=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(e,t,n){return r.createElement("div",{"data-test":"clinvar-data"},r.createElement(pt.e,{className:Je.a["integer-data"],mutation:e[0],indexedVariantAnnotations:t,indexedMyVariantInfoAnnotations:n}))}},{key:"getData",value:function(e,t){return Object(C.i)(e[0],t?t.result:void 0)}},{key:"download",value:function(t,n){var r=e.getData(t,n);return Object(pt.D)(r)}},{key:"getSortValue",value:function(t,n){var r=e.getData(t,n);return Object(pt.E)(r)}}],(n=null)&&It(t.prototype,n),o&&It(t,o),e}(),Pt=n(8);function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var kt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"renderFunction",value:function(e,t,n){return r.createElement("div",{"data-test":"dbsnp-data"},r.createElement(pt.i,{className:"",mutation:e[0],indexedVariantAnnotations:t,indexedMyVariantInfoAnnotations:n}))}},{key:"getData",value:function(e,t){return Object(C.i)(e[0],t?t.result:void 0)}},{key:"download",value:function(t,n){var r=e.getData(t,n);return Object(pt.F)(r)}},{key:"getSortValue",value:function(t,n){var r=e.getData(t,n);return Object(pt.G)(r)}},{key:"filter",value:function(t,n,r){var o=e.getSortValue(t,r);return null!==o&&o.toUpperCase().includes(n)}}],(n=null)&&_t(t.prototype,n),o&&_t(t,o),e}();function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dt(e,t){return!t||"object"!==Nt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xt(e){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nt(e){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return Gt});var Gt,Lt=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Nt(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};!function(e){e[e.STUDY=0]="STUDY",e[e.SAMPLE_ID=1]="SAMPLE_ID",e[e.SAMPLES=2]="SAMPLES",e[e.GENE=3]="GENE",e[e.PROTEIN_CHANGE=4]="PROTEIN_CHANGE",e[e.CHROMOSOME=5]="CHROMOSOME",e[e.START_POS=6]="START_POS",e[e.END_POS=7]="END_POS",e[e.REF_ALLELE=8]="REF_ALLELE",e[e.VAR_ALLELE=9]="VAR_ALLELE",e[e.MUTATION_STATUS=10]="MUTATION_STATUS",e[e.VALIDATION_STATUS=11]="VALIDATION_STATUS",e[e.MUTATION_TYPE=12]="MUTATION_TYPE",e[e.VARIANT_TYPE=13]="VARIANT_TYPE",e[e.CENTER=14]="CENTER",e[e.TUMOR_ALLELE_FREQ=15]="TUMOR_ALLELE_FREQ",e[e.NORMAL_ALLELE_FREQ=16]="NORMAL_ALLELE_FREQ",e[e.FUNCTIONAL_IMPACT=17]="FUNCTIONAL_IMPACT",e[e.ANNOTATION=18]="ANNOTATION",e[e.HGVSG=19]="HGVSG",e[e.COSMIC=20]="COSMIC",e[e.COPY_NUM=21]="COPY_NUM",e[e.MRNA_EXPR=22]="MRNA_EXPR",e[e.COHORT=23]="COHORT",e[e.REF_READS_N=24]="REF_READS_N",e[e.VAR_READS_N=25]="VAR_READS_N",e[e.REF_READS=26]="REF_READS",e[e.VAR_READS=27]="VAR_READS",e[e.CANCER_TYPE=28]="CANCER_TYPE",e[e.NUM_MUTATIONS=29]="NUM_MUTATIONS",e[e.EXON=30]="EXON",e[e.HGVSC=31]="HGVSC",e[e.GNOMAD=32]="GNOMAD",e[e.CLINVAR=33]="CLINVAR",e[e.SELECTED=34]="SELECTED",e[e.DBSNP=35]="DBSNP",e[e.GENE_PANEL=36]="GENE_PANEL"}(Gt||(Gt={}));var Vt=function(e){function t(){return Mt(this,t),Dt(this,xt(t).apply(this,arguments))}return jt(t,l["b"]),t}();function Ft(e,t,n){var o=Bt(e,t);return r.createElement("div",{className:Z()(n?Je.a["integer-data"]:void 0)},o)}function Bt(e,t){var n="";return e.length>0&&e[0].hasOwnProperty(t)&&(n=e[0][t]),n}function Ut(e,t,n){return e.length>0&&e.reduce(function(e,r){var o=r[t];return o?e||o.toUpperCase().includes(n):e},!1)}var Wt=function(e){function t(e){var n;return Mt(this,t),(n=Dt(this,xt(t).call(this,e))).table=null,n._columns={},n.generateColumns(),n}var n,o,a;return jt(t,r["Component"]),n=t,(o=[{key:"tableRef",value:function(e){this.table=e}},{key:"resolveTumorType",value:function(e){if(this.props.uniqueSampleKeyToTumorType)return this.props.uniqueSampleKeyToTumorType[e.uniqueSampleKey];if(this.props.studyIdToStudy){var t=this.props.studyIdToStudy[e.studyId];if("mixed"!==t.cancerTypeId)return t.cancerType.name}return"Unknown"}},{key:"generateColumns",value:function(){var e=this;this._columns={},this._columns[Gt.STUDY]={name:"Study",render:function(t){return st.renderFunction(t,e.props.molecularProfileIdToMolecularProfile,e.props.studyIdToStudy)},download:function(t){return st.getTextValue(t,e.props.molecularProfileIdToMolecularProfile,e.props.studyIdToStudy)},sortBy:function(t){return st.getTextValue(t,e.props.molecularProfileIdToMolecularProfile,e.props.studyIdToStudy)},filter:function(t,n,r){return st.filter(t,r,e.props.molecularProfileIdToMolecularProfile,e.props.studyIdToStudy)},visible:!1},this._columns[Gt.SAMPLE_ID]={name:"Sample ID",render:function(t){return p.renderFunction(t,e.props.molecularProfileIdToMolecularProfile)},download:p.getTextValue,sortBy:p.getTextValue,filter:function(e,t,n){return Ut(e,"sampleId",n)},visible:!0},this._columns[Gt.TUMOR_ALLELE_FREQ]={name:"Allele Freq (T)",render:f.a.renderFunction,headerRender:function(e){return r.createElement("span",{style:{display:"inline-block",maxWidth:55}},e)},download:f.a.getTextValue,sortBy:f.a.getSortValue,tooltip:r.createElement("span",null,"Variant allele frequency in the tumor sample"),visible:!0},this._columns[Gt.NORMAL_ALLELE_FREQ]={name:"Allele Freq (N)",render:h.renderFunction,headerRender:function(e){return r.createElement("span",{style:{display:"inline-block",maxWidth:55}},e)},download:h.getTextValue,sortBy:h.getSortValue,tooltip:r.createElement("span",null,"Variant allele frequency in the normal sample"),visible:!1},this._columns[Gt.MRNA_EXPR]={name:"mRNA Expr.",render:function(t){return e.props.mrnaExprRankCache?y.a.renderFunction(t,e.props.mrnaExprRankCache):r.createElement("span",null)}},this._columns[Gt.COHORT]={name:"Cohort",render:function(t){return e.props.variantCountCache?w.renderFunction(t,e.props.mutSigData,e.props.variantCountCache):r.createElement("span",null)},sortBy:function(t){var n=e.props.variantCountCache;return n?w.getSortValue(t,n):0},tooltip:r.createElement("span",null,"Mutation frequency in cohort"),defaultSortDirection:"desc"},this._columns[Gt.COPY_NUM]={name:"Copy #",render:function(t){return e.props.discreteCNACache&&e.props.molecularProfileIdToMolecularProfile?A.renderFunction(t,e.props.molecularProfileIdToMolecularProfile,e.props.discreteCNACache):r.createElement("span",null)},sortBy:function(t){return e.props.discreteCNACache&&e.props.molecularProfileIdToMolecularProfile?A.getSortValue(t,e.props.molecularProfileIdToMolecularProfile,e.props.discreteCNACache):0},download:function(t){return e.props.discreteCNACache&&e.props.molecularProfileIdToMolecularProfile?A.getTextValue(t,e.props.molecularProfileIdToMolecularProfile,e.props.discreteCNACache):""},filter:function(t,n){return!(!e.props.discreteCNACache||!e.props.molecularProfileIdToMolecularProfile)&&A.filter(t,e.props.molecularProfileIdToMolecularProfile,e.props.discreteCNACache,n)},visible:A.isVisible(this.props.discreteCNACache)},this._columns[Gt.REF_READS_N]={name:"Ref Reads (Normal)",render:function(e){return I.a.renderFunction(e,[e[0].sampleId],"normalRefCount")},download:function(e){return I.a.getTextValue(e,[e[0].sampleId],"normalRefCount")},sortBy:function(e){return e.map(function(e){return e.normalRefCount})},visible:!1,align:"right"},this._columns[Gt.VAR_READS_N]={name:"Variant Reads (Normal)",render:function(e){return I.a.renderFunction(e,[e[0].sampleId],"normalAltCount")},download:function(e){return I.a.getTextValue(e,[e[0].sampleId],"normalAltCount")},sortBy:function(e){return e.map(function(e){return e.normalAltCount})},visible:!1,align:"right"},this._columns[Gt.REF_READS]={name:"Ref Reads",render:function(e){return I.a.renderFunction(e,[e[0].sampleId],"tumorRefCount")},download:function(e){return I.a.getTextValue(e,[e[0].sampleId],"tumorRefCount")},sortBy:function(e){return e.map(function(e){return e.tumorRefCount})},visible:!1,align:"right"},this._columns[Gt.VAR_READS]={name:"Variant Reads",render:function(e){return I.a.renderFunction(e,[e[0].sampleId],"tumorAltCount")},download:function(e){return I.a.getTextValue(e,[e[0].sampleId],"tumorAltCount")},sortBy:function(e){return e.map(function(e){return e.tumorAltCount})},visible:!1,align:"right"},this._columns[Gt.START_POS]={name:"Start Pos",render:function(e){return Ft(e,"startPosition",!0)},download:function(e){return Bt(e,"startPosition")},sortBy:function(e){return e.map(function(e){return e.startPosition})},visible:!1,align:"right"},this._columns[Gt.END_POS]={name:"End Pos",render:function(e){return Ft(e,"endPosition",!0)},download:function(e){return Bt(e,"endPosition")},sortBy:function(e){return e.map(function(e){return e.endPosition})},visible:!1,align:"right"},this._columns[Gt.REF_ALLELE]={name:"Ref",render:function(e){return Ft(e,"referenceAllele")},download:function(e){return Bt(e,"referenceAllele")},sortBy:function(e){return e.map(function(e){return e.referenceAllele})},visible:!1},this._columns[Gt.VAR_ALLELE]={name:"Var",render:function(e){return Ft(e,"variantAllele")},download:function(e){return Bt(e,"variantAllele")},sortBy:function(e){return e.map(function(e){return e.variantAllele})},visible:!1},this._columns[Gt.MUTATION_STATUS]={name:"MS",tooltip:r.createElement("span",null,"Mutation Status"),render:j.renderFunction,download:j.download,sortBy:j.sortValue,filter:function(e,t,n){return Ut(e,"mutationStatus",n)},visible:!1},this._columns[Gt.VALIDATION_STATUS]={name:"VS",tooltip:r.createElement("span",null,"Validation Status"),render:ut.renderFunction,download:ut.download,sortBy:ut.sortValue,filter:function(e,t,n){return Ut(e,"validationStatus",n)},visible:!1},this._columns[Gt.CENTER]={name:"Center",render:function(e){return Ft(e,"center")},download:function(e){return Bt(e,"center")},sortBy:function(e){return e.map(function(e){return e.center})},filter:function(e,t,n){return Ut(e,"center",n)},visible:!1},this._columns[Gt.GENE]={name:"Gene",render:function(e){return P.renderFunction(e)},download:function(e){return P.getTextValue(e)},sortBy:function(e){return P.getSortValue(e)},filter:function(e,t,n){return P.getTextValue(e).toUpperCase().includes(n)}},this._columns[Gt.CHROMOSOME]={name:"Chromosome",render:function(e){return r.createElement("div",{className:Je.a["integer-data"]},k.getData(e))},download:function(e){return k.getData(e)||""},sortBy:function(e){return k.getSortValue(e)},filter:function(e,t,n){return(k.getData(e)+"").toUpperCase().includes(n)},visible:!1,align:"right"},this._columns[Gt.PROTEIN_CHANGE]={name:"Protein Change",render:L.renderWithMutationStatus,download:L.getTextValue,sortBy:function(e){return L.getSortValue(e)},filter:L.getFilterValue},this._columns[Gt.MUTATION_TYPE]={name:"Mutation Type",render:W.renderFunction,download:W.getTextValue,sortBy:function(e){return W.getDisplayValue(e)},filter:function(e,t,n){return W.getDisplayValue(e).toUpperCase().includes(n)}},this._columns[Gt.VARIANT_TYPE]={name:"Variant Type",render:Y.renderFunction,download:Y.getTextValue,sortBy:function(e){return Y.getDisplayValue(e)},filter:function(e,t,n){return Y.getDisplayValue(e).toUpperCase().includes(n)},visible:!1},this._columns[Gt.FUNCTIONAL_IMPACT]={name:"Functional Impact",render:function(t){return e.props.genomeNexusCache||e.props.genomeNexusMutationAssessorCache?Le.renderFunction(t,e.props.genomeNexusCache,e.props.genomeNexusMutationAssessorCache):r.createElement("span",null)},download:function(t){return Le.download(t,e.props.genomeNexusCache,e.props.genomeNexusMutationAssessorCache)},headerRender:Le.headerRender,visible:!1,shouldExclude:function(){return!e.props.enableFunctionalImpact}},this._columns[Gt.COSMIC]={name:"COSMIC",render:function(t){return et.renderFunction(t,e.props.cosmicData)},sortBy:function(t){return et.getSortValue(t,e.props.cosmicData)},download:function(t){return et.getDownloadValue(t,e.props.cosmicData)},tooltip:r.createElement("span",null,"COSMIC occurrences"),defaultSortDirection:"desc",align:"right"},this._columns[Gt.ANNOTATION]={name:"Annotation",render:function(t){return mt.renderFunction(t,{hotspotData:e.props.hotspotData,myCancerGenomeData:e.props.myCancerGenomeData,oncoKbData:e.props.oncoKbData,oncoKbCancerGenes:e.props.oncoKbCancerGenes,usingPublicOncoKbInstance:e.props.usingPublicOncoKbInstance,pubMedCache:e.props.pubMedCache,civicGenes:e.props.civicGenes,civicVariants:e.props.civicVariants,enableCivic:e.props.enableCivic,enableOncoKb:e.props.enableOncoKb,enableMyCancerGenome:e.props.enableMyCancerGenome,enableHotspot:e.props.enableHotspot,userEmailAddress:e.props.userEmailAddress,resolveTumorType:e.resolveTumorType})},filter:function(t,n,r){var o=!1;switch(r){case"HOTSPOT":o=Object(pt.N)(t?t[0]:void 0,e.props.oncoKbCancerGenes,e.props.hotspotData,e.props.myCancerGenomeData,e.props.oncoKbData,e.props.usingPublicOncoKbInstance,e.props.civicGenes,e.props.civicVariants,e.resolveTumorType).isHotspot;break;case"ONCOGENIC":if(e.props.oncoKbData&&e.props.oncoKbData.result&&!(e.props.oncoKbData.result instanceof Error)&&e.props.oncoKbData.result.indicatorMap){var a=Object(d.A)(t[0].entrezGeneId,null,t[0].proteinChange,t[0].mutationType),i=e.props.oncoKbData.result.indicatorMap[a];i&&(o=i.oncogenic.toLowerCase().trim().includes("oncogenic"))}}return o},download:function(t){return mt.download(t,e.props.oncoKbCancerGenes,e.props.hotspotData,e.props.myCancerGenomeData,e.props.oncoKbData,e.props.usingPublicOncoKbInstance,e.props.civicGenes,e.props.civicVariants,e.resolveTumorType)},sortBy:function(t){return mt.sortValue(t,e.props.oncoKbCancerGenes,e.props.hotspotData,e.props.myCancerGenomeData,e.props.oncoKbData,e.props.usingPublicOncoKbInstance,e.props.civicGenes,e.props.civicVariants,e.resolveTumorType)}},this._columns[Gt.HGVSG]={name:"HGVSg",render:function(t){return wt.renderFunction(t,e.props.generateGenomeNexusHgvsgUrl)},download:function(e){return wt.download(e)},sortBy:function(e){return wt.getSortValue(e)},visible:!1,align:"left"},this._columns[Gt.CANCER_TYPE]={name:"Cancer Type",render:function(t){return ot.a.render(t,e.props.uniqueSampleKeyToTumorType)},download:function(t){return ot.a.download(t,e.props.uniqueSampleKeyToTumorType)},sortBy:function(t){return ot.a.sortBy(t,e.props.uniqueSampleKeyToTumorType)},filter:function(t,n,r){return ot.a.filter(t,r,e.props.uniqueSampleKeyToTumorType)},tooltip:r.createElement("span",null,"Cancer Type")},this._columns[Gt.NUM_MUTATIONS]={name:"# Mut in Sample",render:rt.makeRenderFunction(this),headerRender:function(e){return r.createElement("span",{style:{display:"inline-block",maxWidth:55}},e)},sortBy:function(t){return rt.sortBy(t,e.props.mutationCountCache)},download:function(t){return rt.download(t,e.props.mutationCountCache)},tooltip:r.createElement("span",null,"Total number of nonsynonymous mutations in the sample"),align:"right"},this._columns[Gt.EXON]={name:"Exon",render:function(t){return e.props.genomeNexusCache?ht.a.renderFunction(t,e.props.genomeNexusCache):r.createElement("span",null)},download:function(t){return ht.a.download(t,e.props.genomeNexusCache)},sortBy:function(t){return ht.a.getSortValue(t,e.props.genomeNexusCache)},visible:!1,align:"right"},this._columns[Gt.HGVSC]={name:"HGVSc",render:function(t){return e.props.genomeNexusCache?gt.renderFunction(t,e.props.genomeNexusCache):r.createElement("span",null)},download:function(t){return gt.download(t,e.props.genomeNexusCache)},sortBy:function(t){return gt.getSortValue(t,e.props.genomeNexusCache)},visible:!1,align:"right"},this._columns[Gt.GNOMAD]={name:"gnomAD",render:function(t){return At.renderFunction(t,e.props.indexedVariantAnnotations,e.props.indexedMyVariantInfoAnnotations)},sortBy:function(t){return At.getSortValue(t,e.props.indexedMyVariantInfoAnnotations)},download:function(t){return At.download(t,e.props.indexedMyVariantInfoAnnotations)},tooltip:r.createElement("span",null,r.createElement("a",{href:"https://gnomad.broadinstitute.org/"},"gnomAD")," ","population allele frequencies. Overall population allele frequency is shown. Hover over a frequency to see the frequency for each specific population."),defaultSortDirection:"desc",visible:!1,align:"left"},this._columns[Gt.CLINVAR]={name:"ClinVar ID",render:function(t){return Ot.renderFunction(t,e.props.indexedVariantAnnotations,e.props.indexedMyVariantInfoAnnotations)},sortBy:function(t){return Ot.getSortValue(t,e.props.indexedMyVariantInfoAnnotations)},download:function(t){return Ot.download(t,e.props.indexedMyVariantInfoAnnotations)},tooltip:r.createElement("span",null,r.createElement("a",{href:"https://www.ncbi.nlm.nih.gov/clinvar/",target:"_blank"},"ClinVar")," aggregates information about genomic variation and its relationship to human health."),defaultSortDirection:"desc",visible:!1,align:"right"},this._columns[Gt.DBSNP]={name:"dbSNP",render:function(t){return kt.renderFunction(t,e.props.indexedVariantAnnotations,e.props.indexedMyVariantInfoAnnotations)},sortBy:function(t){return kt.getSortValue(t,e.props.indexedMyVariantInfoAnnotations)},download:function(t){return kt.download(t,e.props.indexedMyVariantInfoAnnotations)},filter:function(t,n,r){return kt.filter(t,r,e.props.indexedMyVariantInfoAnnotations)},tooltip:r.createElement("span",{style:{maxWidth:370,display:"block",textAlign:"left"}},"The Single Nucleotide Polymorphism Database (",r.createElement("a",{href:"https://www.ncbi.nlm.nih.gov/snp/",target:"_blank"},"dbSNP"),") is a free public archive for genetic variation within and across different species.",r.createElement("br",null),"NOTE: Currently only SNPs, single base deletions and insertions are supported."),defaultSortDirection:"desc",visible:!1,align:"right"}}},{key:"render",value:function(){return r.createElement(Vt,{ref:this.tableRef,columns:this.columns,data:this.props.data,dataStore:this.props.dataStore,downloadDataFetcher:this.props.downloadDataFetcher,initialItemsPerPage:this.props.initialItemsPerPage,initialSortColumn:this.props.initialSortColumn,initialSortDirection:this.props.initialSortDirection,itemsLabel:this.props.itemsLabel,itemsLabelPlural:this.props.itemsLabelPlural,paginationProps:this.props.paginationProps,showCountHeader:this.props.showCountHeader,columnVisibility:this.props.columnVisibility,columnVisibilityProps:this.props.columnVisibilityProps,onRowClick:this.props.onRowClick,onRowMouseEnter:this.props.onRowMouseEnter,onRowMouseLeave:this.props.onRowMouseLeave})}},{key:"orderedColumns",get:function(){var e=this,t=this.props.columns||[];return i.sortBy(t,function(t){var n=-1;return e._columns[t]&&e._columns[t].order&&(n=e._columns[t].order),n})}},{key:"columns",get:function(){var e=this;return this.orderedColumns.reduce(function(t,n){var r=e._columns[n];return!r||r.shouldExclude&&r.shouldExclude()||t.push(r),t},[])}}])&&Ct(n.prototype,o),a&&Ct(n,a),t}();Wt.defaultProps={initialItemsPerPage:25,showCountHeader:!0,paginationProps:{itemsPerPageOptions:[25,50,100]},initialSortColumn:"Annotation",initialSortDirection:"desc",itemsLabel:"Mutation",itemsLabelPlural:"Mutations",enableOncoKb:!0,enableMyCancerGenome:!0,enableHotspot:!0,enableCivic:!1},Lt([a.observable],Wt.prototype,"_columns",void 0),Lt([a.observable.ref],Wt.prototype,"table",void 0),Lt([Pt.default],Wt.prototype,"tableRef",null),Lt([Pt.default],Wt.prototype,"resolveTumorType",null),Lt([a.computed],Wt.prototype,"orderedColumns",null),Lt([a.computed],Wt.prototype,"columns",null),Wt=Lt([o.observer],Wt);t.b=Wt},856:function(e,t,n){"use strict";var r=n(0),o=n(101),a=n(7),i=n(2),l=n(8);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},m=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=c(this,s(t).apply(this,arguments))).iframeLoaded=!1,e}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(a=[{key:"onLoad",value:function(){this.iframeLoaded=!0}},{key:"render",value:function(){return r.createElement("div",{style:{position:"relative"}},r.createElement(o.a,{center:!0,size:"big",isLoading:!this.iframeLoaded}),r.createElement("iframe",{id:this.props.iframeId||"",className:this.props.className||"",style:{width:"100%",position:"relative",zIndex:100,height:this.props.height,border:"none"},src:this.props.url,onLoad:this.onLoad}))}}])&&u(n.prototype,a),i&&u(n,i),t}();d([i.observable],m.prototype,"iframeLoaded",void 0),d([l.default],m.prototype,"onLoad",null),m=d([a.observer],m),t.a=m},857:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return l});var r=n(881),o=n.n(r),a=n(3),i=n(2);function l(t,n,r,l){var u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n.dependencyPromise=n.dependencyPromise||function(t){if(t.pathsToCSS&&t.pathsToCSS.forEach(function(t){e("head").append('<link rel="stylesheet" href='.concat(t,' type="text/css" />'))}),t.pathsToJs){var n=[];return t.pathsToJs.forEach(function(e){var t=new Promise(function(t,n){o()(e,function(e){e?n(e):t()})});n.push(t)}),Promise.all(n)}}(n);n.dependencyPromise.then(function(){!function(e){Object(a.B)()[e.mountCallbackName]?Object(a.B)()[e.mountCallbackName](t,e,r,l,i.autorun,u):alert("Callback for tab ".concat(e.title," not found"))}(n)})}}).call(this,n(11))},858:function(e,t,n){"use strict";var r=n(0),o=n(7),a=n(2),i=n(801),l=n(8);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,s(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(o=[{key:"openResource",value:function(){this.props.openResource(this.props.resource)}},{key:"render",value:function(){return r.createElement("div",null,r.createElement("a",{onClick:this.openResource},this.icon,this.props.resource.resourceDefinition.displayName||this.props.resource.url),r.createElement("a",{href:this.props.resource.url,style:{marginLeft:16,fontSize:10},target:"_blank"},r.createElement("i",{className:"fa fa-external-link fa-sm",style:{marginRight:5,color:"black"}}),"Open in new window"))}},{key:"icon",get:function(){var e="";switch(Object(i.b)(this.props.resource.url)){case"pdf":e="fa fa-file-pdf-o";break;case"png":case"jpeg":case"jpg":case"gif":e="fa fa-file-image-o";break;case"m4a":case"flac":case"mp3":case"mp4":case"wav":e="fa fa-file-audio-o"}return e?r.createElement("i",{className:"".concat(e," fa-sm"),style:{marginRight:5,color:"black"}}):null}}])&&u(n.prototype,o),a&&u(n,a),t}();d([a.computed],m.prototype,"icon",null),d([l.default],m.prototype,"openResource",null),m=d([o.observer],m),t.a=m},880:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(0),o=n(725),a=n(17);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).apply(this,arguments))}var n,i,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){var e=this;return r.createElement("span",{style:{cursor:"default"}},r.createElement(o.a,{text:"G",tooltip:function(){return e.getToolTip(e.props.qValue,e.props.peakGeneCount)}}))}},{key:"getToolTip",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r.createElement("div",null,"Candidate driver gene, as determined by the ",r.createElement("b",null,"GISTIC"),r.createElement("br",null),"algorithm.",r.createElement("p",null),"The GISTIC algorithm identifies likely driver copy number",r.createElement("br",null),"alterations by evaluating the frequency and amplitude of",r.createElement("br",null),"observed CNA events within the entire study.",r.createElement("p",null),r.createElement("span",null," Q-value: ",(e||0).toExponential(3)),r.createElement(a.If,{condition:t>0},r.createElement(a.Then,null,r.createElement("br",null),r.createElement("span",null," ","Number of genes in the peak: ",t))))}}])&&l(n.prototype,i),p&&l(n,p),t}()},882:function(e,t,n){"use strict";var r=n(0),o=n(7),a=n(736),i=n(584),l=n(2),u=n(883),c=n.n(u),s=n(9),p=n.n(s),f=n(8),d=n(3),m=n(801);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":S(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},w=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,b(t).apply(this,arguments))}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,r["Component"]),n=t,(o=[{key:"goToNextDatum",value:function(){this.isLastDatum||this.props.urlWrapper.setResourceUrl(this.props.resourceData[this.currentResourceIndex+1].url)}},{key:"goToPrevDatum",value:function(){this.isFirstDatum||this.props.urlWrapper.setResourceUrl(this.props.resourceData[this.currentResourceIndex-1].url)}},{key:"render",value:function(){var e=this.props.resourceData.length>1;return r.createElement("div",null,r.createElement(a.a,{title:this.currentResourceDatum.resourceDefinition.displayName,isLoading:!1,className:"pull-left",style:{marginBottom:10}}),r.createElement("div",{style:{width:"100%",height:this.iframeHeight,display:"flex",alignItems:"center"}},e&&r.createElement("div",{className:p()(c.a.carouselButton,h({},c.a.active,!this.isFirstDatum)),onClick:this.goToPrevDatum},r.createElement("i",{style:{marginRight:15},className:"fa fa-4x fa-chevron-left"})),this.httpIframeWithHttpsPortal?r.createElement("div",null,r.createElement("span",null,"We can't show this URL in the portal. Please use the link below:"),r.createElement("br",null),r.createElement("a",{href:this.currentResourceDatum.url},this.currentResourceDatum.url)):r.createElement("iframe",{src:this.iframeUrl,style:{width:"100%",height:"100%"}}),e&&r.createElement("div",{className:p()(c.a.carouselButton,h({},c.a.active,!this.isLastDatum)),onClick:this.goToNextDatum},r.createElement("i",{style:{marginLeft:15},className:"fa fa-4x fa-chevron-right"}))))}},{key:"iframeHeight",get:function(){return i.a.size.height-275}},{key:"currentResourceIndex",get:function(){var e=this;if(this.props.urlWrapper.query.resourceUrl){var t=this.props.resourceData.findIndex(function(t){return t.url===e.props.urlWrapper.query.resourceUrl});return-1===t?0:t}return 0}},{key:"currentResourceDatum",get:function(){return this.props.resourceData[this.currentResourceIndex]}},{key:"isFirstDatum",get:function(){return 0===this.currentResourceIndex}},{key:"isLastDatum",get:function(){return this.currentResourceIndex===this.props.resourceData.length-1}},{key:"httpIframeWithHttpsPortal",get:function(){return"https:"===Object(d.B)().location.protocol&&"http:"===new URL(this.currentResourceDatum.url).protocol}},{key:"iframeUrl",get:function(){var e=Object(m.b)(this.currentResourceDatum.url),t=this.currentResourceDatum.url;switch(e){case"pdf":t=Object(m.a)(this.currentResourceDatum.url)}return t}}])&&y(n.prototype,o),l&&y(n,l),t}();E([l.computed],w.prototype,"iframeHeight",null),E([l.computed],w.prototype,"currentResourceIndex",null),E([l.computed],w.prototype,"currentResourceDatum",null),E([f.default,l.action],w.prototype,"goToNextDatum",null),E([f.default,l.action],w.prototype,"goToPrevDatum",null),E([l.computed],w.prototype,"isFirstDatum",null),E([l.computed],w.prototype,"isLastDatum",null),E([l.computed],w.prototype,"httpIframeWithHttpsPortal",null),E([l.computed],w.prototype,"iframeUrl",null),w=E([o.observer],w),t.a=w},883:function(e,t,n){e.exports={portalWidth:"styles-module__portalWidth__3mtfh",framedImage:"styles-module__framedImage__24LeD",carouselButton:"styles-module__carouselButton__35zgJ",active:"styles-module__active__xJZuN"}}}]);